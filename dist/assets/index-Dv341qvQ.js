function lp(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function cp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rd={exports:{}},Li={},nd={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ms=Symbol.for("react.element"),up=Symbol.for("react.portal"),dp=Symbol.for("react.fragment"),hp=Symbol.for("react.strict_mode"),fp=Symbol.for("react.profiler"),pp=Symbol.for("react.provider"),mp=Symbol.for("react.context"),gp=Symbol.for("react.forward_ref"),yp=Symbol.for("react.suspense"),vp=Symbol.for("react.memo"),xp=Symbol.for("react.lazy"),sc=Symbol.iterator;function wp(e){return e===null||typeof e!="object"?null:(e=sc&&e[sc]||e["@@iterator"],typeof e=="function"?e:null)}var sd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},id=Object.assign,ad={};function hn(e,t,r){this.props=e,this.context=t,this.refs=ad,this.updater=r||sd}hn.prototype.isReactComponent={};hn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function od(){}od.prototype=hn.prototype;function el(e,t,r){this.props=e,this.context=t,this.refs=ad,this.updater=r||sd}var tl=el.prototype=new od;tl.constructor=el;id(tl,hn.prototype);tl.isPureReactComponent=!0;var ic=Array.isArray,ld=Object.prototype.hasOwnProperty,rl={current:null},cd={key:!0,ref:!0,__self:!0,__source:!0};function ud(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)ld.call(t,n)&&!cd.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ms,type:e,key:i,ref:o,props:s,_owner:rl.current}}function bp(e,t){return{$$typeof:ms,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function nl(e){return typeof e=="object"&&e!==null&&e.$$typeof===ms}function _p(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ac=/\/+/g;function ca(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_p(""+e.key):t.toString(36)}function Gs(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ms:case up:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+ca(o,0):n,ic(s)?(r="",e!=null&&(r=e.replace(ac,"$&/")+"/"),Gs(s,t,r,"",function(u){return u})):s!=null&&(nl(s)&&(s=bp(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ac,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",ic(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+ca(i,l);o+=Gs(i,t,r,c,s)}else if(c=wp(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+ca(i,l++),o+=Gs(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ks(e,t,r){if(e==null)return e;var n=[],s=0;return Gs(e,n,"","",function(i){return t.call(r,i,s++)}),n}function jp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fe={current:null},Js={transition:null},kp={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:Js,ReactCurrentOwner:rl};function dd(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:ks,forEach:function(e,t,r){ks(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ks(e,function(){t++}),t},toArray:function(e){return ks(e,function(t){return t})||[]},only:function(e){if(!nl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};B.Component=hn;B.Fragment=dp;B.Profiler=fp;B.PureComponent=el;B.StrictMode=hp;B.Suspense=yp;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kp;B.act=dd;B.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=id({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=rl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ld.call(t,c)&&!cd.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:ms,type:e.type,key:s,ref:i,props:n,_owner:o}};B.createContext=function(e){return e={$$typeof:mp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pp,_context:e},e.Consumer=e};B.createElement=ud;B.createFactory=function(e){var t=ud.bind(null,e);return t.type=e,t};B.createRef=function(){return{current:null}};B.forwardRef=function(e){return{$$typeof:gp,render:e}};B.isValidElement=nl;B.lazy=function(e){return{$$typeof:xp,_payload:{_status:-1,_result:e},_init:jp}};B.memo=function(e,t){return{$$typeof:vp,type:e,compare:t===void 0?null:t}};B.startTransition=function(e){var t=Js.transition;Js.transition={};try{e()}finally{Js.transition=t}};B.unstable_act=dd;B.useCallback=function(e,t){return Fe.current.useCallback(e,t)};B.useContext=function(e){return Fe.current.useContext(e)};B.useDebugValue=function(){};B.useDeferredValue=function(e){return Fe.current.useDeferredValue(e)};B.useEffect=function(e,t){return Fe.current.useEffect(e,t)};B.useId=function(){return Fe.current.useId()};B.useImperativeHandle=function(e,t,r){return Fe.current.useImperativeHandle(e,t,r)};B.useInsertionEffect=function(e,t){return Fe.current.useInsertionEffect(e,t)};B.useLayoutEffect=function(e,t){return Fe.current.useLayoutEffect(e,t)};B.useMemo=function(e,t){return Fe.current.useMemo(e,t)};B.useReducer=function(e,t,r){return Fe.current.useReducer(e,t,r)};B.useRef=function(e){return Fe.current.useRef(e)};B.useState=function(e){return Fe.current.useState(e)};B.useSyncExternalStore=function(e,t,r){return Fe.current.useSyncExternalStore(e,t,r)};B.useTransition=function(){return Fe.current.useTransition()};B.version="18.3.1";nd.exports=B;var _=nd.exports;const Np=cp(_),Sp=lp({__proto__:null,default:Np},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep=_,Cp=Symbol.for("react.element"),Pp=Symbol.for("react.fragment"),Ap=Object.prototype.hasOwnProperty,Tp=Ep.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fp={key:!0,ref:!0,__self:!0,__source:!0};function hd(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Ap.call(t,n)&&!Fp.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Cp,type:e,key:i,ref:o,props:s,_owner:Tp.current}}Li.Fragment=Pp;Li.jsx=hd;Li.jsxs=hd;rd.exports=Li;var a=rd.exports,fd={exports:{}},Ve={},pd={exports:{}},md={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,U){var z=T.length;T.push(U);e:for(;0<z;){var Q=z-1>>>1,ae=T[Q];if(0<s(ae,U))T[Q]=U,T[z]=ae,z=Q;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var U=T[0],z=T.pop();if(z!==U){T[0]=z;e:for(var Q=0,ae=T.length,P=ae>>>1;Q<P;){var W=2*(Q+1)-1,Z=T[W],me=W+1,Pe=T[me];if(0>s(Z,z))me<ae&&0>s(Pe,Z)?(T[Q]=Pe,T[me]=z,Q=me):(T[Q]=Z,T[W]=z,Q=W);else if(me<ae&&0>s(Pe,z))T[Q]=Pe,T[me]=z,Q=me;else break e}}return U}function s(T,U){var z=T.sortIndex-U.sortIndex;return z!==0?z:T.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,p=3,y=!1,x=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(T){for(var U=r(u);U!==null;){if(U.callback===null)n(u);else if(U.startTime<=T)n(u),U.sortIndex=U.expirationTime,t(c,U);else break;U=r(u)}}function b(T){if(v=!1,g(T),!x)if(r(c)!==null)x=!0,jr(N);else{var U=r(u);U!==null&&kr(b,U.startTime-T)}}function N(T,U){x=!1,v&&(v=!1,m(S),S=-1),y=!0;var z=p;try{for(g(U),f=r(c);f!==null&&(!(f.expirationTime>U)||T&&!I());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,p=f.priorityLevel;var ae=Q(f.expirationTime<=U);U=e.unstable_now(),typeof ae=="function"?f.callback=ae:f===r(c)&&n(c),g(U)}else n(c);f=r(c)}if(f!==null)var P=!0;else{var W=r(u);W!==null&&kr(b,W.startTime-U),P=!1}return P}finally{f=null,p=z,y=!1}}var k=!1,j=null,S=-1,F=5,C=-1;function I(){return!(e.unstable_now()-C<F)}function V(){if(j!==null){var T=e.unstable_now();C=T;var U=!0;try{U=j(!0,T)}finally{U?Ce():(k=!1,j=null)}}else k=!1}var Ce;if(typeof d=="function")Ce=function(){d(V)};else if(typeof MessageChannel<"u"){var St=new MessageChannel,la=St.port2;St.port1.onmessage=V,Ce=function(){la.postMessage(null)}}else Ce=function(){w(V,0)};function jr(T){j=T,k||(k=!0,Ce())}function kr(T,U){S=w(function(){T(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){x||y||(x=!0,jr(N))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(T){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var z=p;p=U;try{return T()}finally{p=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,U){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var z=p;p=T;try{return U()}finally{p=z}},e.unstable_scheduleCallback=function(T,U,z){var Q=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Q+z:Q):z=Q,T){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=z+ae,T={id:h++,callback:U,priorityLevel:T,startTime:z,expirationTime:ae,sortIndex:-1},z>Q?(T.sortIndex=z,t(u,T),r(c)===null&&T===r(u)&&(v?(m(S),S=-1):v=!0,kr(b,z-Q))):(T.sortIndex=ae,t(c,T),x||y||(x=!0,jr(N))),T},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(T){var U=p;return function(){var z=p;p=U;try{return T.apply(this,arguments)}finally{p=z}}}})(md);pd.exports=md;var Rp=pd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op=_,We=Rp;function E(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gd=new Set,Vn={};function wr(e,t){rn(e,t),rn(e+"Capture",t)}function rn(e,t){for(Vn[e]=t,e=0;e<t.length;e++)gd.add(t[e])}var wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Va=Object.prototype.hasOwnProperty,Ip=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oc={},lc={};function Dp(e){return Va.call(lc,e)?!0:Va.call(oc,e)?!1:Ip.test(e)?lc[e]=!0:(oc[e]=!0,!1)}function $p(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Lp(e,t,r,n){if(t===null||typeof t>"u"||$p(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Re(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){je[e]=new Re(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];je[t]=new Re(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){je[e]=new Re(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){je[e]=new Re(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){je[e]=new Re(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){je[e]=new Re(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){je[e]=new Re(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){je[e]=new Re(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){je[e]=new Re(e,5,!1,e.toLowerCase(),null,!1,!1)});var sl=/[\-:]([a-z])/g;function il(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(sl,il);je[t]=new Re(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(sl,il);je[t]=new Re(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(sl,il);je[t]=new Re(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){je[e]=new Re(e,1,!1,e.toLowerCase(),null,!1,!1)});je.xlinkHref=new Re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){je[e]=new Re(e,1,!1,e.toLowerCase(),null,!0,!0)});function al(e,t,r,n){var s=je.hasOwnProperty(t)?je[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Lp(t,r,s,n)&&(r=null),n||s===null?Dp(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var kt=Op.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ns=Symbol.for("react.element"),Dr=Symbol.for("react.portal"),$r=Symbol.for("react.fragment"),ol=Symbol.for("react.strict_mode"),qa=Symbol.for("react.profiler"),yd=Symbol.for("react.provider"),vd=Symbol.for("react.context"),ll=Symbol.for("react.forward_ref"),Ha=Symbol.for("react.suspense"),Ka=Symbol.for("react.suspense_list"),cl=Symbol.for("react.memo"),Pt=Symbol.for("react.lazy"),xd=Symbol.for("react.offscreen"),cc=Symbol.iterator;function yn(e){return e===null||typeof e!="object"?null:(e=cc&&e[cc]||e["@@iterator"],typeof e=="function"?e:null)}var re=Object.assign,ua;function En(e){if(ua===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ua=t&&t[1]||""}return`
`+ua+e}var da=!1;function ha(e,t){if(!e||da)return"";da=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{da=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?En(e):""}function Up(e){switch(e.tag){case 5:return En(e.type);case 16:return En("Lazy");case 13:return En("Suspense");case 19:return En("SuspenseList");case 0:case 2:case 15:return e=ha(e.type,!1),e;case 11:return e=ha(e.type.render,!1),e;case 1:return e=ha(e.type,!0),e;default:return""}}function Ga(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $r:return"Fragment";case Dr:return"Portal";case qa:return"Profiler";case ol:return"StrictMode";case Ha:return"Suspense";case Ka:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vd:return(e.displayName||"Context")+".Consumer";case yd:return(e._context.displayName||"Context")+".Provider";case ll:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cl:return t=e.displayName||null,t!==null?t:Ga(e.type)||"Memo";case Pt:t=e._payload,e=e._init;try{return Ga(e(t))}catch{}}return null}function zp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ga(t);case 8:return t===ol?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bp(e){var t=wd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ss(e){e._valueTracker||(e._valueTracker=Bp(e))}function bd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=wd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function oi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ja(e,t){var r=t.checked;return re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function uc(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Gt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _d(e,t){t=t.checked,t!=null&&al(e,"checked",t,!1)}function Qa(e,t){_d(e,t);var r=Gt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ya(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ya(e,t.type,Gt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function dc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ya(e,t,r){(t!=="number"||oi(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Cn=Array.isArray;function Jr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Gt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Xa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(E(91));return re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(E(92));if(Cn(r)){if(1<r.length)throw Error(E(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Gt(r)}}function jd(e,t){var r=Gt(t.value),n=Gt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function fc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function kd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Za(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?kd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Es,Nd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Es=Es||document.createElement("div"),Es.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Es.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Fn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mp=["Webkit","ms","Moz","O"];Object.keys(Fn).forEach(function(e){Mp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fn[t]=Fn[e]})});function Sd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Fn.hasOwnProperty(e)&&Fn[e]?(""+t).trim():t+"px"}function Ed(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Sd(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Wp=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eo(e,t){if(t){if(Wp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(E(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(E(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(E(61))}if(t.style!=null&&typeof t.style!="object")throw Error(E(62))}}function to(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ro=null;function ul(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var no=null,Qr=null,Yr=null;function pc(e){if(e=vs(e)){if(typeof no!="function")throw Error(E(280));var t=e.stateNode;t&&(t=Wi(t),no(e.stateNode,e.type,t))}}function Cd(e){Qr?Yr?Yr.push(e):Yr=[e]:Qr=e}function Pd(){if(Qr){var e=Qr,t=Yr;if(Yr=Qr=null,pc(e),t)for(e=0;e<t.length;e++)pc(t[e])}}function Ad(e,t){return e(t)}function Td(){}var fa=!1;function Fd(e,t,r){if(fa)return e(t,r);fa=!0;try{return Ad(e,t,r)}finally{fa=!1,(Qr!==null||Yr!==null)&&(Td(),Pd())}}function Hn(e,t){var r=e.stateNode;if(r===null)return null;var n=Wi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(E(231,t,typeof r));return r}var so=!1;if(wt)try{var vn={};Object.defineProperty(vn,"passive",{get:function(){so=!0}}),window.addEventListener("test",vn,vn),window.removeEventListener("test",vn,vn)}catch{so=!1}function Vp(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(h){this.onError(h)}}var Rn=!1,li=null,ci=!1,io=null,qp={onError:function(e){Rn=!0,li=e}};function Hp(e,t,r,n,s,i,o,l,c){Rn=!1,li=null,Vp.apply(qp,arguments)}function Kp(e,t,r,n,s,i,o,l,c){if(Hp.apply(this,arguments),Rn){if(Rn){var u=li;Rn=!1,li=null}else throw Error(E(198));ci||(ci=!0,io=u)}}function br(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Rd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function mc(e){if(br(e)!==e)throw Error(E(188))}function Gp(e){var t=e.alternate;if(!t){if(t=br(e),t===null)throw Error(E(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return mc(s),e;if(i===n)return mc(s),t;i=i.sibling}throw Error(E(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(E(189))}}if(r.alternate!==n)throw Error(E(190))}if(r.tag!==3)throw Error(E(188));return r.stateNode.current===r?e:t}function Od(e){return e=Gp(e),e!==null?Id(e):null}function Id(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Id(e);if(t!==null)return t;e=e.sibling}return null}var Dd=We.unstable_scheduleCallback,gc=We.unstable_cancelCallback,Jp=We.unstable_shouldYield,Qp=We.unstable_requestPaint,oe=We.unstable_now,Yp=We.unstable_getCurrentPriorityLevel,dl=We.unstable_ImmediatePriority,$d=We.unstable_UserBlockingPriority,ui=We.unstable_NormalPriority,Xp=We.unstable_LowPriority,Ld=We.unstable_IdlePriority,Ui=null,dt=null;function Zp(e){if(dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(Ui,e,void 0,(e.current.flags&128)===128)}catch{}}var st=Math.clz32?Math.clz32:rm,em=Math.log,tm=Math.LN2;function rm(e){return e>>>=0,e===0?32:31-(em(e)/tm|0)|0}var Cs=64,Ps=4194304;function Pn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function di(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Pn(l):(i&=o,i!==0&&(n=Pn(i)))}else o=r&~s,o!==0?n=Pn(o):i!==0&&(n=Pn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-st(t),s=1<<r,n|=e[r],t&=~s;return n}function nm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sm(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-st(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=nm(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function ao(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ud(){var e=Cs;return Cs<<=1,!(Cs&4194240)&&(Cs=64),e}function pa(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-st(t),e[t]=r}function im(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-st(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function hl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-st(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var q=0;function zd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bd,fl,Md,Wd,Vd,oo=!1,As=[],Lt=null,Ut=null,zt=null,Kn=new Map,Gn=new Map,Ft=[],am="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yc(e,t){switch(e){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":Ut=null;break;case"mouseover":case"mouseout":zt=null;break;case"pointerover":case"pointerout":Kn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gn.delete(t.pointerId)}}function xn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=vs(t),t!==null&&fl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function om(e,t,r,n,s){switch(t){case"focusin":return Lt=xn(Lt,e,t,r,n,s),!0;case"dragenter":return Ut=xn(Ut,e,t,r,n,s),!0;case"mouseover":return zt=xn(zt,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Kn.set(i,xn(Kn.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Gn.set(i,xn(Gn.get(i)||null,e,t,r,n,s)),!0}return!1}function qd(e){var t=cr(e.target);if(t!==null){var r=br(t);if(r!==null){if(t=r.tag,t===13){if(t=Rd(r),t!==null){e.blockedOn=t,Vd(e.priority,function(){Md(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=lo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);ro=n,r.target.dispatchEvent(n),ro=null}else return t=vs(r),t!==null&&fl(t),e.blockedOn=r,!1;t.shift()}return!0}function vc(e,t,r){Qs(e)&&r.delete(t)}function lm(){oo=!1,Lt!==null&&Qs(Lt)&&(Lt=null),Ut!==null&&Qs(Ut)&&(Ut=null),zt!==null&&Qs(zt)&&(zt=null),Kn.forEach(vc),Gn.forEach(vc)}function wn(e,t){e.blockedOn===t&&(e.blockedOn=null,oo||(oo=!0,We.unstable_scheduleCallback(We.unstable_NormalPriority,lm)))}function Jn(e){function t(s){return wn(s,e)}if(0<As.length){wn(As[0],e);for(var r=1;r<As.length;r++){var n=As[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Lt!==null&&wn(Lt,e),Ut!==null&&wn(Ut,e),zt!==null&&wn(zt,e),Kn.forEach(t),Gn.forEach(t),r=0;r<Ft.length;r++)n=Ft[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ft.length&&(r=Ft[0],r.blockedOn===null);)qd(r),r.blockedOn===null&&Ft.shift()}var Xr=kt.ReactCurrentBatchConfig,hi=!0;function cm(e,t,r,n){var s=q,i=Xr.transition;Xr.transition=null;try{q=1,pl(e,t,r,n)}finally{q=s,Xr.transition=i}}function um(e,t,r,n){var s=q,i=Xr.transition;Xr.transition=null;try{q=4,pl(e,t,r,n)}finally{q=s,Xr.transition=i}}function pl(e,t,r,n){if(hi){var s=lo(e,t,r,n);if(s===null)ka(e,t,n,fi,r),yc(e,n);else if(om(s,e,t,r,n))n.stopPropagation();else if(yc(e,n),t&4&&-1<am.indexOf(e)){for(;s!==null;){var i=vs(s);if(i!==null&&Bd(i),i=lo(e,t,r,n),i===null&&ka(e,t,n,fi,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else ka(e,t,n,null,r)}}var fi=null;function lo(e,t,r,n){if(fi=null,e=ul(n),e=cr(e),e!==null)if(t=br(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Rd(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fi=e,null}function Hd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yp()){case dl:return 1;case $d:return 4;case ui:case Xp:return 16;case Ld:return 536870912;default:return 16}default:return 16}}var It=null,ml=null,Ys=null;function Kd(){if(Ys)return Ys;var e,t=ml,r=t.length,n,s="value"in It?It.value:It.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Ys=s.slice(e,1<n?1-n:void 0)}function Xs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ts(){return!0}function xc(){return!1}function qe(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ts:xc,this.isPropagationStopped=xc,this}return re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),t}var fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gl=qe(fn),ys=re({},fn,{view:0,detail:0}),dm=qe(ys),ma,ga,bn,zi=re({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bn&&(bn&&e.type==="mousemove"?(ma=e.screenX-bn.screenX,ga=e.screenY-bn.screenY):ga=ma=0,bn=e),ma)},movementY:function(e){return"movementY"in e?e.movementY:ga}}),wc=qe(zi),hm=re({},zi,{dataTransfer:0}),fm=qe(hm),pm=re({},ys,{relatedTarget:0}),ya=qe(pm),mm=re({},fn,{animationName:0,elapsedTime:0,pseudoElement:0}),gm=qe(mm),ym=re({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vm=qe(ym),xm=re({},fn,{data:0}),bc=qe(xm),wm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_m={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_m[e])?!!t[e]:!1}function yl(){return jm}var km=re({},ys,{key:function(e){if(e.key){var t=wm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yl,charCode:function(e){return e.type==="keypress"?Xs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nm=qe(km),Sm=re({},zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_c=qe(Sm),Em=re({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yl}),Cm=qe(Em),Pm=re({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Am=qe(Pm),Tm=re({},zi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fm=qe(Tm),Rm=[9,13,27,32],vl=wt&&"CompositionEvent"in window,On=null;wt&&"documentMode"in document&&(On=document.documentMode);var Om=wt&&"TextEvent"in window&&!On,Gd=wt&&(!vl||On&&8<On&&11>=On),jc=" ",kc=!1;function Jd(e,t){switch(e){case"keyup":return Rm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lr=!1;function Im(e,t){switch(e){case"compositionend":return Qd(t);case"keypress":return t.which!==32?null:(kc=!0,jc);case"textInput":return e=t.data,e===jc&&kc?null:e;default:return null}}function Dm(e,t){if(Lr)return e==="compositionend"||!vl&&Jd(e,t)?(e=Kd(),Ys=ml=It=null,Lr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gd&&t.locale!=="ko"?null:t.data;default:return null}}var $m={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$m[e.type]:t==="textarea"}function Yd(e,t,r,n){Cd(n),t=pi(t,"onChange"),0<t.length&&(r=new gl("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var In=null,Qn=null;function Lm(e){lh(e,0)}function Bi(e){var t=Br(e);if(bd(t))return e}function Um(e,t){if(e==="change")return t}var Xd=!1;if(wt){var va;if(wt){var xa="oninput"in document;if(!xa){var Sc=document.createElement("div");Sc.setAttribute("oninput","return;"),xa=typeof Sc.oninput=="function"}va=xa}else va=!1;Xd=va&&(!document.documentMode||9<document.documentMode)}function Ec(){In&&(In.detachEvent("onpropertychange",Zd),Qn=In=null)}function Zd(e){if(e.propertyName==="value"&&Bi(Qn)){var t=[];Yd(t,Qn,e,ul(e)),Fd(Lm,t)}}function zm(e,t,r){e==="focusin"?(Ec(),In=t,Qn=r,In.attachEvent("onpropertychange",Zd)):e==="focusout"&&Ec()}function Bm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bi(Qn)}function Mm(e,t){if(e==="click")return Bi(t)}function Wm(e,t){if(e==="input"||e==="change")return Bi(t)}function Vm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var at=typeof Object.is=="function"?Object.is:Vm;function Yn(e,t){if(at(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Va.call(t,s)||!at(e[s],t[s]))return!1}return!0}function Cc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pc(e,t){var r=Cc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Cc(r)}}function eh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?eh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function th(){for(var e=window,t=oi();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=oi(e.document)}return t}function xl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qm(e){var t=th(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&eh(r.ownerDocument.documentElement,r)){if(n!==null&&xl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Pc(r,i);var o=Pc(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Hm=wt&&"documentMode"in document&&11>=document.documentMode,Ur=null,co=null,Dn=null,uo=!1;function Ac(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;uo||Ur==null||Ur!==oi(n)||(n=Ur,"selectionStart"in n&&xl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Dn&&Yn(Dn,n)||(Dn=n,n=pi(co,"onSelect"),0<n.length&&(t=new gl("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ur)))}function Fs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var zr={animationend:Fs("Animation","AnimationEnd"),animationiteration:Fs("Animation","AnimationIteration"),animationstart:Fs("Animation","AnimationStart"),transitionend:Fs("Transition","TransitionEnd")},wa={},rh={};wt&&(rh=document.createElement("div").style,"AnimationEvent"in window||(delete zr.animationend.animation,delete zr.animationiteration.animation,delete zr.animationstart.animation),"TransitionEvent"in window||delete zr.transitionend.transition);function Mi(e){if(wa[e])return wa[e];if(!zr[e])return e;var t=zr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in rh)return wa[e]=t[r];return e}var nh=Mi("animationend"),sh=Mi("animationiteration"),ih=Mi("animationstart"),ah=Mi("transitionend"),oh=new Map,Tc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yt(e,t){oh.set(e,t),wr(t,[e])}for(var ba=0;ba<Tc.length;ba++){var _a=Tc[ba],Km=_a.toLowerCase(),Gm=_a[0].toUpperCase()+_a.slice(1);Yt(Km,"on"+Gm)}Yt(nh,"onAnimationEnd");Yt(sh,"onAnimationIteration");Yt(ih,"onAnimationStart");Yt("dblclick","onDoubleClick");Yt("focusin","onFocus");Yt("focusout","onBlur");Yt(ah,"onTransitionEnd");rn("onMouseEnter",["mouseout","mouseover"]);rn("onMouseLeave",["mouseout","mouseover"]);rn("onPointerEnter",["pointerout","pointerover"]);rn("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var An="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jm=new Set("cancel close invalid load scroll toggle".split(" ").concat(An));function Fc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Kp(n,t,void 0,e),e.currentTarget=null}function lh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Fc(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Fc(s,l,u),i=c}}}if(ci)throw e=io,ci=!1,io=null,e}function G(e,t){var r=t[go];r===void 0&&(r=t[go]=new Set);var n=e+"__bubble";r.has(n)||(ch(t,e,2,!1),r.add(n))}function ja(e,t,r){var n=0;t&&(n|=4),ch(r,e,n,t)}var Rs="_reactListening"+Math.random().toString(36).slice(2);function Xn(e){if(!e[Rs]){e[Rs]=!0,gd.forEach(function(r){r!=="selectionchange"&&(Jm.has(r)||ja(r,!1,e),ja(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rs]||(t[Rs]=!0,ja("selectionchange",!1,t))}}function ch(e,t,r,n){switch(Hd(t)){case 1:var s=cm;break;case 4:s=um;break;default:s=pl}r=s.bind(null,t,r,e),s=void 0,!so||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function ka(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=cr(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Fd(function(){var u=i,h=ul(r),f=[];e:{var p=oh.get(e);if(p!==void 0){var y=gl,x=e;switch(e){case"keypress":if(Xs(r)===0)break e;case"keydown":case"keyup":y=Nm;break;case"focusin":x="focus",y=ya;break;case"focusout":x="blur",y=ya;break;case"beforeblur":case"afterblur":y=ya;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=fm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Cm;break;case nh:case sh:case ih:y=gm;break;case ah:y=Am;break;case"scroll":y=dm;break;case"wheel":y=Fm;break;case"copy":case"cut":case"paste":y=vm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=_c}var v=(t&4)!==0,w=!v&&e==="scroll",m=v?p!==null?p+"Capture":null:p;v=[];for(var d=u,g;d!==null;){g=d;var b=g.stateNode;if(g.tag===5&&b!==null&&(g=b,m!==null&&(b=Hn(d,m),b!=null&&v.push(Zn(d,b,g)))),w)break;d=d.return}0<v.length&&(p=new y(p,x,null,r,h),f.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",p&&r!==ro&&(x=r.relatedTarget||r.fromElement)&&(cr(x)||x[bt]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(x=r.relatedTarget||r.toElement,y=u,x=x?cr(x):null,x!==null&&(w=br(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=u),y!==x)){if(v=wc,b="onMouseLeave",m="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(v=_c,b="onPointerLeave",m="onPointerEnter",d="pointer"),w=y==null?p:Br(y),g=x==null?p:Br(x),p=new v(b,d+"leave",y,r,h),p.target=w,p.relatedTarget=g,b=null,cr(h)===u&&(v=new v(m,d+"enter",x,r,h),v.target=g,v.relatedTarget=w,b=v),w=b,y&&x)t:{for(v=y,m=x,d=0,g=v;g;g=Sr(g))d++;for(g=0,b=m;b;b=Sr(b))g++;for(;0<d-g;)v=Sr(v),d--;for(;0<g-d;)m=Sr(m),g--;for(;d--;){if(v===m||m!==null&&v===m.alternate)break t;v=Sr(v),m=Sr(m)}v=null}else v=null;y!==null&&Rc(f,p,y,v,!1),x!==null&&w!==null&&Rc(f,w,x,v,!0)}}e:{if(p=u?Br(u):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var N=Um;else if(Nc(p))if(Xd)N=Wm;else{N=Bm;var k=zm}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=Mm);if(N&&(N=N(e,u))){Yd(f,N,r,h);break e}k&&k(e,p,u),e==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&Ya(p,"number",p.value)}switch(k=u?Br(u):window,e){case"focusin":(Nc(k)||k.contentEditable==="true")&&(Ur=k,co=u,Dn=null);break;case"focusout":Dn=co=Ur=null;break;case"mousedown":uo=!0;break;case"contextmenu":case"mouseup":case"dragend":uo=!1,Ac(f,r,h);break;case"selectionchange":if(Hm)break;case"keydown":case"keyup":Ac(f,r,h)}var j;if(vl)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Lr?Jd(e,r)&&(S="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(Gd&&r.locale!=="ko"&&(Lr||S!=="onCompositionStart"?S==="onCompositionEnd"&&Lr&&(j=Kd()):(It=h,ml="value"in It?It.value:It.textContent,Lr=!0)),k=pi(u,S),0<k.length&&(S=new bc(S,e,null,r,h),f.push({event:S,listeners:k}),j?S.data=j:(j=Qd(r),j!==null&&(S.data=j)))),(j=Om?Im(e,r):Dm(e,r))&&(u=pi(u,"onBeforeInput"),0<u.length&&(h=new bc("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:u}),h.data=j))}lh(f,t)})}function Zn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function pi(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Hn(e,r),i!=null&&n.unshift(Zn(e,i,s)),i=Hn(e,t),i!=null&&n.push(Zn(e,i,s))),e=e.return}return n}function Sr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Rc(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Hn(r,i),c!=null&&o.unshift(Zn(r,c,l))):s||(c=Hn(r,i),c!=null&&o.push(Zn(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Qm=/\r\n?/g,Ym=/\u0000|\uFFFD/g;function Oc(e){return(typeof e=="string"?e:""+e).replace(Qm,`
`).replace(Ym,"")}function Os(e,t,r){if(t=Oc(t),Oc(e)!==t&&r)throw Error(E(425))}function mi(){}var ho=null,fo=null;function po(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mo=typeof setTimeout=="function"?setTimeout:void 0,Xm=typeof clearTimeout=="function"?clearTimeout:void 0,Ic=typeof Promise=="function"?Promise:void 0,Zm=typeof queueMicrotask=="function"?queueMicrotask:typeof Ic<"u"?function(e){return Ic.resolve(null).then(e).catch(eg)}:mo;function eg(e){setTimeout(function(){throw e})}function Na(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Jn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Jn(t)}function Bt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var pn=Math.random().toString(36).slice(2),ut="__reactFiber$"+pn,es="__reactProps$"+pn,bt="__reactContainer$"+pn,go="__reactEvents$"+pn,tg="__reactListeners$"+pn,rg="__reactHandles$"+pn;function cr(e){var t=e[ut];if(t)return t;for(var r=e.parentNode;r;){if(t=r[bt]||r[ut]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Dc(e);e!==null;){if(r=e[ut])return r;e=Dc(e)}return t}e=r,r=e.parentNode}return null}function vs(e){return e=e[ut]||e[bt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Br(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(E(33))}function Wi(e){return e[es]||null}var yo=[],Mr=-1;function Xt(e){return{current:e}}function J(e){0>Mr||(e.current=yo[Mr],yo[Mr]=null,Mr--)}function K(e,t){Mr++,yo[Mr]=e.current,e.current=t}var Jt={},Ee=Xt(Jt),De=Xt(!1),mr=Jt;function nn(e,t){var r=e.type.contextTypes;if(!r)return Jt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function $e(e){return e=e.childContextTypes,e!=null}function gi(){J(De),J(Ee)}function $c(e,t,r){if(Ee.current!==Jt)throw Error(E(168));K(Ee,t),K(De,r)}function uh(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(E(108,zp(e)||"Unknown",s));return re({},r,n)}function yi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jt,mr=Ee.current,K(Ee,e),K(De,De.current),!0}function Lc(e,t,r){var n=e.stateNode;if(!n)throw Error(E(169));r?(e=uh(e,t,mr),n.__reactInternalMemoizedMergedChildContext=e,J(De),J(Ee),K(Ee,e)):J(De),K(De,r)}var gt=null,Vi=!1,Sa=!1;function dh(e){gt===null?gt=[e]:gt.push(e)}function ng(e){Vi=!0,dh(e)}function Zt(){if(!Sa&&gt!==null){Sa=!0;var e=0,t=q;try{var r=gt;for(q=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}gt=null,Vi=!1}catch(s){throw gt!==null&&(gt=gt.slice(e+1)),Dd(dl,Zt),s}finally{q=t,Sa=!1}}return null}var Wr=[],Vr=0,vi=null,xi=0,He=[],Ke=0,gr=null,yt=1,vt="";function sr(e,t){Wr[Vr++]=xi,Wr[Vr++]=vi,vi=e,xi=t}function hh(e,t,r){He[Ke++]=yt,He[Ke++]=vt,He[Ke++]=gr,gr=e;var n=yt;e=vt;var s=32-st(n)-1;n&=~(1<<s),r+=1;var i=32-st(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,yt=1<<32-st(t)+s|r<<s|n,vt=i+e}else yt=1<<i|r<<s|n,vt=e}function wl(e){e.return!==null&&(sr(e,1),hh(e,1,0))}function bl(e){for(;e===vi;)vi=Wr[--Vr],Wr[Vr]=null,xi=Wr[--Vr],Wr[Vr]=null;for(;e===gr;)gr=He[--Ke],He[Ke]=null,vt=He[--Ke],He[Ke]=null,yt=He[--Ke],He[Ke]=null}var Me=null,Be=null,X=!1,nt=null;function fh(e,t){var r=Ge(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Uc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Me=e,Be=Bt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Me=e,Be=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=gr!==null?{id:yt,overflow:vt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ge(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Me=e,Be=null,!0):!1;default:return!1}}function vo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xo(e){if(X){var t=Be;if(t){var r=t;if(!Uc(e,t)){if(vo(e))throw Error(E(418));t=Bt(r.nextSibling);var n=Me;t&&Uc(e,t)?fh(n,r):(e.flags=e.flags&-4097|2,X=!1,Me=e)}}else{if(vo(e))throw Error(E(418));e.flags=e.flags&-4097|2,X=!1,Me=e}}}function zc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Me=e}function Is(e){if(e!==Me)return!1;if(!X)return zc(e),X=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!po(e.type,e.memoizedProps)),t&&(t=Be)){if(vo(e))throw ph(),Error(E(418));for(;t;)fh(e,t),t=Bt(t.nextSibling)}if(zc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Be=Bt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Be=null}}else Be=Me?Bt(e.stateNode.nextSibling):null;return!0}function ph(){for(var e=Be;e;)e=Bt(e.nextSibling)}function sn(){Be=Me=null,X=!1}function _l(e){nt===null?nt=[e]:nt.push(e)}var sg=kt.ReactCurrentBatchConfig;function _n(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(E(309));var n=r.stateNode}if(!n)throw Error(E(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(E(284));if(!r._owner)throw Error(E(290,e))}return e}function Ds(e,t){throw e=Object.prototype.toString.call(t),Error(E(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bc(e){var t=e._init;return t(e._payload)}function mh(e){function t(m,d){if(e){var g=m.deletions;g===null?(m.deletions=[d],m.flags|=16):g.push(d)}}function r(m,d){if(!e)return null;for(;d!==null;)t(m,d),d=d.sibling;return null}function n(m,d){for(m=new Map;d!==null;)d.key!==null?m.set(d.key,d):m.set(d.index,d),d=d.sibling;return m}function s(m,d){return m=qt(m,d),m.index=0,m.sibling=null,m}function i(m,d,g){return m.index=g,e?(g=m.alternate,g!==null?(g=g.index,g<d?(m.flags|=2,d):g):(m.flags|=2,d)):(m.flags|=1048576,d)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,d,g,b){return d===null||d.tag!==6?(d=Ra(g,m.mode,b),d.return=m,d):(d=s(d,g),d.return=m,d)}function c(m,d,g,b){var N=g.type;return N===$r?h(m,d,g.props.children,b,g.key):d!==null&&(d.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Pt&&Bc(N)===d.type)?(b=s(d,g.props),b.ref=_n(m,d,g),b.return=m,b):(b=ii(g.type,g.key,g.props,null,m.mode,b),b.ref=_n(m,d,g),b.return=m,b)}function u(m,d,g,b){return d===null||d.tag!==4||d.stateNode.containerInfo!==g.containerInfo||d.stateNode.implementation!==g.implementation?(d=Oa(g,m.mode,b),d.return=m,d):(d=s(d,g.children||[]),d.return=m,d)}function h(m,d,g,b,N){return d===null||d.tag!==7?(d=pr(g,m.mode,b,N),d.return=m,d):(d=s(d,g),d.return=m,d)}function f(m,d,g){if(typeof d=="string"&&d!==""||typeof d=="number")return d=Ra(""+d,m.mode,g),d.return=m,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Ns:return g=ii(d.type,d.key,d.props,null,m.mode,g),g.ref=_n(m,null,d),g.return=m,g;case Dr:return d=Oa(d,m.mode,g),d.return=m,d;case Pt:var b=d._init;return f(m,b(d._payload),g)}if(Cn(d)||yn(d))return d=pr(d,m.mode,g,null),d.return=m,d;Ds(m,d)}return null}function p(m,d,g,b){var N=d!==null?d.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return N!==null?null:l(m,d,""+g,b);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ns:return g.key===N?c(m,d,g,b):null;case Dr:return g.key===N?u(m,d,g,b):null;case Pt:return N=g._init,p(m,d,N(g._payload),b)}if(Cn(g)||yn(g))return N!==null?null:h(m,d,g,b,null);Ds(m,g)}return null}function y(m,d,g,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(g)||null,l(d,m,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ns:return m=m.get(b.key===null?g:b.key)||null,c(d,m,b,N);case Dr:return m=m.get(b.key===null?g:b.key)||null,u(d,m,b,N);case Pt:var k=b._init;return y(m,d,g,k(b._payload),N)}if(Cn(b)||yn(b))return m=m.get(g)||null,h(d,m,b,N,null);Ds(d,b)}return null}function x(m,d,g,b){for(var N=null,k=null,j=d,S=d=0,F=null;j!==null&&S<g.length;S++){j.index>S?(F=j,j=null):F=j.sibling;var C=p(m,j,g[S],b);if(C===null){j===null&&(j=F);break}e&&j&&C.alternate===null&&t(m,j),d=i(C,d,S),k===null?N=C:k.sibling=C,k=C,j=F}if(S===g.length)return r(m,j),X&&sr(m,S),N;if(j===null){for(;S<g.length;S++)j=f(m,g[S],b),j!==null&&(d=i(j,d,S),k===null?N=j:k.sibling=j,k=j);return X&&sr(m,S),N}for(j=n(m,j);S<g.length;S++)F=y(j,m,S,g[S],b),F!==null&&(e&&F.alternate!==null&&j.delete(F.key===null?S:F.key),d=i(F,d,S),k===null?N=F:k.sibling=F,k=F);return e&&j.forEach(function(I){return t(m,I)}),X&&sr(m,S),N}function v(m,d,g,b){var N=yn(g);if(typeof N!="function")throw Error(E(150));if(g=N.call(g),g==null)throw Error(E(151));for(var k=N=null,j=d,S=d=0,F=null,C=g.next();j!==null&&!C.done;S++,C=g.next()){j.index>S?(F=j,j=null):F=j.sibling;var I=p(m,j,C.value,b);if(I===null){j===null&&(j=F);break}e&&j&&I.alternate===null&&t(m,j),d=i(I,d,S),k===null?N=I:k.sibling=I,k=I,j=F}if(C.done)return r(m,j),X&&sr(m,S),N;if(j===null){for(;!C.done;S++,C=g.next())C=f(m,C.value,b),C!==null&&(d=i(C,d,S),k===null?N=C:k.sibling=C,k=C);return X&&sr(m,S),N}for(j=n(m,j);!C.done;S++,C=g.next())C=y(j,m,S,C.value,b),C!==null&&(e&&C.alternate!==null&&j.delete(C.key===null?S:C.key),d=i(C,d,S),k===null?N=C:k.sibling=C,k=C);return e&&j.forEach(function(V){return t(m,V)}),X&&sr(m,S),N}function w(m,d,g,b){if(typeof g=="object"&&g!==null&&g.type===$r&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Ns:e:{for(var N=g.key,k=d;k!==null;){if(k.key===N){if(N=g.type,N===$r){if(k.tag===7){r(m,k.sibling),d=s(k,g.props.children),d.return=m,m=d;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Pt&&Bc(N)===k.type){r(m,k.sibling),d=s(k,g.props),d.ref=_n(m,k,g),d.return=m,m=d;break e}r(m,k);break}else t(m,k);k=k.sibling}g.type===$r?(d=pr(g.props.children,m.mode,b,g.key),d.return=m,m=d):(b=ii(g.type,g.key,g.props,null,m.mode,b),b.ref=_n(m,d,g),b.return=m,m=b)}return o(m);case Dr:e:{for(k=g.key;d!==null;){if(d.key===k)if(d.tag===4&&d.stateNode.containerInfo===g.containerInfo&&d.stateNode.implementation===g.implementation){r(m,d.sibling),d=s(d,g.children||[]),d.return=m,m=d;break e}else{r(m,d);break}else t(m,d);d=d.sibling}d=Oa(g,m.mode,b),d.return=m,m=d}return o(m);case Pt:return k=g._init,w(m,d,k(g._payload),b)}if(Cn(g))return x(m,d,g,b);if(yn(g))return v(m,d,g,b);Ds(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,d!==null&&d.tag===6?(r(m,d.sibling),d=s(d,g),d.return=m,m=d):(r(m,d),d=Ra(g,m.mode,b),d.return=m,m=d),o(m)):r(m,d)}return w}var an=mh(!0),gh=mh(!1),wi=Xt(null),bi=null,qr=null,jl=null;function kl(){jl=qr=bi=null}function Nl(e){var t=wi.current;J(wi),e._currentValue=t}function wo(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Zr(e,t){bi=e,jl=qr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ie=!0),e.firstContext=null)}function Qe(e){var t=e._currentValue;if(jl!==e)if(e={context:e,memoizedValue:t,next:null},qr===null){if(bi===null)throw Error(E(308));qr=e,bi.dependencies={lanes:0,firstContext:e}}else qr=qr.next=e;return t}var ur=null;function Sl(e){ur===null?ur=[e]:ur.push(e)}function yh(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Sl(t)):(r.next=s.next,s.next=r),t.interleaved=r,_t(e,n)}function _t(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var At=!1;function El(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,M&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,_t(e,r)}return s=n.interleaved,s===null?(t.next=t,Sl(n)):(t.next=s.next,s.next=t),n.interleaved=t,_t(e,r)}function Zs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,hl(e,r)}}function Mc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function _i(e,t,r,n){var s=e.updateQueue;At=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var p=l.lane,y=l.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,v=l;switch(p=t,y=r,v.tag){case 1:if(x=v.payload,typeof x=="function"){f=x.call(y,f,p);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,p=typeof x=="function"?x.call(y,f,p):x,p==null)break e;f=re({},f,p);break e;case 2:At=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else y={eventTime:y,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=y,c=f):h=h.next=y,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);vr|=o,e.lanes=o,e.memoizedState=f}}function Wc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(E(191,s));s.call(n)}}}var xs={},ht=Xt(xs),ts=Xt(xs),rs=Xt(xs);function dr(e){if(e===xs)throw Error(E(174));return e}function Cl(e,t){switch(K(rs,t),K(ts,e),K(ht,xs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Za(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Za(t,e)}J(ht),K(ht,t)}function on(){J(ht),J(ts),J(rs)}function xh(e){dr(rs.current);var t=dr(ht.current),r=Za(t,e.type);t!==r&&(K(ts,e),K(ht,r))}function Pl(e){ts.current===e&&(J(ht),J(ts))}var ee=Xt(0);function ji(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ea=[];function Al(){for(var e=0;e<Ea.length;e++)Ea[e]._workInProgressVersionPrimary=null;Ea.length=0}var ei=kt.ReactCurrentDispatcher,Ca=kt.ReactCurrentBatchConfig,yr=0,te=null,fe=null,ge=null,ki=!1,$n=!1,ns=0,ig=0;function ke(){throw Error(E(321))}function Tl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!at(e[r],t[r]))return!1;return!0}function Fl(e,t,r,n,s,i){if(yr=i,te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ei.current=e===null||e.memoizedState===null?cg:ug,e=r(n,s),$n){i=0;do{if($n=!1,ns=0,25<=i)throw Error(E(301));i+=1,ge=fe=null,t.updateQueue=null,ei.current=dg,e=r(n,s)}while($n)}if(ei.current=Ni,t=fe!==null&&fe.next!==null,yr=0,ge=fe=te=null,ki=!1,t)throw Error(E(300));return e}function Rl(){var e=ns!==0;return ns=0,e}function ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?te.memoizedState=ge=e:ge=ge.next=e,ge}function Ye(){if(fe===null){var e=te.alternate;e=e!==null?e.memoizedState:null}else e=fe.next;var t=ge===null?te.memoizedState:ge.next;if(t!==null)ge=t,fe=e;else{if(e===null)throw Error(E(310));fe=e,e={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},ge===null?te.memoizedState=ge=e:ge=ge.next=e}return ge}function ss(e,t){return typeof t=="function"?t(e):t}function Pa(e){var t=Ye(),r=t.queue;if(r===null)throw Error(E(311));r.lastRenderedReducer=e;var n=fe,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((yr&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,te.lanes|=h,vr|=h}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,at(n,t.memoizedState)||(Ie=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,te.lanes|=i,vr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Aa(e){var t=Ye(),r=t.queue;if(r===null)throw Error(E(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);at(i,t.memoizedState)||(Ie=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function wh(){}function bh(e,t){var r=te,n=Ye(),s=t(),i=!at(n.memoizedState,s);if(i&&(n.memoizedState=s,Ie=!0),n=n.queue,Ol(kh.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||ge!==null&&ge.memoizedState.tag&1){if(r.flags|=2048,is(9,jh.bind(null,r,n,s,t),void 0,null),ye===null)throw Error(E(349));yr&30||_h(r,t,s)}return s}function _h(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function jh(e,t,r,n){t.value=r,t.getSnapshot=n,Nh(t)&&Sh(e)}function kh(e,t,r){return r(function(){Nh(t)&&Sh(e)})}function Nh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!at(e,r)}catch{return!0}}function Sh(e){var t=_t(e,1);t!==null&&it(t,e,1,-1)}function Vc(e){var t=ct();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:e},t.queue=e,e=e.dispatch=lg.bind(null,te,e),[t.memoizedState,e]}function is(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Eh(){return Ye().memoizedState}function ti(e,t,r,n){var s=ct();te.flags|=e,s.memoizedState=is(1|t,r,void 0,n===void 0?null:n)}function qi(e,t,r,n){var s=Ye();n=n===void 0?null:n;var i=void 0;if(fe!==null){var o=fe.memoizedState;if(i=o.destroy,n!==null&&Tl(n,o.deps)){s.memoizedState=is(t,r,i,n);return}}te.flags|=e,s.memoizedState=is(1|t,r,i,n)}function qc(e,t){return ti(8390656,8,e,t)}function Ol(e,t){return qi(2048,8,e,t)}function Ch(e,t){return qi(4,2,e,t)}function Ph(e,t){return qi(4,4,e,t)}function Ah(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Th(e,t,r){return r=r!=null?r.concat([e]):null,qi(4,4,Ah.bind(null,t,e),r)}function Il(){}function Fh(e,t){var r=Ye();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Tl(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Rh(e,t){var r=Ye();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Tl(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Oh(e,t,r){return yr&21?(at(r,t)||(r=Ud(),te.lanes|=r,vr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ie=!0),e.memoizedState=r)}function ag(e,t){var r=q;q=r!==0&&4>r?r:4,e(!0);var n=Ca.transition;Ca.transition={};try{e(!1),t()}finally{q=r,Ca.transition=n}}function Ih(){return Ye().memoizedState}function og(e,t,r){var n=Vt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Dh(e))$h(t,r);else if(r=yh(e,t,r,n),r!==null){var s=Te();it(r,e,n,s),Lh(r,t,n)}}function lg(e,t,r){var n=Vt(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Dh(e))$h(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,at(l,o)){var c=t.interleaved;c===null?(s.next=s,Sl(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=yh(e,t,s,n),r!==null&&(s=Te(),it(r,e,n,s),Lh(r,t,n))}}function Dh(e){var t=e.alternate;return e===te||t!==null&&t===te}function $h(e,t){$n=ki=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Lh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,hl(e,r)}}var Ni={readContext:Qe,useCallback:ke,useContext:ke,useEffect:ke,useImperativeHandle:ke,useInsertionEffect:ke,useLayoutEffect:ke,useMemo:ke,useReducer:ke,useRef:ke,useState:ke,useDebugValue:ke,useDeferredValue:ke,useTransition:ke,useMutableSource:ke,useSyncExternalStore:ke,useId:ke,unstable_isNewReconciler:!1},cg={readContext:Qe,useCallback:function(e,t){return ct().memoizedState=[e,t===void 0?null:t],e},useContext:Qe,useEffect:qc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ti(4194308,4,Ah.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ti(4194308,4,e,t)},useInsertionEffect:function(e,t){return ti(4,2,e,t)},useMemo:function(e,t){var r=ct();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ct();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=og.bind(null,te,e),[n.memoizedState,e]},useRef:function(e){var t=ct();return e={current:e},t.memoizedState=e},useState:Vc,useDebugValue:Il,useDeferredValue:function(e){return ct().memoizedState=e},useTransition:function(){var e=Vc(!1),t=e[0];return e=ag.bind(null,e[1]),ct().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=te,s=ct();if(X){if(r===void 0)throw Error(E(407));r=r()}else{if(r=t(),ye===null)throw Error(E(349));yr&30||_h(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,qc(kh.bind(null,n,i,e),[e]),n.flags|=2048,is(9,jh.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ct(),t=ye.identifierPrefix;if(X){var r=vt,n=yt;r=(n&~(1<<32-st(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ns++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ig++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ug={readContext:Qe,useCallback:Fh,useContext:Qe,useEffect:Ol,useImperativeHandle:Th,useInsertionEffect:Ch,useLayoutEffect:Ph,useMemo:Rh,useReducer:Pa,useRef:Eh,useState:function(){return Pa(ss)},useDebugValue:Il,useDeferredValue:function(e){var t=Ye();return Oh(t,fe.memoizedState,e)},useTransition:function(){var e=Pa(ss)[0],t=Ye().memoizedState;return[e,t]},useMutableSource:wh,useSyncExternalStore:bh,useId:Ih,unstable_isNewReconciler:!1},dg={readContext:Qe,useCallback:Fh,useContext:Qe,useEffect:Ol,useImperativeHandle:Th,useInsertionEffect:Ch,useLayoutEffect:Ph,useMemo:Rh,useReducer:Aa,useRef:Eh,useState:function(){return Aa(ss)},useDebugValue:Il,useDeferredValue:function(e){var t=Ye();return fe===null?t.memoizedState=e:Oh(t,fe.memoizedState,e)},useTransition:function(){var e=Aa(ss)[0],t=Ye().memoizedState;return[e,t]},useMutableSource:wh,useSyncExternalStore:bh,useId:Ih,unstable_isNewReconciler:!1};function et(e,t){if(e&&e.defaultProps){t=re({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function bo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:re({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Hi={isMounted:function(e){return(e=e._reactInternals)?br(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Te(),s=Vt(e),i=xt(n,s);i.payload=t,r!=null&&(i.callback=r),t=Mt(e,i,s),t!==null&&(it(t,e,s,n),Zs(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Te(),s=Vt(e),i=xt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Mt(e,i,s),t!==null&&(it(t,e,s,n),Zs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Te(),n=Vt(e),s=xt(r,n);s.tag=2,t!=null&&(s.callback=t),t=Mt(e,s,n),t!==null&&(it(t,e,n,r),Zs(t,e,n))}};function Hc(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Yn(r,n)||!Yn(s,i):!0}function Uh(e,t,r){var n=!1,s=Jt,i=t.contextType;return typeof i=="object"&&i!==null?i=Qe(i):(s=$e(t)?mr:Ee.current,n=t.contextTypes,i=(n=n!=null)?nn(e,s):Jt),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hi,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Kc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Hi.enqueueReplaceState(t,t.state,null)}function _o(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},El(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Qe(i):(i=$e(t)?mr:Ee.current,s.context=nn(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(bo(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Hi.enqueueReplaceState(s,s.state,null),_i(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ln(e,t){try{var r="",n=t;do r+=Up(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Ta(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function jo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var hg=typeof WeakMap=="function"?WeakMap:Map;function zh(e,t,r){r=xt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ei||(Ei=!0,Ro=n),jo(e,t)},r}function Bh(e,t,r){r=xt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){jo(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){jo(e,t),typeof n!="function"&&(Wt===null?Wt=new Set([this]):Wt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Gc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new hg;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Sg.bind(null,e,t,r),t.then(e,e))}function Jc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Qc(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=xt(-1,1),t.tag=2,Mt(r,t,1))),r.lanes|=1),e)}var fg=kt.ReactCurrentOwner,Ie=!1;function Ae(e,t,r,n){t.child=e===null?gh(t,null,r,n):an(t,e.child,r,n)}function Yc(e,t,r,n,s){r=r.render;var i=t.ref;return Zr(t,s),n=Fl(e,t,r,n,i,s),r=Rl(),e!==null&&!Ie?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,jt(e,t,s)):(X&&r&&wl(t),t.flags|=1,Ae(e,t,n,s),t.child)}function Xc(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Wl(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Mh(e,t,i,n,s)):(e=ii(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Yn,r(o,n)&&e.ref===t.ref)return jt(e,t,s)}return t.flags|=1,e=qt(i,n),e.ref=t.ref,e.return=t,t.child=e}function Mh(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Yn(i,n)&&e.ref===t.ref)if(Ie=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Ie=!0);else return t.lanes=e.lanes,jt(e,t,s)}return ko(e,t,r,n,s)}function Wh(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},K(Kr,ze),ze|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,K(Kr,ze),ze|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,K(Kr,ze),ze|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,K(Kr,ze),ze|=n;return Ae(e,t,s,r),t.child}function Vh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ko(e,t,r,n,s){var i=$e(r)?mr:Ee.current;return i=nn(t,i),Zr(t,s),r=Fl(e,t,r,n,i,s),n=Rl(),e!==null&&!Ie?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,jt(e,t,s)):(X&&n&&wl(t),t.flags|=1,Ae(e,t,r,s),t.child)}function Zc(e,t,r,n,s){if($e(r)){var i=!0;yi(t)}else i=!1;if(Zr(t,s),t.stateNode===null)ri(e,t),Uh(t,r,n),_o(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Qe(u):(u=$e(r)?mr:Ee.current,u=nn(t,u));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Kc(t,o,n,u),At=!1;var p=t.memoizedState;o.state=p,_i(t,n,o,s),c=t.memoizedState,l!==n||p!==c||De.current||At?(typeof h=="function"&&(bo(t,r,h,n),c=t.memoizedState),(l=At||Hc(t,r,l,n,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,vh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:et(t.type,l),o.props=u,f=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Qe(c):(c=$e(r)?mr:Ee.current,c=nn(t,c));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&Kc(t,o,n,c),At=!1,p=t.memoizedState,o.state=p,_i(t,n,o,s);var x=t.memoizedState;l!==f||p!==x||De.current||At?(typeof y=="function"&&(bo(t,r,y,n),x=t.memoizedState),(u=At||Hc(t,r,u,n,p,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return No(e,t,r,n,i,s)}function No(e,t,r,n,s,i){Vh(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Lc(t,r,!1),jt(e,t,i);n=t.stateNode,fg.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=an(t,e.child,null,i),t.child=an(t,null,l,i)):Ae(e,t,l,i),t.memoizedState=n.state,s&&Lc(t,r,!0),t.child}function qh(e){var t=e.stateNode;t.pendingContext?$c(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$c(e,t.context,!1),Cl(e,t.containerInfo)}function eu(e,t,r,n,s){return sn(),_l(s),t.flags|=256,Ae(e,t,r,n),t.child}var So={dehydrated:null,treeContext:null,retryLane:0};function Eo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Hh(e,t,r){var n=t.pendingProps,s=ee.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),K(ee,s&1),e===null)return xo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ji(o,n,0,null),e=pr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Eo(r),t.memoizedState=So,e):Dl(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return pg(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=qt(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=qt(l,i):(i=pr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Eo(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=So,n}return i=e.child,e=i.sibling,n=qt(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Dl(e,t){return t=Ji({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $s(e,t,r,n){return n!==null&&_l(n),an(t,e.child,null,r),e=Dl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pg(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Ta(Error(E(422))),$s(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Ji({mode:"visible",children:n.children},s,0,null),i=pr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&an(t,e.child,null,o),t.child.memoizedState=Eo(o),t.memoizedState=So,i);if(!(t.mode&1))return $s(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(E(419)),n=Ta(i,n,void 0),$s(e,t,o,n)}if(l=(o&e.childLanes)!==0,Ie||l){if(n=ye,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_t(e,s),it(n,e,s,-1))}return Ml(),n=Ta(Error(E(421))),$s(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Eg.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Be=Bt(s.nextSibling),Me=t,X=!0,nt=null,e!==null&&(He[Ke++]=yt,He[Ke++]=vt,He[Ke++]=gr,yt=e.id,vt=e.overflow,gr=t),t=Dl(t,n.children),t.flags|=4096,t)}function tu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),wo(e.return,t,r)}function Fa(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Kh(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Ae(e,t,n.children,r),n=ee.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tu(e,r,t);else if(e.tag===19)tu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(K(ee,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&ji(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Fa(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ji(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Fa(t,!0,r,null,i);break;case"together":Fa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ri(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(E(153));if(t.child!==null){for(e=t.child,r=qt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=qt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function mg(e,t,r){switch(t.tag){case 3:qh(t),sn();break;case 5:xh(t);break;case 1:$e(t.type)&&yi(t);break;case 4:Cl(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;K(wi,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(K(ee,ee.current&1),t.flags|=128,null):r&t.child.childLanes?Hh(e,t,r):(K(ee,ee.current&1),e=jt(e,t,r),e!==null?e.sibling:null);K(ee,ee.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Kh(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),K(ee,ee.current),n)break;return null;case 22:case 23:return t.lanes=0,Wh(e,t,r)}return jt(e,t,r)}var Gh,Co,Jh,Qh;Gh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Co=function(){};Jh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,dr(ht.current);var i=null;switch(r){case"input":s=Ja(e,s),n=Ja(e,n),i=[];break;case"select":s=re({},s,{value:void 0}),n=re({},n,{value:void 0}),i=[];break;case"textarea":s=Xa(e,s),n=Xa(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=mi)}eo(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Vn.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Vn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&G("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Qh=function(e,t,r,n){r!==n&&(t.flags|=4)};function jn(e,t){if(!X)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ne(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function gg(e,t,r){var n=t.pendingProps;switch(bl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(t),null;case 1:return $e(t.type)&&gi(),Ne(t),null;case 3:return n=t.stateNode,on(),J(De),J(Ee),Al(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Is(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nt!==null&&(Do(nt),nt=null))),Co(e,t),Ne(t),null;case 5:Pl(t);var s=dr(rs.current);if(r=t.type,e!==null&&t.stateNode!=null)Jh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(E(166));return Ne(t),null}if(e=dr(ht.current),Is(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ut]=t,n[es]=i,e=(t.mode&1)!==0,r){case"dialog":G("cancel",n),G("close",n);break;case"iframe":case"object":case"embed":G("load",n);break;case"video":case"audio":for(s=0;s<An.length;s++)G(An[s],n);break;case"source":G("error",n);break;case"img":case"image":case"link":G("error",n),G("load",n);break;case"details":G("toggle",n);break;case"input":uc(n,i),G("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},G("invalid",n);break;case"textarea":hc(n,i),G("invalid",n)}eo(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Os(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Os(n.textContent,l,e),s=["children",""+l]):Vn.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&G("scroll",n)}switch(r){case"input":Ss(n),dc(n,i,!0);break;case"textarea":Ss(n),fc(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=mi)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ut]=t,e[es]=n,Gh(e,t,!1,!1),t.stateNode=e;e:{switch(o=to(r,n),r){case"dialog":G("cancel",e),G("close",e),s=n;break;case"iframe":case"object":case"embed":G("load",e),s=n;break;case"video":case"audio":for(s=0;s<An.length;s++)G(An[s],e);s=n;break;case"source":G("error",e),s=n;break;case"img":case"image":case"link":G("error",e),G("load",e),s=n;break;case"details":G("toggle",e),s=n;break;case"input":uc(e,n),s=Ja(e,n),G("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=re({},n,{value:void 0}),G("invalid",e);break;case"textarea":hc(e,n),s=Xa(e,n),G("invalid",e);break;default:s=n}eo(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ed(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Nd(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&qn(e,c):typeof c=="number"&&qn(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Vn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&G("scroll",e):c!=null&&al(e,i,c,o))}switch(r){case"input":Ss(e),dc(e,n,!1);break;case"textarea":Ss(e),fc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Gt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Jr(e,!!n.multiple,i,!1):n.defaultValue!=null&&Jr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=mi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ne(t),null;case 6:if(e&&t.stateNode!=null)Qh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(E(166));if(r=dr(rs.current),dr(ht.current),Is(t)){if(n=t.stateNode,r=t.memoizedProps,n[ut]=t,(i=n.nodeValue!==r)&&(e=Me,e!==null))switch(e.tag){case 3:Os(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Os(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ut]=t,t.stateNode=n}return Ne(t),null;case 13:if(J(ee),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(X&&Be!==null&&t.mode&1&&!(t.flags&128))ph(),sn(),t.flags|=98560,i=!1;else if(i=Is(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(E(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[ut]=t}else sn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ne(t),i=!1}else nt!==null&&(Do(nt),nt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ee.current&1?pe===0&&(pe=3):Ml())),t.updateQueue!==null&&(t.flags|=4),Ne(t),null);case 4:return on(),Co(e,t),e===null&&Xn(t.stateNode.containerInfo),Ne(t),null;case 10:return Nl(t.type._context),Ne(t),null;case 17:return $e(t.type)&&gi(),Ne(t),null;case 19:if(J(ee),i=t.memoizedState,i===null)return Ne(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)jn(i,!1);else{if(pe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ji(e),o!==null){for(t.flags|=128,jn(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return K(ee,ee.current&1|2),t.child}e=e.sibling}i.tail!==null&&oe()>cn&&(t.flags|=128,n=!0,jn(i,!1),t.lanes=4194304)}else{if(!n)if(e=ji(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),jn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!X)return Ne(t),null}else 2*oe()-i.renderingStartTime>cn&&r!==1073741824&&(t.flags|=128,n=!0,jn(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=oe(),t.sibling=null,r=ee.current,K(ee,n?r&1|2:r&1),t):(Ne(t),null);case 22:case 23:return Bl(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ze&1073741824&&(Ne(t),t.subtreeFlags&6&&(t.flags|=8192)):Ne(t),null;case 24:return null;case 25:return null}throw Error(E(156,t.tag))}function yg(e,t){switch(bl(t),t.tag){case 1:return $e(t.type)&&gi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return on(),J(De),J(Ee),Al(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pl(t),null;case 13:if(J(ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(E(340));sn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return J(ee),null;case 4:return on(),null;case 10:return Nl(t.type._context),null;case 22:case 23:return Bl(),null;case 24:return null;default:return null}}var Ls=!1,Se=!1,vg=typeof WeakSet=="function"?WeakSet:Set,R=null;function Hr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){se(e,t,n)}else r.current=null}function Po(e,t,r){try{r()}catch(n){se(e,t,n)}}var ru=!1;function xg(e,t){if(ho=hi,e=th(),xl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=e,p=null;t:for(;;){for(var y;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===e)break t;if(p===r&&++u===s&&(l=o),p===i&&++h===n&&(c=o),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(fo={focusedElem:e,selectionRange:r},hi=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,w=x.memoizedState,m=t.stateNode,d=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:et(t.type,v),w);m.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(b){se(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return x=ru,ru=!1,x}function Ln(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Po(t,r,i)}s=s.next}while(s!==n)}}function Ki(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ao(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Yh(e){var t=e.alternate;t!==null&&(e.alternate=null,Yh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ut],delete t[es],delete t[go],delete t[tg],delete t[rg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Xh(e){return e.tag===5||e.tag===3||e.tag===4}function nu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function To(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=mi));else if(n!==4&&(e=e.child,e!==null))for(To(e,t,r),e=e.sibling;e!==null;)To(e,t,r),e=e.sibling}function Fo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Fo(e,t,r),e=e.sibling;e!==null;)Fo(e,t,r),e=e.sibling}var be=null,tt=!1;function Et(e,t,r){for(r=r.child;r!==null;)Zh(e,t,r),r=r.sibling}function Zh(e,t,r){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(Ui,r)}catch{}switch(r.tag){case 5:Se||Hr(r,t);case 6:var n=be,s=tt;be=null,Et(e,t,r),be=n,tt=s,be!==null&&(tt?(e=be,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):be.removeChild(r.stateNode));break;case 18:be!==null&&(tt?(e=be,r=r.stateNode,e.nodeType===8?Na(e.parentNode,r):e.nodeType===1&&Na(e,r),Jn(e)):Na(be,r.stateNode));break;case 4:n=be,s=tt,be=r.stateNode.containerInfo,tt=!0,Et(e,t,r),be=n,tt=s;break;case 0:case 11:case 14:case 15:if(!Se&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Po(r,t,o),s=s.next}while(s!==n)}Et(e,t,r);break;case 1:if(!Se&&(Hr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){se(r,t,l)}Et(e,t,r);break;case 21:Et(e,t,r);break;case 22:r.mode&1?(Se=(n=Se)||r.memoizedState!==null,Et(e,t,r),Se=n):Et(e,t,r);break;default:Et(e,t,r)}}function su(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new vg),t.forEach(function(n){var s=Cg.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Xe(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:be=l.stateNode,tt=!1;break e;case 3:be=l.stateNode.containerInfo,tt=!0;break e;case 4:be=l.stateNode.containerInfo,tt=!0;break e}l=l.return}if(be===null)throw Error(E(160));Zh(i,o,s),be=null,tt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){se(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ef(t,e),t=t.sibling}function ef(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xe(t,e),lt(e),n&4){try{Ln(3,e,e.return),Ki(3,e)}catch(v){se(e,e.return,v)}try{Ln(5,e,e.return)}catch(v){se(e,e.return,v)}}break;case 1:Xe(t,e),lt(e),n&512&&r!==null&&Hr(r,r.return);break;case 5:if(Xe(t,e),lt(e),n&512&&r!==null&&Hr(r,r.return),e.flags&32){var s=e.stateNode;try{qn(s,"")}catch(v){se(e,e.return,v)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&_d(s,i),to(l,o);var u=to(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?Ed(s,f):h==="dangerouslySetInnerHTML"?Nd(s,f):h==="children"?qn(s,f):al(s,h,f,u)}switch(l){case"input":Qa(s,i);break;case"textarea":jd(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Jr(s,!!i.multiple,y,!1):p!==!!i.multiple&&(i.defaultValue!=null?Jr(s,!!i.multiple,i.defaultValue,!0):Jr(s,!!i.multiple,i.multiple?[]:"",!1))}s[es]=i}catch(v){se(e,e.return,v)}}break;case 6:if(Xe(t,e),lt(e),n&4){if(e.stateNode===null)throw Error(E(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){se(e,e.return,v)}}break;case 3:if(Xe(t,e),lt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Jn(t.containerInfo)}catch(v){se(e,e.return,v)}break;case 4:Xe(t,e),lt(e);break;case 13:Xe(t,e),lt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ul=oe())),n&4&&su(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(Se=(u=Se)||h,Xe(t,e),Se=u):Xe(t,e),lt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(R=e,h=e.child;h!==null;){for(f=R=h;R!==null;){switch(p=R,y=p.child,p.tag){case 0:case 11:case 14:case 15:Ln(4,p,p.return);break;case 1:Hr(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(v){se(n,r,v)}}break;case 5:Hr(p,p.return);break;case 22:if(p.memoizedState!==null){au(f);continue}}y!==null?(y.return=p,R=y):au(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Sd("display",o))}catch(v){se(e,e.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){se(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Xe(t,e),lt(e),n&4&&su(e);break;case 21:break;default:Xe(t,e),lt(e)}}function lt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Xh(r)){var n=r;break e}r=r.return}throw Error(E(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(qn(s,""),n.flags&=-33);var i=nu(e);Fo(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=nu(e);To(e,l,o);break;default:throw Error(E(161))}}catch(c){se(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wg(e,t,r){R=e,tf(e)}function tf(e,t,r){for(var n=(e.mode&1)!==0;R!==null;){var s=R,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Ls;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Se;l=Ls;var u=Se;if(Ls=o,(Se=c)&&!u)for(R=s;R!==null;)o=R,c=o.child,o.tag===22&&o.memoizedState!==null?ou(s):c!==null?(c.return=o,R=c):ou(s);for(;i!==null;)R=i,tf(i),i=i.sibling;R=s,Ls=l,Se=u}iu(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,R=i):iu(e)}}function iu(e){for(;R!==null;){var t=R;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Se||Ki(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Se)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:et(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Wc(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Wc(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Jn(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Se||t.flags&512&&Ao(t)}catch(p){se(t,t.return,p)}}if(t===e){R=null;break}if(r=t.sibling,r!==null){r.return=t.return,R=r;break}R=t.return}}function au(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var r=t.sibling;if(r!==null){r.return=t.return,R=r;break}R=t.return}}function ou(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ki(4,t)}catch(c){se(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){se(t,s,c)}}var i=t.return;try{Ao(t)}catch(c){se(t,i,c)}break;case 5:var o=t.return;try{Ao(t)}catch(c){se(t,o,c)}}}catch(c){se(t,t.return,c)}if(t===e){R=null;break}var l=t.sibling;if(l!==null){l.return=t.return,R=l;break}R=t.return}}var bg=Math.ceil,Si=kt.ReactCurrentDispatcher,$l=kt.ReactCurrentOwner,Je=kt.ReactCurrentBatchConfig,M=0,ye=null,ue=null,_e=0,ze=0,Kr=Xt(0),pe=0,as=null,vr=0,Gi=0,Ll=0,Un=null,Oe=null,Ul=0,cn=1/0,pt=null,Ei=!1,Ro=null,Wt=null,Us=!1,Dt=null,Ci=0,zn=0,Oo=null,ni=-1,si=0;function Te(){return M&6?oe():ni!==-1?ni:ni=oe()}function Vt(e){return e.mode&1?M&2&&_e!==0?_e&-_e:sg.transition!==null?(si===0&&(si=Ud()),si):(e=q,e!==0||(e=window.event,e=e===void 0?16:Hd(e.type)),e):1}function it(e,t,r,n){if(50<zn)throw zn=0,Oo=null,Error(E(185));gs(e,r,n),(!(M&2)||e!==ye)&&(e===ye&&(!(M&2)&&(Gi|=r),pe===4&&Rt(e,_e)),Le(e,n),r===1&&M===0&&!(t.mode&1)&&(cn=oe()+500,Vi&&Zt()))}function Le(e,t){var r=e.callbackNode;sm(e,t);var n=di(e,e===ye?_e:0);if(n===0)r!==null&&gc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&gc(r),t===1)e.tag===0?ng(lu.bind(null,e)):dh(lu.bind(null,e)),Zm(function(){!(M&6)&&Zt()}),r=null;else{switch(zd(n)){case 1:r=dl;break;case 4:r=$d;break;case 16:r=ui;break;case 536870912:r=Ld;break;default:r=ui}r=uf(r,rf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function rf(e,t){if(ni=-1,si=0,M&6)throw Error(E(327));var r=e.callbackNode;if(en()&&e.callbackNode!==r)return null;var n=di(e,e===ye?_e:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Pi(e,n);else{t=n;var s=M;M|=2;var i=sf();(ye!==e||_e!==t)&&(pt=null,cn=oe()+500,fr(e,t));do try{kg();break}catch(l){nf(e,l)}while(!0);kl(),Si.current=i,M=s,ue!==null?t=0:(ye=null,_e=0,t=pe)}if(t!==0){if(t===2&&(s=ao(e),s!==0&&(n=s,t=Io(e,s))),t===1)throw r=as,fr(e,0),Rt(e,n),Le(e,oe()),r;if(t===6)Rt(e,n);else{if(s=e.current.alternate,!(n&30)&&!_g(s)&&(t=Pi(e,n),t===2&&(i=ao(e),i!==0&&(n=i,t=Io(e,i))),t===1))throw r=as,fr(e,0),Rt(e,n),Le(e,oe()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(E(345));case 2:ir(e,Oe,pt);break;case 3:if(Rt(e,n),(n&130023424)===n&&(t=Ul+500-oe(),10<t)){if(di(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Te(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=mo(ir.bind(null,e,Oe,pt),t);break}ir(e,Oe,pt);break;case 4:if(Rt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-st(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=oe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*bg(n/1960))-n,10<n){e.timeoutHandle=mo(ir.bind(null,e,Oe,pt),n);break}ir(e,Oe,pt);break;case 5:ir(e,Oe,pt);break;default:throw Error(E(329))}}}return Le(e,oe()),e.callbackNode===r?rf.bind(null,e):null}function Io(e,t){var r=Un;return e.current.memoizedState.isDehydrated&&(fr(e,t).flags|=256),e=Pi(e,t),e!==2&&(t=Oe,Oe=r,t!==null&&Do(t)),e}function Do(e){Oe===null?Oe=e:Oe.push.apply(Oe,e)}function _g(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!at(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rt(e,t){for(t&=~Ll,t&=~Gi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-st(t),n=1<<r;e[r]=-1,t&=~n}}function lu(e){if(M&6)throw Error(E(327));en();var t=di(e,0);if(!(t&1))return Le(e,oe()),null;var r=Pi(e,t);if(e.tag!==0&&r===2){var n=ao(e);n!==0&&(t=n,r=Io(e,n))}if(r===1)throw r=as,fr(e,0),Rt(e,t),Le(e,oe()),r;if(r===6)throw Error(E(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ir(e,Oe,pt),Le(e,oe()),null}function zl(e,t){var r=M;M|=1;try{return e(t)}finally{M=r,M===0&&(cn=oe()+500,Vi&&Zt())}}function xr(e){Dt!==null&&Dt.tag===0&&!(M&6)&&en();var t=M;M|=1;var r=Je.transition,n=q;try{if(Je.transition=null,q=1,e)return e()}finally{q=n,Je.transition=r,M=t,!(M&6)&&Zt()}}function Bl(){ze=Kr.current,J(Kr)}function fr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Xm(r)),ue!==null)for(r=ue.return;r!==null;){var n=r;switch(bl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&gi();break;case 3:on(),J(De),J(Ee),Al();break;case 5:Pl(n);break;case 4:on();break;case 13:J(ee);break;case 19:J(ee);break;case 10:Nl(n.type._context);break;case 22:case 23:Bl()}r=r.return}if(ye=e,ue=e=qt(e.current,null),_e=ze=t,pe=0,as=null,Ll=Gi=vr=0,Oe=Un=null,ur!==null){for(t=0;t<ur.length;t++)if(r=ur[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}ur=null}return e}function nf(e,t){do{var r=ue;try{if(kl(),ei.current=Ni,ki){for(var n=te.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ki=!1}if(yr=0,ge=fe=te=null,$n=!1,ns=0,$l.current=null,r===null||r.return===null){pe=1,as=t,ue=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=_e,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Jc(o);if(y!==null){y.flags&=-257,Qc(y,o,l,i,t),y.mode&1&&Gc(i,u,t),t=y,c=u;var x=t.updateQueue;if(x===null){var v=new Set;v.add(c),t.updateQueue=v}else x.add(c);break e}else{if(!(t&1)){Gc(i,u,t),Ml();break e}c=Error(E(426))}}else if(X&&l.mode&1){var w=Jc(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Qc(w,o,l,i,t),_l(ln(c,l));break e}}i=c=ln(c,l),pe!==4&&(pe=2),Un===null?Un=[i]:Un.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=zh(i,c,t);Mc(i,m);break e;case 1:l=c;var d=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof d.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Wt===null||!Wt.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=Bh(i,l,t);Mc(i,b);break e}}i=i.return}while(i!==null)}of(r)}catch(N){t=N,ue===r&&r!==null&&(ue=r=r.return);continue}break}while(!0)}function sf(){var e=Si.current;return Si.current=Ni,e===null?Ni:e}function Ml(){(pe===0||pe===3||pe===2)&&(pe=4),ye===null||!(vr&268435455)&&!(Gi&268435455)||Rt(ye,_e)}function Pi(e,t){var r=M;M|=2;var n=sf();(ye!==e||_e!==t)&&(pt=null,fr(e,t));do try{jg();break}catch(s){nf(e,s)}while(!0);if(kl(),M=r,Si.current=n,ue!==null)throw Error(E(261));return ye=null,_e=0,pe}function jg(){for(;ue!==null;)af(ue)}function kg(){for(;ue!==null&&!Jp();)af(ue)}function af(e){var t=cf(e.alternate,e,ze);e.memoizedProps=e.pendingProps,t===null?of(e):ue=t,$l.current=null}function of(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=yg(r,t),r!==null){r.flags&=32767,ue=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{pe=6,ue=null;return}}else if(r=gg(r,t,ze),r!==null){ue=r;return}if(t=t.sibling,t!==null){ue=t;return}ue=t=e}while(t!==null);pe===0&&(pe=5)}function ir(e,t,r){var n=q,s=Je.transition;try{Je.transition=null,q=1,Ng(e,t,r,n)}finally{Je.transition=s,q=n}return null}function Ng(e,t,r,n){do en();while(Dt!==null);if(M&6)throw Error(E(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(E(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(im(e,i),e===ye&&(ue=ye=null,_e=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Us||(Us=!0,uf(ui,function(){return en(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Je.transition,Je.transition=null;var o=q;q=1;var l=M;M|=4,$l.current=null,xg(e,r),ef(r,e),qm(fo),hi=!!ho,fo=ho=null,e.current=r,wg(r),Qp(),M=l,q=o,Je.transition=i}else e.current=r;if(Us&&(Us=!1,Dt=e,Ci=s),i=e.pendingLanes,i===0&&(Wt=null),Zp(r.stateNode),Le(e,oe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ei)throw Ei=!1,e=Ro,Ro=null,e;return Ci&1&&e.tag!==0&&en(),i=e.pendingLanes,i&1?e===Oo?zn++:(zn=0,Oo=e):zn=0,Zt(),null}function en(){if(Dt!==null){var e=zd(Ci),t=Je.transition,r=q;try{if(Je.transition=null,q=16>e?16:e,Dt===null)var n=!1;else{if(e=Dt,Dt=null,Ci=0,M&6)throw Error(E(331));var s=M;for(M|=4,R=e.current;R!==null;){var i=R,o=i.child;if(R.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(R=u;R!==null;){var h=R;switch(h.tag){case 0:case 11:case 15:Ln(8,h,i)}var f=h.child;if(f!==null)f.return=h,R=f;else for(;R!==null;){h=R;var p=h.sibling,y=h.return;if(Yh(h),h===u){R=null;break}if(p!==null){p.return=y,R=p;break}R=y}}}var x=i.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}R=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,R=o;else e:for(;R!==null;){if(i=R,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ln(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,R=m;break e}R=i.return}}var d=e.current;for(R=d;R!==null;){o=R;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,R=g;else e:for(o=d;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ki(9,l)}}catch(N){se(l,l.return,N)}if(l===o){R=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,R=b;break e}R=l.return}}if(M=s,Zt(),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(Ui,e)}catch{}n=!0}return n}finally{q=r,Je.transition=t}}return!1}function cu(e,t,r){t=ln(r,t),t=zh(e,t,1),e=Mt(e,t,1),t=Te(),e!==null&&(gs(e,1,t),Le(e,t))}function se(e,t,r){if(e.tag===3)cu(e,e,r);else for(;t!==null;){if(t.tag===3){cu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Wt===null||!Wt.has(n))){e=ln(r,e),e=Bh(t,e,1),t=Mt(t,e,1),e=Te(),t!==null&&(gs(t,1,e),Le(t,e));break}}t=t.return}}function Sg(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Te(),e.pingedLanes|=e.suspendedLanes&r,ye===e&&(_e&r)===r&&(pe===4||pe===3&&(_e&130023424)===_e&&500>oe()-Ul?fr(e,0):Ll|=r),Le(e,t)}function lf(e,t){t===0&&(e.mode&1?(t=Ps,Ps<<=1,!(Ps&130023424)&&(Ps=4194304)):t=1);var r=Te();e=_t(e,t),e!==null&&(gs(e,t,r),Le(e,r))}function Eg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),lf(e,r)}function Cg(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(E(314))}n!==null&&n.delete(t),lf(e,r)}var cf;cf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||De.current)Ie=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ie=!1,mg(e,t,r);Ie=!!(e.flags&131072)}else Ie=!1,X&&t.flags&1048576&&hh(t,xi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ri(e,t),e=t.pendingProps;var s=nn(t,Ee.current);Zr(t,r),s=Fl(null,t,n,e,s,r);var i=Rl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$e(n)?(i=!0,yi(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,El(t),s.updater=Hi,t.stateNode=s,s._reactInternals=t,_o(t,n,e,r),t=No(null,t,n,!0,i,r)):(t.tag=0,X&&i&&wl(t),Ae(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ri(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Ag(n),e=et(n,e),s){case 0:t=ko(null,t,n,e,r);break e;case 1:t=Zc(null,t,n,e,r);break e;case 11:t=Yc(null,t,n,e,r);break e;case 14:t=Xc(null,t,n,et(n.type,e),r);break e}throw Error(E(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:et(n,s),ko(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:et(n,s),Zc(e,t,n,s,r);case 3:e:{if(qh(t),e===null)throw Error(E(387));n=t.pendingProps,i=t.memoizedState,s=i.element,vh(e,t),_i(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ln(Error(E(423)),t),t=eu(e,t,n,r,s);break e}else if(n!==s){s=ln(Error(E(424)),t),t=eu(e,t,n,r,s);break e}else for(Be=Bt(t.stateNode.containerInfo.firstChild),Me=t,X=!0,nt=null,r=gh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(sn(),n===s){t=jt(e,t,r);break e}Ae(e,t,n,r)}t=t.child}return t;case 5:return xh(t),e===null&&xo(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,po(n,s)?o=null:i!==null&&po(n,i)&&(t.flags|=32),Vh(e,t),Ae(e,t,o,r),t.child;case 6:return e===null&&xo(t),null;case 13:return Hh(e,t,r);case 4:return Cl(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=an(t,null,n,r):Ae(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:et(n,s),Yc(e,t,n,s,r);case 7:return Ae(e,t,t.pendingProps,r),t.child;case 8:return Ae(e,t,t.pendingProps.children,r),t.child;case 12:return Ae(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,K(wi,n._currentValue),n._currentValue=o,i!==null)if(at(i.value,o)){if(i.children===s.children&&!De.current){t=jt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=xt(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),wo(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(E(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),wo(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ae(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Zr(t,r),s=Qe(s),n=n(s),t.flags|=1,Ae(e,t,n,r),t.child;case 14:return n=t.type,s=et(n,t.pendingProps),s=et(n.type,s),Xc(e,t,n,s,r);case 15:return Mh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:et(n,s),ri(e,t),t.tag=1,$e(n)?(e=!0,yi(t)):e=!1,Zr(t,r),Uh(t,n,s),_o(t,n,s,r),No(null,t,n,!0,e,r);case 19:return Kh(e,t,r);case 22:return Wh(e,t,r)}throw Error(E(156,t.tag))};function uf(e,t){return Dd(e,t)}function Pg(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ge(e,t,r,n){return new Pg(e,t,r,n)}function Wl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ag(e){if(typeof e=="function")return Wl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ll)return 11;if(e===cl)return 14}return 2}function qt(e,t){var r=e.alternate;return r===null?(r=Ge(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ii(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Wl(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case $r:return pr(r.children,s,i,t);case ol:o=8,s|=8;break;case qa:return e=Ge(12,r,t,s|2),e.elementType=qa,e.lanes=i,e;case Ha:return e=Ge(13,r,t,s),e.elementType=Ha,e.lanes=i,e;case Ka:return e=Ge(19,r,t,s),e.elementType=Ka,e.lanes=i,e;case xd:return Ji(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yd:o=10;break e;case vd:o=9;break e;case ll:o=11;break e;case cl:o=14;break e;case Pt:o=16,n=null;break e}throw Error(E(130,e==null?e:typeof e,""))}return t=Ge(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function pr(e,t,r,n){return e=Ge(7,e,n,t),e.lanes=r,e}function Ji(e,t,r,n){return e=Ge(22,e,n,t),e.elementType=xd,e.lanes=r,e.stateNode={isHidden:!1},e}function Ra(e,t,r){return e=Ge(6,e,null,t),e.lanes=r,e}function Oa(e,t,r){return t=Ge(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Tg(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pa(0),this.expirationTimes=pa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pa(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vl(e,t,r,n,s,i,o,l,c){return e=new Tg(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ge(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},El(i),e}function Fg(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function df(e){if(!e)return Jt;e=e._reactInternals;e:{if(br(e)!==e||e.tag!==1)throw Error(E(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($e(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(E(171))}if(e.tag===1){var r=e.type;if($e(r))return uh(e,r,t)}return t}function hf(e,t,r,n,s,i,o,l,c){return e=Vl(r,n,!0,e,s,i,o,l,c),e.context=df(null),r=e.current,n=Te(),s=Vt(r),i=xt(n,s),i.callback=t??null,Mt(r,i,s),e.current.lanes=s,gs(e,s,n),Le(e,n),e}function Qi(e,t,r,n){var s=t.current,i=Te(),o=Vt(s);return r=df(r),t.context===null?t.context=r:t.pendingContext=r,t=xt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Mt(s,t,o),e!==null&&(it(e,s,o,i),Zs(e,s,o)),o}function Ai(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function uu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ql(e,t){uu(e,t),(e=e.alternate)&&uu(e,t)}function Rg(){return null}var ff=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hl(e){this._internalRoot=e}Yi.prototype.render=Hl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(E(409));Qi(e,t,null,null)};Yi.prototype.unmount=Hl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xr(function(){Qi(null,e,null,null)}),t[bt]=null}};function Yi(e){this._internalRoot=e}Yi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ft.length&&t!==0&&t<Ft[r].priority;r++);Ft.splice(r,0,e),r===0&&qd(e)}};function Kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function du(){}function Og(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Ai(o);i.call(u)}}var o=hf(t,n,e,0,null,!1,!1,"",du);return e._reactRootContainer=o,e[bt]=o.current,Xn(e.nodeType===8?e.parentNode:e),xr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Ai(c);l.call(u)}}var c=Vl(e,0,!1,null,null,!1,!1,"",du);return e._reactRootContainer=c,e[bt]=c.current,Xn(e.nodeType===8?e.parentNode:e),xr(function(){Qi(t,c,r,n)}),c}function Zi(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Ai(o);l.call(c)}}Qi(t,o,e,s)}else o=Og(r,t,e,s,n);return Ai(o)}Bd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Pn(t.pendingLanes);r!==0&&(hl(t,r|1),Le(t,oe()),!(M&6)&&(cn=oe()+500,Zt()))}break;case 13:xr(function(){var n=_t(e,1);if(n!==null){var s=Te();it(n,e,1,s)}}),ql(e,1)}};fl=function(e){if(e.tag===13){var t=_t(e,134217728);if(t!==null){var r=Te();it(t,e,134217728,r)}ql(e,134217728)}};Md=function(e){if(e.tag===13){var t=Vt(e),r=_t(e,t);if(r!==null){var n=Te();it(r,e,t,n)}ql(e,t)}};Wd=function(){return q};Vd=function(e,t){var r=q;try{return q=e,t()}finally{q=r}};no=function(e,t,r){switch(t){case"input":if(Qa(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Wi(n);if(!s)throw Error(E(90));bd(n),Qa(n,s)}}}break;case"textarea":jd(e,r);break;case"select":t=r.value,t!=null&&Jr(e,!!r.multiple,t,!1)}};Ad=zl;Td=xr;var Ig={usingClientEntryPoint:!1,Events:[vs,Br,Wi,Cd,Pd,zl]},kn={findFiberByHostInstance:cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dg={bundleType:kn.bundleType,version:kn.version,rendererPackageName:kn.rendererPackageName,rendererConfig:kn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Od(e),e===null?null:e.stateNode},findFiberByHostInstance:kn.findFiberByHostInstance||Rg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zs.isDisabled&&zs.supportsFiber)try{Ui=zs.inject(Dg),dt=zs}catch{}}Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ig;Ve.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kl(t))throw Error(E(200));return Fg(e,t,null,r)};Ve.createRoot=function(e,t){if(!Kl(e))throw Error(E(299));var r=!1,n="",s=ff;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Vl(e,1,!1,null,null,r,!1,n,s),e[bt]=t.current,Xn(e.nodeType===8?e.parentNode:e),new Hl(t)};Ve.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(E(188)):(e=Object.keys(e).join(","),Error(E(268,e)));return e=Od(t),e=e===null?null:e.stateNode,e};Ve.flushSync=function(e){return xr(e)};Ve.hydrate=function(e,t,r){if(!Xi(t))throw Error(E(200));return Zi(null,e,t,!0,r)};Ve.hydrateRoot=function(e,t,r){if(!Kl(e))throw Error(E(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=ff;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=hf(t,null,e,1,r??null,s,!1,i,o),e[bt]=t.current,Xn(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Yi(t)};Ve.render=function(e,t,r){if(!Xi(t))throw Error(E(200));return Zi(null,e,t,!1,r)};Ve.unmountComponentAtNode=function(e){if(!Xi(e))throw Error(E(40));return e._reactRootContainer?(xr(function(){Zi(null,null,e,!1,function(){e._reactRootContainer=null,e[bt]=null})}),!0):!1};Ve.unstable_batchedUpdates=zl;Ve.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Xi(r))throw Error(E(200));if(e==null||e._reactInternals===void 0)throw Error(E(38));return Zi(e,t,r,!1,n)};Ve.version="18.3.1-next-f1338f8080-20240426";function pf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pf)}catch(e){console.error(e)}}pf(),fd.exports=Ve;var $g=fd.exports,mf,hu=$g;mf=hu.createRoot,hu.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function os(){return os=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},os.apply(this,arguments)}var $t;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})($t||($t={}));const fu="popstate";function Lg(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return $o("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Ti(s)}return zg(t,r,null,e)}function ie(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gl(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ug(){return Math.random().toString(36).substr(2,8)}function pu(e,t){return{usr:e.state,key:e.key,idx:t}}function $o(e,t,r,n){return r===void 0&&(r=null),os({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?mn(t):t,{state:r,key:t&&t.key||n||Ug()})}function Ti(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function mn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function zg(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=$t.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(os({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=$t.Pop;let w=h(),m=w==null?null:w-u;u=w,c&&c({action:l,location:v.location,delta:m})}function p(w,m){l=$t.Push;let d=$o(v.location,w,m);u=h()+1;let g=pu(d,u),b=v.createHref(d);try{o.pushState(g,"",b)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(b)}i&&c&&c({action:l,location:v.location,delta:1})}function y(w,m){l=$t.Replace;let d=$o(v.location,w,m);u=h();let g=pu(d,u),b=v.createHref(d);o.replaceState(g,"",b),i&&c&&c({action:l,location:v.location,delta:0})}function x(w){let m=s.location.origin!=="null"?s.location.origin:s.location.href,d=typeof w=="string"?w:Ti(w);return d=d.replace(/ $/,"%20"),ie(m,"No window.location.(origin|href) available to create URL for href: "+d),new URL(d,m)}let v={get action(){return l},get location(){return e(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(fu,f),c=w,()=>{s.removeEventListener(fu,f),c=null}},createHref(w){return t(s,w)},createURL:x,encodeLocation(w){let m=x(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:p,replace:y,go(w){return o.go(w)}};return v}var mu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(mu||(mu={}));function Bg(e,t,r){return r===void 0&&(r="/"),Mg(e,t,r)}function Mg(e,t,r,n){let s=typeof t=="string"?mn(t):t,i=un(s.pathname||"/",r);if(i==null)return null;let o=gf(e);Wg(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=e0(i);l=Xg(o[c],u)}return l}function gf(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ie(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Ht([n,c.relativePath]),h=r.concat(c);i.children&&i.children.length>0&&(ie(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),gf(i.children,t,h,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Qg(u,i.index),routesMeta:h})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of yf(i.path))s(i,o,c)}),t}function yf(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=yf(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Wg(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Yg(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Vg=/^:[\w-]+$/,qg=3,Hg=2,Kg=1,Gg=10,Jg=-2,gu=e=>e==="*";function Qg(e,t){let r=e.split("/"),n=r.length;return r.some(gu)&&(n+=Jg),t&&(n+=Hg),r.filter(s=>!gu(s)).reduce((s,i)=>s+(Vg.test(i)?qg:i===""?Kg:Gg),n)}function Yg(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function Xg(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,h=i==="/"?t:t.slice(i.length)||"/",f=Lo({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),p=c.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Ht([i,f.pathname]),pathnameBase:i0(Ht([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Ht([i,f.pathnameBase]))}return o}function Lo(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Zg(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,h,f)=>{let{paramName:p,isOptional:y}=h;if(p==="*"){let v=l[f]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const x=l[f];return y&&!x?u[p]=void 0:u[p]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function Zg(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Gl(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function e0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Gl(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function un(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const t0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,r0=e=>t0.test(e);function n0(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?mn(e):e,i;if(r)if(r0(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Gl(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=yu(r.substring(1),"/"):i=yu(r,t)}else i=t;return{pathname:i,search:a0(n),hash:o0(s)}}function yu(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ia(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function s0(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function vf(e,t){let r=s0(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function xf(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=mn(e):(s=os({},e),ie(!s.pathname||!s.pathname.includes("?"),Ia("?","pathname","search",s)),ie(!s.pathname||!s.pathname.includes("#"),Ia("#","pathname","hash",s)),ie(!s.search||!s.search.includes("#"),Ia("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?t[f]:"/"}let c=n0(s,l),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Ht=e=>e.join("/").replace(/\/\/+/g,"/"),i0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),a0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,o0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function l0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const wf=["post","put","patch","delete"];new Set(wf);const c0=["get",...wf];new Set(c0);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ls(){return ls=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ls.apply(this,arguments)}const ea=_.createContext(null),bf=_.createContext(null),er=_.createContext(null),ta=_.createContext(null),tr=_.createContext({outlet:null,matches:[],isDataRoute:!1}),_f=_.createContext(null);function u0(e,t){let{relative:r}=t===void 0?{}:t;ws()||ie(!1);let{basename:n,navigator:s}=_.useContext(er),{hash:i,pathname:o,search:l}=ra(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Ht([n,o])),s.createHref({pathname:c,search:l,hash:i})}function ws(){return _.useContext(ta)!=null}function _r(){return ws()||ie(!1),_.useContext(ta).location}function jf(e){_.useContext(er).static||_.useLayoutEffect(e)}function ve(){let{isDataRoute:e}=_.useContext(tr);return e?j0():d0()}function d0(){ws()||ie(!1);let e=_.useContext(ea),{basename:t,future:r,navigator:n}=_.useContext(er),{matches:s}=_.useContext(tr),{pathname:i}=_r(),o=JSON.stringify(vf(s,r.v7_relativeSplatPath)),l=_.useRef(!1);return jf(()=>{l.current=!0}),_.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=xf(u,JSON.parse(o),i,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ht([t,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[t,n,o,i,e])}function Jl(){let{matches:e}=_.useContext(tr),t=e[e.length-1];return t?t.params:{}}function ra(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=_.useContext(er),{matches:s}=_.useContext(tr),{pathname:i}=_r(),o=JSON.stringify(vf(s,n.v7_relativeSplatPath));return _.useMemo(()=>xf(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function h0(e,t){return f0(e,t)}function f0(e,t,r,n){ws()||ie(!1);let{navigator:s}=_.useContext(er),{matches:i}=_.useContext(tr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=_r(),h;if(t){var f;let w=typeof t=="string"?mn(t):t;c==="/"||(f=w.pathname)!=null&&f.startsWith(c)||ie(!1),h=w}else h=u;let p=h.pathname||"/",y=p;if(c!=="/"){let w=c.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=Bg(e,{pathname:y}),v=v0(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Ht([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Ht([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return t&&v?_.createElement(ta.Provider,{value:{location:ls({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:$t.Pop}},v):v}function p0(){let e=_0(),t=l0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),r?_.createElement("pre",{style:s},r):null,null)}const m0=_.createElement(p0,null);class g0 extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?_.createElement(tr.Provider,{value:this.props.routeContext},_.createElement(_f.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function y0(e){let{routeContext:t,match:r,children:n}=e,s=_.useContext(ea);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),_.createElement(tr.Provider,{value:t},n)}function v0(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||ie(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:y}=r,x=f.route.loader&&p[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let y,x=!1,v=null,w=null;r&&(y=l&&f.route.id?l[f.route.id]:void 0,v=f.route.errorElement||m0,c&&(u<0&&p===0?(k0("route-fallback"),x=!0,w=null):u===p&&(x=!0,w=f.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,p+1)),d=()=>{let g;return y?g=v:x?g=w:f.route.Component?g=_.createElement(f.route.Component,null):f.route.element?g=f.route.element:g=h,_.createElement(y0,{match:f,routeContext:{outlet:h,matches:m,isDataRoute:r!=null},children:g})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?_.createElement(g0,{location:r.location,revalidation:r.revalidation,component:v,error:y,children:d(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):d()},null)}var kf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(kf||{}),Nf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Nf||{});function x0(e){let t=_.useContext(ea);return t||ie(!1),t}function w0(e){let t=_.useContext(bf);return t||ie(!1),t}function b0(e){let t=_.useContext(tr);return t||ie(!1),t}function Sf(e){let t=b0(),r=t.matches[t.matches.length-1];return r.route.id||ie(!1),r.route.id}function _0(){var e;let t=_.useContext(_f),r=w0(),n=Sf();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function j0(){let{router:e}=x0(kf.UseNavigateStable),t=Sf(Nf.UseNavigateStable),r=_.useRef(!1);return jf(()=>{r.current=!0}),_.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ls({fromRouteId:t},i)))},[e,t])}const vu={};function k0(e,t,r){vu[e]||(vu[e]=!0)}function N0(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function de(e){ie(!1)}function S0(e){let{basename:t="/",children:r=null,location:n,navigationType:s=$t.Pop,navigator:i,static:o=!1,future:l}=e;ws()&&ie(!1);let c=t.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:i,static:o,future:ls({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=mn(n));let{pathname:h="/",search:f="",hash:p="",state:y=null,key:x="default"}=n,v=_.useMemo(()=>{let w=un(h,c);return w==null?null:{location:{pathname:w,search:f,hash:p,state:y,key:x},navigationType:s}},[c,h,f,p,y,x,s]);return v==null?null:_.createElement(er.Provider,{value:u},_.createElement(ta.Provider,{children:r,value:v}))}function xu(e){let{children:t,location:r}=e;return h0(Uo(t),r)}new Promise(()=>{});function Uo(e,t){t===void 0&&(t=[]);let r=[];return _.Children.forEach(e,(n,s)=>{if(!_.isValidElement(n))return;let i=[...t,s];if(n.type===_.Fragment){r.push.apply(r,Uo(n.props.children,i));return}n.type!==de&&ie(!1),!n.props.index||!n.props.children||ie(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Uo(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fi(){return Fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fi.apply(this,arguments)}function Ef(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function E0(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function C0(e,t){return e.button===0&&(!t||t==="_self")&&!E0(e)}function zo(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function P0(e,t){let r=zo(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}const A0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],T0=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],F0="6";try{window.__reactRouterVersion=F0}catch{}const R0=_.createContext({isTransitioning:!1}),O0="startTransition",wu=Sp[O0];function I0(e){let{basename:t,children:r,future:n,window:s}=e,i=_.useRef();i.current==null&&(i.current=Lg({window:s,v5Compat:!0}));let o=i.current,[l,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},h=_.useCallback(f=>{u&&wu?wu(()=>c(f)):c(f)},[c,u]);return _.useLayoutEffect(()=>o.listen(h),[o,h]),_.useEffect(()=>N0(n),[n]),_.createElement(S0,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const D0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kt=_.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=t,p=Ef(t,A0),{basename:y}=_.useContext(er),x,v=!1;if(typeof u=="string"&&$0.test(u)&&(x=u,D0))try{let g=new URL(window.location.href),b=u.startsWith("//")?new URL(g.protocol+u):new URL(u),N=un(b.pathname,y);b.origin===g.origin&&N!=null?u=N+b.search+b.hash:v=!0}catch{}let w=u0(u,{relative:s}),m=z0(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function d(g){n&&n(g),g.defaultPrevented||m(g)}return _.createElement("a",Fi({},p,{href:x||w,onClick:v||i?n:d,ref:r,target:c}))}),L0=_.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:h}=t,f=Ef(t,T0),p=ra(c,{relative:f.relative}),y=_r(),x=_.useContext(bf),{navigator:v,basename:w}=_.useContext(er),m=x!=null&&M0(p)&&u===!0,d=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,g=y.pathname,b=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(g=g.toLowerCase(),b=b?b.toLowerCase():null,d=d.toLowerCase()),b&&w&&(b=un(b,w)||b);const N=d!=="/"&&d.endsWith("/")?d.length-1:d.length;let k=g===d||!o&&g.startsWith(d)&&g.charAt(N)==="/",j=b!=null&&(b===d||!o&&b.startsWith(d)&&b.charAt(d.length)==="/"),S={isActive:k,isPending:j,isTransitioning:m},F=k?n:void 0,C;typeof i=="function"?C=i(S):C=[i,k?"active":null,j?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let I=typeof l=="function"?l(S):l;return _.createElement(Kt,Fi({},f,{"aria-current":F,className:C,ref:r,style:I,to:c,viewTransition:u}),typeof h=="function"?h(S):h)});var Bo;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Bo||(Bo={}));var bu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(bu||(bu={}));function U0(e){let t=_.useContext(ea);return t||ie(!1),t}function z0(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=ve(),u=_r(),h=ra(e,{relative:o});return _.useCallback(f=>{if(C0(f,r)){f.preventDefault();let p=n!==void 0?n:Ti(u)===Ti(h);c(e,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,h,n,s,r,e,i,o,l])}function B0(e){let t=_.useRef(zo(e)),r=_.useRef(!1),n=_r(),s=_.useMemo(()=>P0(n.search,r.current?null:t.current),[n.search]),i=ve(),o=_.useCallback((l,c)=>{const u=zo(typeof l=="function"?l(s):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,o]}function M0(e,t){t===void 0&&(t={});let r=_.useContext(R0);r==null&&ie(!1);let{basename:n}=U0(Bo.useViewTransitionState),s=ra(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=un(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=un(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Lo(s.pathname,o)!=null||Lo(s.pathname,i)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),L=(e,t)=>{const r=_.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>_.createElement("svg",{ref:h,...W0,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${V0(e)}`,l].join(" "),...u},[...t.map(([f,p])=>_.createElement(f,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=L("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=L("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=L("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=L("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=L("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=L("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=L("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=L("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=L("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=L("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=L("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=L("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=L("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=L("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=L("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=L("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=L("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=L("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=L("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=L("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=L("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=L("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=L("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=L("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=L("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=L("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=L("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=L("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=L("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=L("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=L("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=L("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=L("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=L("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=L("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=L("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=L("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=L("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=L("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=L("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=L("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=L("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=L("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=L("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=L("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=L("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=L("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function na(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function uy(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{u(n.next(h))}catch(f){o(f)}}function c(h){try{u(n.throw(h))}catch(f){o(f)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}const dy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class tc extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class hy extends tc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Nu extends tc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Su extends tc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Vo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Vo||(Vo={}));class fy{constructor(t,{headers:r={},customFetch:n,region:s=Vo.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=dy(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return uy(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:l,method:c,body:u,signal:h,timeout:f}=n;let p={},{region:y}=n;y||(y=this.region);const x=new URL(`${this.url}/${r}`);y&&y!=="any"&&(p["x-region"]=y,x.searchParams.set("forceFunctionRegion",y));let v;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(p["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(p["Content-Type"]="application/json",v=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?v=JSON.stringify(u):v=u;let w=h;f&&(o=new AbortController,i=setTimeout(()=>o.abort(),f),h?(w=o.signal,h.addEventListener("abort",()=>o.abort())):w=o.signal);const m=yield this.fetch(x.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:v,signal:w}).catch(N=>{throw new hy(N)}),d=m.headers.get("x-relay-error");if(d&&d==="true")throw new Nu(m);if(!m.ok)throw new Su(m);let g=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return g==="application/json"?b=yield m.json():g==="application/octet-stream"||g==="application/pdf"?b=yield m.blob():g==="text/event-stream"?b=m:g==="multipart/form-data"?b=yield m.formData():b=yield m.text(),{data:b,error:null,response:m}}catch(l){return{data:null,error:l,response:l instanceof Su||l instanceof Nu?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var py=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},my=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,u=i.status,h=i.statusText;if(i.ok){var f,p;if(r.method!=="HEAD"){var y;const m=await i.text();m===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((y=r.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?l=m:l=JSON.parse(m))}const v=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),w=(p=i.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");v&&w&&w.length>1&&(c=parseInt(w[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,h="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var x;const v=await i.text();try{o=JSON.parse(v),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,h="OK")}catch{i.status===404&&v===""?(u=204,h="No Content"):o={message:v}}if(o&&r.isMaybeSingle&&(!(o==null||(x=o.details)===null||x===void 0)&&x.includes("0 rows"))&&(o=null,u=200,h="OK"),o&&r.shouldThrowOnError)throw new py(o)}return{error:o,data:l,count:c,status:u,statusText:h}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var u,h,f,p;const x=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",v=(h=c==null?void 0:c.code)!==null&&h!==void 0?h:"";l=`${(f=i==null?void 0:i.name)!==null&&f!==void 0?f:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(p=c==null?void 0:c.name)!==null&&p!==void 0?p:"Error"}: ${x}`,v&&(l+=` (${v})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var y;l=(y=i==null?void 0:i.stack)!==null&&y!==void 0?y:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},gy=class extends my{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Eu=new RegExp("[,()]");var Rr=class extends gy{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Eu.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Eu.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},yy=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new Rr({method:s,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new Rr({method:s,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),s||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);l.searchParams.set("columns",h.join(","))}}return new Rr({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Rr({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Rr({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},vy=class Lf{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new yy(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Lf(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const h=y=>y!==null&&typeof y=="object"&&(!Array.isArray(y)||y.some(h)),f=n&&Object.values(r).some(h);f?(l="POST",u=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([y,x])=>x!==void 0).map(([y,x])=>[y,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([y,x])=>{c.searchParams.append(y,x)})):(l="POST",u=r);const p=new Headers(this.headers);return f?p.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&p.set("Prefer",`count=${i}`),new Rr({method:l,url:c,headers:p,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class xy{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const wy="2.93.1",by=`realtime-js/${wy}`,_y="1.0.0",Uf="2.0.0",Cu=Uf,qo=1e4,jy=1e3,ky=100;var Tt;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Tt||(Tt={}));var he;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(he||(he={}));var rt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(rt||(rt={}));var Ho;(function(e){e.websocket="websocket"})(Ho||(Ho={}));var or;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(or||(or={}));class Ny{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+f.length,y=new ArrayBuffer(this.HEADER_LENGTH+p);let x=new DataView(y),v=0;x.setUint8(v++,this.KINDS.userBroadcastPush),x.setUint8(v++,c.length),x.setUint8(v++,l.length),x.setUint8(v++,o.length),x.setUint8(v++,u.length),x.setUint8(v++,f.length),x.setUint8(v++,r),Array.from(c,m=>x.setUint8(v++,m.charCodeAt(0))),Array.from(l,m=>x.setUint8(v++,m.charCodeAt(0))),Array.from(o,m=>x.setUint8(v++,m.charCodeAt(0))),Array.from(u,m=>x.setUint8(v++,m.charCodeAt(0))),Array.from(f,m=>x.setUint8(v++,m.charCodeAt(0)));var w=new Uint8Array(y.byteLength+n.byteLength);return w.set(new Uint8Array(y),0),w.set(new Uint8Array(n),y.byteLength),w.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,l,c]=n;return r({join_ref:s,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const h=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+o));c=c+o;const p=t.slice(c,t.byteLength),y=l===this.JSON_ENCODING?JSON.parse(n.decode(p)):p,x={type:this.BROADCAST_EVENT,event:h,payload:y};return o>0&&(x.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class zf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var H;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(H||(H={}));const Pu=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=Sy(o,e,t,s),i),{}):{}},Sy=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?Bf(i,o):Ko(o)},Bf=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Ay(t,r)}switch(e){case H.bool:return Ey(t);case H.float4:case H.float8:case H.int2:case H.int4:case H.int8:case H.numeric:case H.oid:return Cy(t);case H.json:case H.jsonb:return Py(t);case H.timestamp:return Ty(t);case H.abstime:case H.date:case H.daterange:case H.int4range:case H.int8range:case H.money:case H.reltime:case H.text:case H.time:case H.timestamptz:case H.timetz:case H.tsrange:case H.tstzrange:return Ko(t);default:return Ko(t)}},Ko=e=>e,Ey=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Cy=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Py=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Ay=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Bf(t,l))}return e},Ty=e=>typeof e=="string"?e.replace(" ","T"):e,Mf=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Da{constructor(t,r,n={},s=qo){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Au;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Au||(Au={}));class Mn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mn.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Mn.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Mn.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,h)=>{o[u]||(c[u]=h)}),this.map(o,(u,h)=>{const f=i[u];if(f){const p=h.map(w=>w.presence_ref),y=f.map(w=>w.presence_ref),x=h.filter(w=>y.indexOf(w.presence_ref)<0),v=f.filter(w=>p.indexOf(w.presence_ref)<0);x.length>0&&(l[u]=x),v.length>0&&(c[u]=v)}else l[u]=h}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const h=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),h.length>0){const f=t[l].map(y=>y.presence_ref),p=h.filter(y=>f.indexOf(y.presence_ref)<0);t[l].unshift(...p)}n(l,h,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const h=c.map(f=>f.presence_ref);u=u.filter(f=>h.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Tu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Tu||(Tu={}));var Wn;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Wn||(Wn={}));var mt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(mt||(mt={}));class Gr{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=he.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Da(this,rt.join,this.params,this.timeout),this.rejoinTimer=new zf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=he.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=he.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rt.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Mn(this),this.broadcastEndpointURL=Mf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==he.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[Wn.PRESENCE]&&this.bindings[Wn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(mt.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(mt.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:y})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),y===void 0){t==null||t(mt.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,w=(x=v==null?void 0:v.length)!==null&&x!==void 0?x:0,m=[];for(let d=0;d<w;d++){const g=v[d],{filter:{event:b,schema:N,table:k,filter:j}}=g,S=y&&y[d];if(S&&S.event===b&&Gr.isFilterValueEqual(S.schema,N)&&Gr.isFilterValueEqual(S.table,k)&&Gr.isFilterValueEqual(S.filter,j))m.push(Object.assign(Object.assign({},g),{id:S.id}));else{this.unsubscribe(),this.state=he.errored,t==null||t(mt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(mt.SUBSCRIBED);return}}).receive("error",y=>{this.state=he.errored,t==null||t(mt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(mt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===he.joined&&t===Wn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=he.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Da(this,rt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=he.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Da(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>ky){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=rt;if(n&&[l,c,u,h].indexOf(o)>=0&&n!==this._joinRef())return;let p=this._onMessage(o,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var x,v,w;return((x=y.filter)===null||x===void 0?void 0:x.event)==="*"||((w=(v=y.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(y=>y.callback(p,n)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var x,v,w,m,d,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const b=y.id,N=(x=y.filter)===null||x===void 0?void 0:x.event;return b&&((v=r.ids)===null||v===void 0?void 0:v.includes(b))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const b=(d=(m=y==null?void 0:y.filter)===null||m===void 0?void 0:m.event)===null||d===void 0?void 0:d.toLocaleLowerCase();return b==="*"||b===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof p=="object"&&"ids"in p){const x=p.data,{schema:v,table:w,commit_timestamp:m,type:d,errors:g}=x;p=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:m,eventType:d,new:{},old:{},errors:g}),this._getPayloadRecords(x))}y.callback(p,n)})}_isClosed(){return this.state===he.closed}_isJoined(){return this.state===he.joined}_isJoining(){return this.state===he.joining}_isLeaving(){return this.state===he.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Gr.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(rt.close,{},t)}_onError(t){this._on(rt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=he.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Pu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Pu(t.columns,t.old_record)),r}}const $a=()=>{},Bs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Fy=[1e3,2e3,5e3,1e4],Ry=1e4,Oy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Iy{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qo,this.transport=null,this.heartbeatIntervalMs=Bs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$a,this.ref=0,this.reconnectTimer=null,this.vsn=Cu,this.logger=$a,this.conn=null,this.sendBuffer=[],this.serializer=new Ny,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Ho.websocket}`,this.httpEndpoint=Mf(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xy.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Tt.connecting:return or.Connecting;case Tt.open:return or.Open;case Tt.closing:return or.Closing;default:return or.Closed}}isConnected(){return this.connectionState()===or.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Gr(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(jy,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Bs.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(h){this.log("error","error in heartbeat callback",h)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Tt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Tt.open||this.conn.readyState===Tt.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(rt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Oy],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:by};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(rt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new zf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Bs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,c,u,h,f,p,y;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:qo,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Bs.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:$a,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Cu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:x=>Fy[x-1]||Ry,this.vsn){case _y:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(x,v)=>v(JSON.stringify(x)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(x,v)=>v(JSON.parse(x));break;case Uf:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var cs=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Dy(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function $y(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Ly(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const l=Dy(e.baseUrl,n,s),c=await $y(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),h=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),p=f&&h?JSON.parse(h):h;if(!u.ok){const y=f?p:void 0,x=y==null?void 0:y.error;throw new cs((x==null?void 0:x.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:x==null?void 0:x.type,icebergCode:x==null?void 0:x.code,details:y})}return{status:u.status,headers:u.headers,data:p}}}}function Ms(e){return e.join("")}var Uy=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Ms(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ms(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ms(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ms(e.namespace)}`}),!0}catch(t){if(t instanceof cs&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof cs&&r.status===409)return;throw r}}};function Er(e){return e.join("")}var zy=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Er(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Er(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Er(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Er(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Er(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Er(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof cs&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof cs&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},By=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Ly({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Uy(this.client,t),this.tableOps=new zy(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},sa=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function ia(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Ws=class extends sa{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Wf=class extends sa{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const My=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Wy=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Go=e=>{if(Array.isArray(e))return e.map(r=>Go(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Go(n)}),t},Vy=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function us(e){"@babel/helpers - typeof";return us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},us(e)}function qy(e,t){if(us(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(us(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hy(e){var t=qy(e,"string");return us(t)=="symbol"?t:t+""}function Ky(e,t,r){return(t=Hy(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fu(Object(r),!0).forEach(function(n){Ky(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Ru=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Gy=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e,i=s.status||500;if(typeof s.json=="function")s.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";t(new Ws(Ru(o),i,l,n))}).catch(()=>{if(n==="vectors"){const o=i+"";t(new Ws(s.statusText||`HTTP ${i} error`,i,o,n))}else{const o=i+"";t(new Ws(s.statusText||`HTTP ${i} error`,i,o,n))}});else{const o=i+"";t(new Ws(s.statusText||`HTTP ${i} error`,i,o,n))}}else t(new Wf(Ru(e),e,n))},Jy=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?$($({},s),r):(Wy(n)?(s.headers=$({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),$($({},s),r))};async function Sn(e,t,r,n,s,i,o){return new Promise((l,c)=>{e(r,Jy(t,n,s,i)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(o==="vectors"){const h=u.headers.get("content-type");if(!h||!h.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>Gy(u,c,n,o))})}function Qy(e="storage"){return{get:async(t,r,n,s)=>Sn(t,"GET",r,n,s,void 0,e),post:async(t,r,n,s,i)=>Sn(t,"POST",r,s,i,n,e),put:async(t,r,n,s,i)=>Sn(t,"PUT",r,s,i,n,e),head:async(t,r,n,s)=>Sn(t,"HEAD",r,$($({},n),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,r,n,s,i)=>Sn(t,"DELETE",r,s,i,n,e)}}const Yy=Qy("storage"),{get:ds,post:Y,put:Jo,head:Xy,remove:rc}=Yy;var gn=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=My(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ia(r))return{data:null,error:r};throw r}}},Zy=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ia(t))return{data:null,error:t};throw t}}};let Vf;Vf=Symbol.toStringTag;var ev=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Vf]="BlobDownloadBuilder",this.promise=null}asStream(){return new Zy(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ia(t))return{data:null,error:t};throw t}}};const tv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ou={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var rv=class extends gn{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var s=this;return s.handleOperation(async()=>{let i;const o=$($({},Ou),n);let l=$($({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=$($({},l),n.headers));const u=s._removeEmptyFolders(t),h=s._getFinalPath(u),f=await(e=="PUT"?Jo:Y)(s.fetch,`${s.url}/object/${h}`,i,$({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:f.Id,fullPath:f.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",t),s.handleOperation(async()=>{let c;const u=$({upsert:Ou.upsert},n),h=$($({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType),{path:i,fullPath:(await Jo(s.fetch,l.toString(),c,{headers:h})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const s=$({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await Y(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new sa("No token returned by API");return{signedUrl:o.toString(),path:e,token:l}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await Y(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await Y(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(e),i=await Y(n.fetch,`${n.url}/object/sign/${s}`,$({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const s=await Y(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s.map(o=>$($({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null}))})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>ds(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new ev(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>Go(await ds(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await Xy(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ia(n)&&n instanceof Wf){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await rc(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const s=$($($({},tv),t),{},{prefix:e||""});return await Y(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=$({},e);return await Y(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const nv="2.93.1",bs={"X-Client-Info":`storage-js/${nv}`};var sv=class extends gn{constructor(e,t={},r,n){const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),o=$($({},bs),t);super(i,o,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await ds(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await ds(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await Y(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await Jo(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Y(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await rc(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},iv=class extends gn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=$($({},bs),t);super(n,s,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Y(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await ds(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await rc(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!Vy(e))throw new sa("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new By({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}},av=class extends gn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=$($({},bs),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Y(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await Y(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Y(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await Y(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},ov=class extends gn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=$($({},bs),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Y(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Y(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Y(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Y(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Y(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},lv=class extends gn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=$($({},bs),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Y(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Y(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Y(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Y(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},cv=class extends lv{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new uv(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},uv=class extends av{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,$($({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,$($({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new dv(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},dv=class extends ov{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,$($({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,$($({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,$($({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,$($({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,$($({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},hv=class extends sv{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new rv(this.url,this.headers,e,this.fetch)}get vectors(){return new cv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new iv(this.url+"/iceberg",this.headers,this.fetch)}};const qf="2.93.1",Or=30*1e3,Qo=3,La=Qo*Or,fv="http://localhost:9999",pv="supabase.auth.token",mv={"X-Client-Info":`gotrue-js/${qf}`},Yo="X-Supabase-Api-Version",Hf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,yv=10*60*1e3;class hs extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function O(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class vv extends hs{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function xv(e){return O(e)&&e.name==="AuthApiError"}class lr extends hs{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Nt extends hs{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Ue extends Nt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ua(e){return O(e)&&e.name==="AuthSessionMissingError"}class Cr extends Nt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vs extends Nt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class qs extends Nt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function wv(e){return O(e)&&e.name==="AuthImplicitGrantRedirectError"}class Iu extends Nt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bv extends Nt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Xo extends Nt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function za(e){return O(e)&&e.name==="AuthRetryableFetchError"}class Du extends Nt{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Zo extends Nt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Oi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$u=` 	
\r=`.split(""),_v=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<$u.length;t+=1)e[$u[t].charCodeAt(0)]=-2;for(let t=0;t<Oi.length;t+=1)e[Oi[t].charCodeAt(0)]=t;return e})();function Lu(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Oi[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Oi[n]),t.queuedBits-=6}}function Kf(e,t,r){const n=_v[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Uu(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Nv(o,n,r)};for(let o=0;o<e.length;o+=1)Kf(e.charCodeAt(o),s,i);return t.join("")}function jv(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function kv(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}jv(n,t)}}function Nv(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function tn(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Kf(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Sv(e){const t=[];return kv(e,r=>t.push(r)),new Uint8Array(t)}function hr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Lu(s,r,n)),Lu(null,r,n),t.join("")}function Ev(e){return Math.round(Date.now()/1e3)+e}function Cv(){return Symbol("auth-callback")}const we=()=>typeof window<"u"&&typeof document<"u",rr={tested:!1,writable:!1},Gf=()=>{if(!we())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rr.tested)return rr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),rr.tested=!0,rr.writable=!0}catch{rr.tested=!0,rr.writable=!1}return rr.writable};function Pv(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Jf=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Av=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ir=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},nr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},xe=async(e,t)=>{await e.removeItem(t)};class aa{constructor(){this.promise=new aa.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}aa.promiseConstructor=Promise;function Hs(e){const t=e.split(".");if(t.length!==3)throw new Zo("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!gv.test(t[n]))throw new Zo("JWT not in base64url format");return{header:JSON.parse(Uu(t[0])),payload:JSON.parse(Uu(t[1])),signature:tn(t[2]),raw:{header:t[0],payload:t[1]}}}async function Tv(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Fv(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function Rv(e){return("0"+e.toString(16)).substr(-2)}function Ov(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,Rv).join("")}async function Iv(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Dv(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Iv(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Pr(e,t,r=!1){const n=Ov();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Ir(e,`${t}-code-verifier`,s);const i=await Dv(n);return[i,n===i?"plain":"s256"]}const $v=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Lv(e){const t=e.headers.get(Yo);if(!t||!t.match($v))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Uv(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function zv(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Bv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ar(e){if(!Bv.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ba(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Mv(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function zu(e){return JSON.parse(JSON.stringify(e))}const ar=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Wv=[502,503,504];async function Bu(e){var t;if(!Av(e))throw new Xo(ar(e),0);if(Wv.includes(e.status))throw new Xo(ar(e),e.status);let r;try{r=await e.json()}catch(i){throw new lr(ar(i),i)}let n;const s=Lv(e);if(s&&s.getTime()>=Hf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Du(ar(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ue}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Du(ar(r),e.status,r.weak_password.reasons);throw new vv(ar(r),e.status||500,n)}const Vv=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function D(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Yo]||(i[Yo]=Hf["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await qv(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function qv(e,t,r,n,s,i){const o=Vv(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Xo(ar(c),0)}if(l.ok||await Bu(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Bu(c)}}function Ze(e){var t;let r=null;Gv(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Ev(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Mu(e){const t=Ze(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ot(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Hv(e){return{data:e,error:null}}function Kv(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=na(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Wu(e){return e}function Gv(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ma=["global","local","others"];class Jv{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Jf(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Ma[0]){if(Ma.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ma.join(", ")}`);try{return await D(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(O(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await D(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ot})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=na(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await D(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Kv,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(O(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await D(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ot})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await D(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Wu});if(h.error)throw h.error;const f=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(x=>{const v=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(O(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ar(t);try{return await D(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ot})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ar(t);try{return await D(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ot})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ar(t);try{return await D(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ot})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ar(t.userId);try{const{data:r,error:n}=await D(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ar(t.userId),Ar(t.id);try{return{data:await D(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await D(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Wu});if(h.error)throw h.error;const f=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(x=>{const v=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(O(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await D(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await D(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await D(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(O(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await D(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await D(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}}function Vu(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Tr={debug:!!(globalThis&&Gf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Qf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Qv extends Qf{}async function Yv(e,t,r){Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Tr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Qv(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Tr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Xv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Yf(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Zv(e){return parseInt(e,16)}function ex(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function tx(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:h,uri:f,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=Yf(e.address),x=h?`${h}://${n}`:n,v=e.statement?`${e.statement}
`:"",w=`${x} wants you to sign in with your Ethereum account:
${y}

${v}`;let m=`URI: ${f}
Version: ${p}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(m+=`
Expiration Time: ${s.toISOString()}`),l&&(m+=`
Not Before: ${l.toISOString()}`),c&&(m+=`
Request ID: ${c}`),u){let d=`
Resources:`;for(const g of u){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);d+=`
- ${g}`}m+=d}return`${w}
${m}`}class ce extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Ii extends ce{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function rx({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ce({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ce({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ce({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ce({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ce({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ce({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ce({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ce({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(Xf(o)){if(i.rp.id!==o)return new ce({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ce({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ce({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ce({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ce({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function nx({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ce({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ce({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Xf(n)){if(r.rpId!==n)return new ce({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ce({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ce({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ce({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class sx{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const ix=new sx;function ax(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=na(e,["challenge","user","excludeCredentials"]),i=tn(t).buffer,o=Object.assign(Object.assign({},r),{id:tn(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:tn(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function ox(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=na(e,["challenge","allowCredentials"]),s=tn(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:tn(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function lx(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:hr(new Uint8Array(e.response.attestationObject)),clientDataJSON:hr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function cx(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:hr(new Uint8Array(s.authenticatorData)),clientDataJSON:hr(new Uint8Array(s.clientDataJSON)),signature:hr(new Uint8Array(s.signature)),userHandle:s.userHandle?hr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Xf(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function qu(){var e,t;return!!(we()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function ux(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ii("Browser returned unexpected credential type",t)}:{data:null,error:new Ii("Empty credential response",t)}}catch(t){return{data:null,error:rx({error:t,options:e})}}}async function dx(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ii("Browser returned unexpected credential type",t)}:{data:null,error:new Ii("Empty credential response",t)}}catch(t){return{data:null,error:nx({error:t,options:e})}}}const hx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},fx={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Di(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=Di(l,o):n[i]=Di(o)}else n[i]=o}return n}function px(e,t){return Di(hx,e,t||{})}function mx(e,t){return Di(fx,e,t||{})}class gx{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=s??ix.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=px(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:f}=await ux({publicKey:u,signal:c});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const u=mx(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:f}=await dx(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new lr("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new hs("rpId is required for WebAuthn authentication")};try{if(!qu())return{data:null,error:new lr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new lr("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new hs("rpId is required for WebAuthn registration")};try{if(!qu())return{data:null,error:new lr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new lr("Unexpected error in register",o)}}}}Xv();const yx={url:fv,storageKey:pv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Hu(e,t,r){return await r()}const Fr={};class fs{get jwks(){var t,r;return(r=(t=Fr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Fr[this.storageKey]=Object.assign(Object.assign({},Fr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Fr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Fr[this.storageKey]=Object.assign(Object.assign({},Fr[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},yx),t);if(this.storageKey=i.storageKey,this.instanceID=(r=fs.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,fs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&we()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Jv({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Jf(i.fetch),this.lock=i.lock||Hu,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&we()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Yv:this.lock=Hu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new gx(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Gf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Vu(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Vu(this.memoryStorage)),we()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${qf}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(we()&&(r=Pv(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),we()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),wv(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return O(r)?this._returnResult({error:r}):this._returnResult({error:new lr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ze}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(O(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:h,password:f,options:p}=t;let y=null,x=null;this.flowType==="pkce"&&([y,x]=await Pr(this.storage,this.storageKey)),i=await D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:y,code_challenge_method:x},xform:Ze})}else if("phone"in t){const{phone:h,password:f,options:p}=t;i=await D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Ze})}else throw new Vs("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await xe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await xe(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await D(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Mu})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await D(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Mu})}else throw new Vs("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Cr;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,c,u,h,f,p;let y,x;if("message"in t)y=t.message,x=t.signature;else{const{chain:v,wallet:w,statement:m,options:d}=t;let g;if(we())if(typeof w=="object")g=w;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")g=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(d!=null&&d.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=w}const b=new URL((r=d==null?void 0:d.url)!==null&&r!==void 0?r:window.location.href),N=await g.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=Yf(N[0]);let j=(n=d==null?void 0:d.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!j){const F=await g.request({method:"eth_chainId"});j=Zv(F)}const S={domain:b.host,address:k,statement:m,uri:b.href,version:"1",chainId:j,nonce:(s=d==null?void 0:d.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=d==null?void 0:d.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=d==null?void 0:d.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=d==null?void 0:d.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=d==null?void 0:d.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=d==null?void 0:d.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=tx(S),x=await g.request({method:"personal_sign",params:[ex(y),k]})}try{const{data:v,error:w}=await D(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:x},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ze});if(w)throw w;if(!v||!v.session||!v.user){const m=new Cr;return this._returnResult({data:{user:null,session:null},error:m})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:w})}catch(v){if(O(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var r,n,s,i,o,l,c,u,h,f,p,y;let x,v;if("message"in t)x=t.message,v=t.signature;else{const{chain:w,wallet:m,statement:d,options:g}=t;let b;if(we())if(typeof m=="object")b=m;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))b=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=m}const N=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const k=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),d?{statement:d}:null));let j;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")j=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)j=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)x=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),v=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${N.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...d?["",d,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((f=(h=g==null?void 0:g.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...g.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const k=await b.signMessage(new TextEncoder().encode(x),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=k}}try{const{data:w,error:m}=await D(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:hr(v)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ze});if(m)throw m;if(!w||!w.session||!w.user){const d=new Cr;return this._returnResult({data:{user:null,session:null},error:d})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:m})}catch(w){if(O(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const r=await nr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new bv;const{data:i,error:o}=await D(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ze});if(await xe(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Cr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await xe(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await D(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ze}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const h=new Cr;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Pr(this.storage,this.storageKey));const{error:f}=await D(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:h}=await D(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new Vs("You must provide either an email or phone number.")}catch(l){if(await xe(this.storage,`${this.storageKey}-code-verifier`),O(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await D(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ze});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(O(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Pr(this.storage,this.storageKey));const u=await D(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:Hv});return!((i=u.data)===null||i===void 0)&&i.url&&we()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await xe(this.storage,`${this.storageKey}-code-verifier`),O(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ue;const{error:s}=await D(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(O(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await D(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await D(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Vs("You must provide either an email or phone number and a type")}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await nr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<La:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await nr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Ba()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=Mv(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await D(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ot}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ue}:await D(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ot})})}catch(r){if(O(r))return Ua(r)&&(await this._removeSession(),await xe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ue;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Pr(this.storage,this.storageKey));const{data:u,error:h}=await D(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ot});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await xe(this.storage,`${this.storageKey}-code-verifier`),O(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ue;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Hs(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(O(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ue;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!we())throw new qs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new qs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Iu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Iu("No code detected.");const{data:d,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:d.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new qs("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(l);let p=h+f;c&&(p=parseInt(c));const y=p-h;y*1e3<=Or&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${f}s`);const x=p-f;h-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,p,h):h-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,p,h);const{data:v,error:w}=await this._getUser(i);if(w)throw w;const m={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:p,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:t.type},error:null})}catch(n){if(O(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await nr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i&&!Ua(i))return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(xv(l)&&(l.status===404||l.status===401||l.status===403)||Ua(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await xe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Cv(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Pr(this.storage,this.storageKey,!0));try{return await D(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await xe(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,h;const{data:f,error:p}=i;if(p)throw p;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await D(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return we()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(O(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:c,access_token:u,nonce:h}=t,f=await D(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ze}),{data:p,error:y}=f;return y?this._returnResult({data:{user:null,session:null},error:y}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Cr}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:y}))}catch(s){if(await xe(this.storage,`${this.storageKey}-code-verifier`),O(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await D(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Fv(async s=>(s>0&&await Tv(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await D(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ze})),(s,i)=>{const o=200*Math.pow(2,s);return i&&za(i)&&Date.now()+o-n<Or})}catch(n){if(this._debug(r,"error",n),O(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),we()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await nr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await nr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Ir(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Ba()}else if(s&&!s.user&&!s.user){const o=await nr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await xe(this.storage,this.storageKey+"-user"),await Ir(this.storage,this.storageKey,s)):s.user=Ba()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<La;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${La}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),za(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ue;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new aa;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ue;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),O(i)){const o={data:null,error:i};return za(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await xe(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ir(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=zu(s);await Ir(this.storage,this.storageKey,i)}else{const s=zu(r);await Ir(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await xe(this.storage,this.storageKey),await xe(this.storage,this.storageKey+"-code-verifier"),await xe(this.storage,this.storageKey+"-user"),this.userStorage&&await xe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&we()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Or);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Or);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Or}ms, refresh threshold is ${Qo} ticks`),s<=Qo&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Qf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!we()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Pr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await D(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await D(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?lx(t.webauthn.credential_response):cx(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await D(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await D(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:ax(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:ox(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,s,i;if(t)try{const{payload:y}=Hs(t);let x=null;y.aal&&(x=y.aal);let v=x;const{data:{user:w},error:m}=await this.getUser(t);if(m)return this._returnResult({data:null,error:m});((n=(r=w==null?void 0:w.factors)===null||r===void 0?void 0:r.filter(b=>b.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(v="aal2");const g=y.amr||[];return{data:{currentLevel:x,nextLevel:v,currentAuthenticationMethods:g},error:null}}catch(y){if(O(y))return this._returnResult({data:null,error:y});throw y}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Hs(o.access_token);let u=null;c.aal&&(u=c.aal);let h=u;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(y=>y.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const p=c.amr||[];return{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await D(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ue})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ue});const o=await D(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&we()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ue});const o=await D(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&we()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await D(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ue})})}catch(t){if(O(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await D(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ue})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+yv>s)return n;const{data:i,error:o}=await D(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:y,error:x}=await this.getSession();if(x||!y.session)return this._returnResult({data:null,error:x});n=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Hs(n);r!=null&&r.allowExpired||Uv(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const h=zv(s.alg),f=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,o,Sv(`${l}.${c}`)))throw new Zo("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}}fs.nextInstanceID={};const vx=fs,xx="2.93.1";let Tn="";typeof Deno<"u"?Tn="deno":typeof document<"u"?Tn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Tn="react-native":Tn="node";function wx(){const e=globalThis.process;if(e&&e.platform){const t=e.platform;if(t==="darwin")return"macOS";if(t==="win32")return"Windows";if(t==="linux")return"Linux";if(t==="android")return"Android"}if(typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platform){const t=navigator.userAgentData.platform;if(t==="macOS")return"macOS";if(t==="Windows")return"Windows";if(t==="Linux")return"Linux";if(t==="Android")return"Android";if(t==="iOS")return"iOS"}return null}function bx(){const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node&&typeof window>"u")try{const r=globalThis.require;if(r)return r("os").release()}catch{return null}}if(typeof Deno<"u"&&Deno.osRelease)try{return Deno.osRelease()}catch{return null}return typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platformVersion?navigator.userAgentData.platformVersion:null}function _x(){if(typeof Deno<"u")return"deno";if(typeof Bun<"u")return"bun";const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return"node"}return null}function jx(){if(typeof Deno<"u"&&Deno.version)return Deno.version.deno;if(typeof Bun<"u"&&Bun.version)return Bun.version;const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return t.node}return null}function kx(){const e={"X-Client-Info":`supabase-js-${Tn}/${xx}`},t=wx();t&&(e["X-Supabase-Client-Platform"]=t);const r=bx();r&&(e["X-Supabase-Client-Platform-Version"]=r);const n=_x();n&&(e["X-Supabase-Client-Runtime"]=n);const s=jx();return s&&(e["X-Supabase-Client-Runtime-Version"]=s),e}const Nx=kx(),Sx={headers:Nx},Ex={schema:"public"},Cx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Px={};function ps(e){"@babel/helpers - typeof";return ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ps(e)}function Ax(e,t){if(ps(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ps(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tx(e){var t=Ax(e,"string");return ps(t)=="symbol"?t:t+""}function Fx(e,t,r){return(t=Tx(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ku(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ku(Object(r),!0).forEach(function(n){Fx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ku(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Rx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Ox=()=>Headers,Ix=(e,t,r)=>{const n=Rx(r),s=Ox();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,ne(ne({},o),{},{headers:u}))}};function Dx(e){return e.endsWith("/")?e:e+"/"}function $x(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:h,global:f}=t,p={db:ne(ne({},c),s),auth:ne(ne({},u),i),realtime:ne(ne({},h),o),storage:{},global:ne(ne(ne({},f),l),{},{headers:ne(ne({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function Lx(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Dx(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Ux=class extends vx{constructor(e){super(e)}},zx=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=Lx(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:Ex,realtime:Px,auth:ne(ne({},Cx),{},{storageKey:o}),global:Sx},c=$x(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=Ix(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(ne({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new vy(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new hv(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new fy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:u},h,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ux({url:this.authUrl.href,headers:ne(ne({},p),h),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Iy(this.realtimeUrl.href,ne(ne({},e),{},{params:ne(ne({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Bx=(e,t,r)=>new zx(e,t,r);function Mx(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Mx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Wx="https://hoieogginmsfmoarubuu.supabase.co",Vx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhvaWVvZ2dpbm1zZm1vYXJ1YnV1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3ODM0OTEsImV4cCI6MjA4MTM1OTQ5MX0.5HAcivBIN_fv06Qs4iRjKDNowN204aucVKiwqQBVtkw",A=Bx(Wx,Vx);async function qx(e){const t=e.trim();if(!t)return{products:[],categories:[]};try{const{data:r,error:n}=await A.from("products").select("id, name, slug, price, short_description, view_count, search_hit_count, published").eq("published",!0).or(`name.ilike.%${t}%,slug.ilike.%${t}%`).limit(10);n&&console.error("Error searching products:",n);const{data:s,error:i}=await A.from("categories").select("id, name, slug, parent_id").or(`name.ilike.%${t}%,slug.ilike.%${t}%`).limit(10);return i&&console.error("Error searching categories:",i),{products:r||[],categories:s||[]}}catch(r){return console.error("Unexpected error during search:",r),{products:[],categories:[]}}}async function Gu(e){const t=e.trim().toLowerCase();try{const{error:r}=await A.from("popular_searches").upsert({query:t,search_count:1,last_searched_at:new Date().toISOString()},{onConflict:"query"});r&&console.error("Error recording search analytics:",r)}catch(r){console.error("Unexpected error recording search analytics:",r)}}async function Ju(e,t){try{const{error:r}=await A.from("popular_categories").upsert({category_id:e,category_name:t,search_count:1,last_searched_at:new Date().toISOString()},{onConflict:"category_id"});r&&console.error("Error recording category analytics:",r)}catch(r){console.error("Unexpected error recording category analytics:",r)}}async function Hx(e){try{const{data:t,error:r}=await A.from("products").select("search_hit_count").eq("id",e).single();if(r){console.error("Error fetching product search hit count:",r);return}const n=(t==null?void 0:t.search_hit_count)||0,{error:s}=await A.from("products").update({search_hit_count:n+1}).eq("id",e);s&&console.error("Error incrementing product search hit count:",s)}catch(t){console.error("Unexpected error incrementing search hit count:",t)}}async function Kx(e){try{const{data:t,error:r}=await A.from("products").select("view_count").eq("id",e).single();if(r){console.error("Error fetching product view count:",r);return}const n=(t==null?void 0:t.view_count)||0,{error:s}=await A.from("products").update({view_count:n+1}).eq("id",e);s&&console.error("Error incrementing product view count:",s)}catch(t){console.error("Unexpected error incrementing view count:",t)}}function Qu(){const[e,t]=_.useState(""),[r,n]=_.useState(!1),[s,i]=_.useState(!1),[o,l]=_.useState([]),[c,u]=_.useState([]),h=_.useRef(null),f=ve();_.useEffect(()=>{function d(g){h.current&&!h.current.contains(g.target)&&i(!1)}return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),_.useEffect(()=>{const d=setTimeout(async()=>{const g=e.trim();if(g.length===0){i(!1),l([]),u([]);return}n(!0);try{const b=await qx(g);l(b.products),u(b.categories),i(!0)}catch(b){console.error("Search failed:",b),l([]),u([])}finally{n(!1)}},300);return()=>clearTimeout(d)},[e]);const p=async()=>{const d=e.trim();if(!d){i(!1);return}if(!(o.length>0||c.length>0)){console.log("Search query has no results:",d);return}if(await Gu(d),c.length>0){const b=c[0];await Ju(b.id,b.name),f(`/shop?category=${encodeURIComponent(b.slug)}`),i(!1),t("");return}if(o.length>0){const b=o[0];await Hx(b.id),f(`/product/${b.slug}`),i(!1),t("");return}},y=d=>{d.key==="Enter"&&(d.preventDefault(),p())},x=async d=>{Kx(d.id).catch(g=>{console.error("Failed to increment view count, but navigation will proceed:",g)}),f(`/product/${d.slug}`),i(!1),t("")},v=async d=>{await Ju(d.id,d.name);const g=e.trim();g&&await Gu(g),f(`/shop?category=${encodeURIComponent(d.slug)}`),i(!1),t("")},w=()=>{t(""),l([]),u([]),i(!1)},m=o.length>0||c.length>0;return a.jsxs("div",{ref:h,className:"relative w-full max-w-md",children:[a.jsxs("div",{className:"relative flex items-center",children:[a.jsx(Ff,{className:"absolute left-3 h-5 w-5 text-slate-400",strokeWidth:1.5}),a.jsx("input",{type:"text",placeholder:"Search products or categories...",value:e,onChange:d=>t(d.target.value),onKeyDown:y,onFocus:()=>e.trim()&&i(!0),className:"w-full pl-10 pr-10 py-2 bg-white/80 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent placeholder-slate-500"}),a.jsx("div",{className:"absolute right-3",children:r?a.jsx(ju,{className:"h-5 w-5 text-blue-500 animate-spin",strokeWidth:2}):e&&a.jsx("button",{onClick:w,className:"text-slate-400 hover:text-slate-600 transition-colors","aria-label":"Clear search",children:a.jsx(ft,{className:"h-5 w-5",strokeWidth:2})})})]}),s&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-slate-200 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:[r&&a.jsxs("div",{className:"p-4 text-center text-slate-500",children:[a.jsx(ju,{className:"h-5 w-5 animate-spin mx-auto mb-2",strokeWidth:2}),"Searching..."]}),!r&&!m&&e.trim()&&a.jsxs("div",{className:"p-4 text-center text-slate-500",children:['No products or categories found for "',e,'"']}),!r&&m&&a.jsxs(a.Fragment,{children:[o.length>0&&a.jsxs("div",{className:"border-b border-slate-200",children:[a.jsx("div",{className:"px-4 py-2 bg-slate-50 text-xs font-semibold text-slate-600 uppercase",children:"Products"}),o.map(d=>a.jsx("button",{onClick:()=>x(d),className:"w-full text-left px-4 py-3 hover:bg-slate-100 transition-colors border-b border-slate-100 last:border-b-0",children:a.jsxs("div",{className:"flex gap-3 items-start",children:[a.jsx("div",{className:"h-12 w-12 bg-slate-200 rounded flex-shrink-0 flex items-center justify-center text-xs text-slate-500",children:"Image"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-sm text-slate-900 truncate",children:d.name}),d.short_description&&a.jsx("p",{className:"text-xs text-slate-600 truncate",children:d.short_description}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsxs("span",{className:"font-bold text-blue-600",children:["$",d.price.toFixed(2)]}),d.category_name&&a.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:d.category_name})]})]})]})},d.id))]}),c.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"px-4 py-2 bg-slate-50 text-xs font-semibold text-slate-600 uppercase",children:"Categories"}),c.map(d=>a.jsxs("button",{onClick:()=>v(d),className:"w-full text-left px-4 py-3 hover:bg-slate-100 transition-colors border-b border-slate-100 last:border-b-0",children:[a.jsx("h4",{className:"font-semibold text-sm text-slate-900",children:d.name}),d.parent_id&&a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Subcategory"})]},d.id))]})]})]})]})}function Gx({cartItemCount:e}){const[t,r]=_.useState(!1),[n,s]=_.useState(!1),[i,o]=_.useState(null),l=_r(),c=ve();_.useEffect(()=>{A.auth.getSession().then(({data:{session:g}})=>{o((g==null?void 0:g.user)??null)});const{data:{subscription:d}}=A.auth.onAuthStateChange((g,b)=>{o((b==null?void 0:b.user)??null)});return()=>d.unsubscribe()},[]);const u=[{label:"All Products",value:"All"},{label:"Cosmetics",value:"Cosmetics"},{label:"Construction",value:"Construction"},{label:"Furniture",value:"Furniture"},{label:"Clothing and Fashion",value:"Clothing and Fashion"},{label:"Events Tools",value:"Events Tools"},{label:"Electrical Appliances",value:"Electrical Appliances"}],h=[{name:"Home",path:"/"},{name:"About",path:"/about"},{name:"Login",path:"/login"}],f=l.pathname.startsWith("/account"),p=f?"sticky top-0 z-50 w-full bg-[#0A0A0A] border-b border-white/10":"sticky top-0 z-50 w-full bg-white/30 backdrop-blur-md border-b border-[#f0f0f0]",y=f?"text-white":"text-slate-900",x=f?"text-white/60":"text-slate-900/70",v=f?"hover:bg-white/10":"hover:bg-slate-100",w=f?"hover:text-white":"hover:text-black",m=f?"bg-[#0A0A0A] border-t border-white/10":"bg-white/20";return a.jsxs("header",{className:p,children:[a.jsx("div",{className:"flex justify-center w-full",children:a.jsxs("div",{className:"flex justify-between w-full max-w-[1280px] items-center px-4 sm:px-6 md:px-8 lg:px-10 py-5 gap-4 sm:gap-6 md:gap-8",children:[a.jsxs(Kt,{to:"/",className:"flex items-center gap-2 cursor-pointer no-underline flex-shrink-0",children:[a.jsx("div",{className:`flex items-center justify-center size-8 rounded-full transition-colors ${f?"bg-white/10":"bg-black"}`,children:a.jsx(X0,{size:20,strokeWidth:2,className:"text-white"})}),a.jsx("h2",{className:`${y} text-lg sm:text-xl font-extrabold tracking-tight transition-colors whitespace-nowrap`,style:{fontFamily:"Flowmery"},children:"My Super Store"})]}),a.jsxs("nav",{style:{display:window.innerWidth>=768?"flex":"none",gap:"24px",marginLeft:"48px"},className:"items-center relative",children:[h.map(d=>a.jsx(Kt,{to:d.path,className:`transition-all text-sm font-semibold tracking-wide no-underline ${f?"text-white 70 drop-shadow-[0_0_8px_rgba(255,255,255,0.5)] hover:text-white hover:drop-shadow-[0_0_16px_rgba(255,255,255,0.8)]":`${x} ${w} text-slate-900 drop-shadow-[0_0_8px_rgba(15,23,42,0.3)] hover:drop-shadow-[0_0_16px_rgba(15,23,42,0.6)]`}`,children:d.name},d.name)),a.jsxs("div",{className:"relative group",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[a.jsxs("button",{className:`flex items-center gap-1 ${x} ${w} transition-colors text-sm font-semibold tracking-wide`,children:["Shop",a.jsx(Yl,{size:16,className:`transition-transform duration-300 ${n?"rotate-180":""}`})]}),n&&a.jsx("div",{className:`absolute top-full left-0 mt-2 w-56 rounded-lg shadow-lg z-50 backdrop-blur-md ${f?"bg-[#0A0A0A]/80 border border-white/10":"bg-white/30 border border-white/20"}`,children:u.map(d=>a.jsx("button",{onClick:()=>{c(`/shop?category=${d.value}`),s(!1)},className:`w-full text-left px-4 py-3 transition-all ${f?"text-white/70 hover:text-white hover:bg-white/10 first:rounded-t-lg last:rounded-b-lg":"text-slate-900/20 hover:text-slate-900 hover:bg-slate-100/20 first:rounded-t-lg last:rounded-b-lg"} text-sm font-medium`,children:d.label},d.value))})]})]}),a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 md:gap-5 ml-auto",children:[a.jsx("button",{onClick:()=>c(i?"/account":"/login"),className:`flex items-center justify-center size-10 rounded-full ${v} transition-colors ${y}`,children:a.jsx($f,{size:20,strokeWidth:2})}),a.jsxs("button",{onClick:()=>c("/cart"),className:`flex items-center justify-center size-10 rounded-full ${v} transition-colors ${y} relative`,children:[a.jsx(Ri,{size:20,strokeWidth:2}),e>0&&a.jsx("span",{className:"absolute top-2 right-2 size-2 bg-[#d4af37] rounded-full"})]})]}),a.jsx("button",{className:" md:hidden items-center justify-center ml-2 sm:ml-3",onClick:()=>r(!t),children:t?a.jsx(ft,{size:24,className:y}):a.jsx(iy,{size:24,className:y})})]})}),a.jsx("div",{className:`hidden md:block w-full border-b ${f?"border-white/10":"border-[#f0f0f0]"}`,children:a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("div",{className:"w-full max-w-[1280px] px-4 sm:px-6 md:px-8 lg:px-10 py-3",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-full max-w-2xl",children:a.jsx(Qu,{})})})})})}),t&&a.jsx("div",{className:m,children:a.jsx("nav",{className:"flex justify-center w-full",children:a.jsxs("div",{className:"w-full max-w-[1280px] flex flex-col p-6 gap-4 px-6 lg:px-10",children:[a.jsx("div",{className:"mb-2",children:a.jsx(Qu,{})}),h.map(d=>a.jsx(Kt,{to:d.path,onClick:()=>r(!1),className:`${y} ${w} text-lg py-2 transition-colors font-semibold no-underline`,children:d.name},d.name)),a.jsxs("div",{className:"border-t border-white/10 pt-4 mt-4",children:[a.jsx("p",{className:`${y} text-sm font-semibold mb-3`,children:"Shop by Category"}),u.map(d=>a.jsx("button",{onClick:()=>{c(`/shop?category=${d.value}`),r(!1)},className:`w-full text-left px-3 py-2 ${x} ${w} transition-colors text-sm font-medium no-underline`,children:d.label},d.value))]})]})})})]})}function Jx(){return a.jsxs("footer",{className:"site-footer",children:[a.jsxs("div",{className:"footer-grid",children:[a.jsxs("div",{children:[a.jsx("div",{className:"footer-brand",children:"MY SUPERSTORE"}),a.jsx("p",{className:"text-muted",style:{lineHeight:"1.6"},children:"Curating excellence in luxury fashion and accessories since 2025."})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"footer-heading",children:"Shop"}),a.jsxs("ul",{className:"footer-links",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"footer-link",children:"New Arrivals"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"footer-link",children:"Best Sellers"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"footer-link",children:"Collections"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"footer-link",children:"Sale"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"footer-heading",children:"Support"}),a.jsxs("ul",{className:"footer-links",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"footer-link",children:"Contact Us"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"footer-link",children:"Shipping Info"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"footer-link",children:"Returns"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"footer-link",children:"FAQ"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"footer-heading",children:"Connect"}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("a",{href:"#",className:"text-muted hover:text-[#FFE55C] transition-colors",children:a.jsx(ty,{size:24,strokeWidth:2.5})}),a.jsx("a",{href:"#",className:"text-muted hover:text-[#FFE55C] transition-colors",children:a.jsx(Y0,{size:24,strokeWidth:2.5})}),a.jsx("a",{href:"#",className:"text-muted hover:text-[#FFE55C] transition-colors",children:a.jsx(ly,{size:24,strokeWidth:2.5})})]})]})]}),a.jsxs("div",{className:"footer-bottom",children:[a.jsx("p",{children:" 2025 LUXE. All rights reserved."}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("a",{href:"#",className:"footer-link",children:"Privacy Policy"}),a.jsx("a",{href:"#",className:"footer-link",children:"Terms of Service"})]})]})]})}function Qx({category:e,products:t}){const r=ve(),[n,s]=_.useState(0),i=t.filter(u=>u.category===e.name&&u.image&&u.image.trim()!==""),o=i[n];_.useEffect(()=>{if(i.length<=1)return;const u=setInterval(()=>{s(h=>(h+1)%i.length)},3e3);return()=>clearInterval(u)},[i.length]);const l=u=>{u.stopPropagation(),s(h=>h-1<0?i.length-1:h-1)},c=u=>{u.stopPropagation(),s(h=>(h+1)%i.length)};return a.jsxs("button",{onClick:()=>r(`/shop?category=${e.name}`),className:"group relative rounded-[20px] overflow-hidden cursor-pointer transition-all duration-500 hover:scale-105 hover:-translate-y-2 bg-white border-2 border-[rgba(212,175,55,0.3)] hover:border-[rgba(212,175,55,0.8)] w-full h-full flex flex-col",children:[a.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] rounded-[20px] opacity-0 group-hover:opacity-20 blur transition-opacity duration-500 -z-10"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#FFE55C]/20 via-[#D4AF37]/10 to-[#B8941F]/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),a.jsxs("div",{className:"relative h-44 bg-transparent overflow-hidden flex items-center justify-center border-b-2 border-[rgba(212,175,55,0.2)]",children:[o&&o.image?a.jsx("img",{src:o.image,alt:o.name,loading:"lazy",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},className:"w-full h-full transition-opacity duration-700 p-2"}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-slate-200 to-slate-300 flex items-center justify-center",children:a.jsx("span",{className:"text-slate-400 text-sm",children:"No images"})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),i.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:l,className:"absolute left-3 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white rounded-full p-2 opacity-0 group-hover:opacity-100 transition-all duration-300 z-10 hover:shadow-[0_4px_12px_rgba(212,175,55,0.3)]",children:a.jsx("svg",{className:"w-4 h-4 text-[#0F0F0F]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{onClick:c,className:"absolute right-3 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white rounded-full p-2 opacity-0 group-hover:opacity-100 transition-all duration-300 z-10 hover:shadow-[0_4px_12px_rgba(212,175,55,0.3)]",children:a.jsx("svg",{className:"w-4 h-4 text-[#0F0F0F]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})}),a.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-0.5 md:gap-1.5 z-10",children:i.map((u,h)=>a.jsx("div",{onClick:f=>{f.stopPropagation(),s(h)},className:`rounded-full transition-all duration-300 cursor-pointer ${h===n?"w-[14px] h-[5px] md:w-7 md:h-2 bg-gradient-to-r from-[#FFD700] via-[#FFA500] to-[#FFD700] shadow-[0_0_8px_rgba(255,215,0,0.8),0_0_12px_rgba(255,165,0,0.6)]":"bg-white/60 hover:bg-white/80 w-[3px] h-[3px] md:w-2 md:h-2"}`},h))})]})]}),a.jsx("div",{className:"relative bg-white px-5 py-4 group-hover:bg-gradient-to-r group-hover:from-[#FFE55C] group-hover:via-[#D4AF37] group-hover:to-[#B8941F] transition-all duration-500 flex-grow flex flex-col justify-center",children:a.jsxs("div",{className:"flex justify-between items-center w-full",children:[a.jsx("span",{className:"font-bold text-[#0F0F0F] group-hover:text-[#050505] transition-colors text-base",children:e.name}),i.length>0&&a.jsx("span",{className:"text-xs font-semibold text-[#B8941F] group-hover:text-[#050505] transition-colors bg-[rgba(212,175,55,0.1)] px-2 py-1 rounded-md",children:i.length})]})})]})}function Yu({product:e,delay:t=0,isTrending:r=!1}){const n=ve();return a.jsxs("div",{className:"group relative bg-white rounded-[20px] border-2 border-[rgba(212,175,55,0.3)] overflow-hidden cursor-pointer transition-all duration-500 hover:border-[rgba(212,175,55,0.8)] hover:shadow-[0_20px_50px_rgba(212,175,55,0.25),inset_0_0_30px_rgba(212,175,55,0.1)] flex flex-col h-full",style:{animation:`slideUp 0.6s ease-out ${t}s both`},onClick:()=>n(`/shop/${e.id}`),children:[a.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] rounded-[20px] opacity-0 group-hover:opacity-20 blur transition-opacity duration-500 -z-10"}),r&&a.jsx("div",{className:"absolute top-4 right-4 z-20 animate-gold-glow",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-[#FFE55C]/60 to-[#D4AF37]/40 rounded-full blur-lg opacity-60 group-hover:opacity-100 transition-opacity duration-300 animate-pulse-glow"}),a.jsx("div",{className:"relative bg-gradient-to-r from-[#FFE55C] via-[#F4E04D] to-[#D4AF37] px-3 py-1.5 rounded-full text-[0.65rem] font-extrabold text-[#050505] uppercase tracking-wider shadow-[0_4px_12px_rgba(212,175,55,0.4)] border border-[rgba(255,248,220,0.6)] hover:shadow-[0_6px_16px_rgba(212,175,55,0.6)]",children:" Trending"})]})}),a.jsxs("div",{className:"relative w-full h-48 bg-transparent overflow-hidden border-b-2 border-[rgba(212,175,55,0.2)]",children:[e.image?a.jsx("img",{src:e.image,alt:e.name,loading:"lazy",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},className:"w-full h-full transition-opacity duration-700"}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-slate-200 to-slate-300 flex items-center justify-center",children:a.jsx("span",{className:"text-slate-400 text-sm",children:"No image"})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),a.jsxs("div",{className:"p-5 flex flex-col gap-3 flex-grow",children:[a.jsx("span",{className:"text-[0.7rem] font-extrabold text-[#D4AF37] uppercase tracking-widest bg-[rgba(212,175,55,0.15)] px-2 py-1 rounded-md inline-block w-fit",children:e.category.toUpperCase()}),a.jsx("p",{className:"font-bold text-[#0F0F0F] line-clamp-2 text-sm leading-tight transition-all duration-300 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-[#FFE55C] group-hover:via-[#D4AF37] group-hover:to-[#B8941F]",children:e.name}),a.jsxs("p",{className:"text-xl font-extrabold bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] bg-clip-text text-transparent mt-auto",children:["$",e.price.toFixed(2)]})]}),a.jsx("div",{className:"px-5 pb-5",children:a.jsx("button",{className:"w-full bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] text-[#050505] font-extrabold py-3 rounded-[12px] opacity-0 translate-y-3 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-400 hover:shadow-[0_12px_24px_rgba(212,175,55,0.35)] transform group-hover:scale-100 scale-95 active:scale-95",children:"Add to Cart"})})]})}const Xu=()=>a.jsxs("div",{className:"bg-white rounded-[20px] border-2 border-[rgba(212,175,55,0.2)] overflow-hidden h-full flex flex-col",children:[a.jsx("div",{className:"aspect-[4/5] bg-gradient-to-r from-[#F0F0F0] via-[#E8E8E8] to-[#F0F0F0] animate-shimmer"}),a.jsxs("div",{className:"p-5 space-y-3 flex-grow",children:[a.jsx("div",{className:"h-4 bg-[#E0E0E0] rounded-md w-3/4"}),a.jsx("div",{className:"h-3 bg-[#E8E8E8] rounded-md w-full"}),a.jsx("div",{className:"h-6 bg-gradient-to-r from-[#F0F0F0] to-[#E8E8E8] rounded-md w-1/2 mt-auto"})]})]});function Ks({title:e,products:t,categoryName:r,index:n,loading:s,productsPerSection:i}){const o=ve(),l=["from-[rgba(255,229,92,0.05)] via-white to-[rgba(212,175,55,0.03)]","from-white via-[rgba(255,229,92,0.04)] to-white","from-[rgba(212,175,55,0.05)] via-white to-[rgba(255,229,92,0.04)]","from-white to-[rgba(212,175,55,0.04)]"],c=l[n%l.length],u=e.split(" "),h=u[0],f=u.slice(1).join(" ");return a.jsxs("section",{className:`bg-gradient-to-b ${c} relative overflow-hidden`,children:[a.jsx("div",{className:"absolute top-0 left-0 w-[500px] h-[500px] bg-gradient-to-br from-[#FFE55C]/10 to-[#D4AF37]/5 rounded-full filter blur-3xl -z-10"}),a.jsx("div",{className:"absolute bottom-0 right-0 w-[500px] h-[500px] bg-gradient-to-tl from-[#D4AF37]/5 to-[#FFE55C]/10 rounded-full filter blur-3xl -z-10"}),a.jsx("div",{className:"h-[2px] bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent opacity-50"}),a.jsx("div",{className:"bg-black px-6 lg:px-10 py-6 border-t-2 border-[#D4AF37] relative",children:a.jsxs("div",{className:"max-w-[1280px] mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-5xl text-white drop-shadow-lg",style:{filter:"drop-shadow(0 0 12px rgba(212, 175, 55, 0.8)) drop-shadow(0 0 20px rgba(212, 175, 55, 0.5))"},children:h}),a.jsx("h2",{className:"text-4xl font-extrabold bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] bg-clip-text text-transparent",children:f})]}),a.jsxs("button",{onClick:()=>o(`/shop${r?`?category=${r}`:""}`),className:"text-base font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] hover:opacity-80 transition-all flex items-center gap-2 group",children:["See all",a.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]})]}),a.jsx("div",{className:"h-[3px] w-full bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] rounded-full shadow-lg shadow-[#D4AF37]/30 mt-4"})]})}),a.jsx("div",{className:"h-[2px] bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent opacity-50"}),a.jsx("div",{className:"py-16",children:a.jsxs("div",{className:"max-w-[1280px] mx-auto px-6 lg:px-10 relative z-10",children:[a.jsx("div",{className:" md:block",children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-6 lg:gap-8",children:s?Array.from({length:i}).map((p,y)=>a.jsx(Xu,{},y)):t.length>0?t.map((p,y)=>a.jsx(Yu,{product:p,delay:y*.05,isTrending:n===0},p.id)):a.jsx("div",{className:"col-span-full text-center py-12",children:a.jsx("p",{className:"text-[#B8941F] text-lg",children:"No products found"})})})}),a.jsx("div",{className:"md:hidden overflow-x-auto scrollbar-hide pb-4 -mx-6 px-6",children:a.jsx("div",{className:"flex gap-4 min-w-min",children:s?Array.from({length:i}).map((p,y)=>a.jsx("div",{className:"w-[70vw] sm:w-[50vw] flex-shrink-0",children:a.jsx(Xu,{})},y)):t.length>0?t.map((p,y)=>a.jsx("div",{className:"w-[70vw] sm:w-[50vw] flex-shrink-0",children:a.jsx(Yu,{product:p,delay:y*.05,isTrending:n===0})},p.id)):a.jsx("div",{className:"w-full text-center py-12",children:a.jsx("p",{className:"text-[#B8941F]",children:"No products found"})})})})]})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[2px] bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent opacity-50"})]})}const Ct=8;function Zu(){const e=ve(),[t,r]=_.useState([]),[n,s]=_.useState([]),[i,o]=_.useState([]),[l,c]=_.useState([]),[u,h]=_.useState([]),[f,p]=_.useState([]),[y,x]=_.useState(!0),v=_.useRef(Math.random()),w=async()=>{try{x(!0);const{data:g,error:b}=await A.from("products").select(`
          *,
          product_images ( url, alt_text, position ),
          product_categories (
            categories ( name )
          ),
          product_specs ( spec_key, spec_value )
        `).eq("published",!0).order("created_at",{ascending:!1});if(b)throw b;const N=(g==null?void 0:g.map(k=>{var j,S,F,C,I,V;return{id:k.id,name:k.name,price:k.price,stock:k.stock||0,brand:k.brand,sku:k.sku,short_description:k.short_description,description:k.description,image:(S=(j=k.product_images)==null?void 0:j.sort((Ce,St)=>Ce.position-St.position)[0])==null?void 0:S.url,product_images:((F=k.product_images)==null?void 0:F.sort((Ce,St)=>Ce.position-St.position))||[],category:((V=(I=(C=k.product_categories)==null?void 0:C[0])==null?void 0:I.categories)==null?void 0:V.name)||"Uncategorized",product_specs:k.product_specs||[],view_count:k.view_count||0}}))||[];return r(N),N}catch(g){return console.error("Error fetching products:",g),[]}finally{x(!1)}},m=async()=>{try{const{data:g,error:b}=await A.from("categories").select("id, name").order("name");if(b)throw b;s(g||[])}catch(g){console.error("Error fetching categories:",g)}},d=g=>{const b=g.filter(C=>C.image&&C.image.trim()!==""),N=[...b].sort((C,I)=>(I.view_count||0)-(C.view_count||0)).slice(0,Ct);o(N);const k=v.current,j=[...b].sort(()=>Math.sin(k*(Math.random()+1))-.5).slice(0,Ct);c(j);const S=b.filter(C=>C.category==="Electrical Appliances").slice(0,Ct);h(S);const F=b.filter(C=>C.category==="Clothing and Fashion").slice(0,Ct);p(F)};return _.useEffect(()=>{(async()=>{await m();const b=await w();d(b)})()},[]),a.jsxs("main",{className:"bg-white",children:[a.jsx("style",{children:`
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes shimmer {
          0% {
            background-position: -1000px 0;
          }
          100% {
            background-position: 1000px 0;
          }
        }

        @keyframes goldGlow {
          0%, 100% {
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3), 0 0 40px rgba(212, 175, 55, 0.1);
          }
          50% {
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.5), 0 0 60px rgba(212, 175, 55, 0.2);
          }
        }

        @keyframes pulse-glow {
          0%, 100% {
            opacity: 1;
          }
          50% {
            opacity: 0.8;
          }
        }

        .animate-shimmer {
          background-size: 200% 100%;
          animation: shimmer 2s infinite;
        }

        .animate-gold-glow {
          animation: goldGlow 3s ease-in-out infinite;
        }

        .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }

        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
      `}),a.jsxs("section",{className:"relative w-full h-[480px] bg-gradient-to-br from-[#0F0F0F] via-[#1A1A1A] to-[#0F0F0F] overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0",children:a.jsx("img",{src:"https://via.placeholder.com/1600x600",alt:"Hero Ad",className:"w-full h-full object-cover opacity-30 group-hover:opacity-40 transition-opacity duration-700"})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#0F0F0F]/90 via-[#1A1A1A]/70 to-[#0F0F0F]/90"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#FFE55C]/10 via-transparent to-[#D4AF37]/5"}),a.jsx("div",{className:"absolute top-0 left-1/4 w-[600px] h-[600px] bg-[#FFE55C] rounded-full mix-blend-screen filter blur-[100px] opacity-10 group-hover:opacity-20 transition-opacity duration-700"}),a.jsx("div",{className:"absolute bottom-0 right-1/4 w-[600px] h-[600px] bg-[#D4AF37] rounded-full mix-blend-screen filter blur-[100px] opacity-10 group-hover:opacity-20 transition-opacity duration-700"}),a.jsx("div",{className:"absolute inset-0 flex items-center px-8 lg:px-16 z-10",children:a.jsxs("div",{className:"max-w-2xl",style:{animation:"slideUp 0.8s ease-out"},children:[a.jsx("div",{className:"inline-block mb-6",children:a.jsx("span",{className:"text-[#FFE55C] text-sm font-extrabold uppercase tracking-widest bg-[rgba(212,175,55,0.1)] px-4 py-2 rounded-full border border-[rgba(212,175,55,0.3)]",children:" Premium Collection"})}),a.jsxs("h1",{className:"text-6xl lg:text-7xl mb-6 leading-tight text-white font-extrabold",style:{fontFamily:"dosis"},children:["Discover ",a.jsx("span",{className:"bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] bg-clip-text text-transparent",children:"Luxury"})]}),a.jsx("p",{className:"text-xl text-[#D0D0D0] mb-10 leading-relaxed opacity-90",children:"Explore our curated collection of premium products. Every item selected for quality, style, and elegance."}),a.jsxs("button",{onClick:()=>e("/shop"),className:"relative group/btn inline-block",children:[a.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] rounded-[14px] opacity-50 group-hover/btn:opacity-100 blur transition duration-500 group-hover/btn:duration-200"}),a.jsx("div",{className:"relative bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] text-[#050505] px-10 py-4 rounded-[12px] font-extrabold text-lg hover:shadow-[0_20px_40px_rgba(212,175,55,0.4)] transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Start Shopping Now"})]})]})})]}),a.jsxs("section",{className:"max-w-[1280px] mx-auto px-6 lg:px-10 py-20",children:[a.jsx("div",{className:"h-[2px] bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent opacity-50 mb-16"}),a.jsxs("div",{className:"mb-12",children:[a.jsx("h2",{className:"text-4xl font-extrabold bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] bg-clip-text text-transparent",style:{fontFamily:"dosis"},children:"Shop by Category"}),a.jsx("div",{className:"h-[3px] w-24 bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] rounded-full mt-4 shadow-lg shadow-[#D4AF37]/30"})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6",children:y?Array.from({length:8}).map((g,b)=>a.jsx("div",{className:"rounded-[16px] h-40 bg-slate-100 animate-pulse"},b)):n.filter(g=>t.some(b=>b.category===g.name&&b.image&&b.image.trim()!=="")).length>0?n.filter(g=>t.some(b=>b.category===g.name&&b.image&&b.image.trim()!=="")).map(g=>a.jsx(Qx,{category:g,products:t},g.id)):a.jsx("p",{className:"col-span-full text-slate-500",children:"No categories with images found"})})]}),a.jsx("section",{className:"w-full bg-gradient-to-b from-[rgba(255,229,92,0.05)] via-white to-[rgba(212,175,55,0.03)] py-12 border-y border-[rgba(212,175,55,0.2)]",children:a.jsx("div",{className:"max-w-[1280px] mx-auto px-6 lg:px-10",children:a.jsxs("div",{className:"relative rounded-[24px] overflow-hidden group cursor-pointer border-2 border-[rgba(212,175,55,0.3)] hover:border-[rgba(212,175,55,0.8)] transition-all duration-500",children:[a.jsx("img",{src:"https://via.placeholder.com/1400x300",alt:"Mid Ad",className:"w-full rounded-[22px] group-hover:scale-110 transition-transform duration-700 brightness-95 group-hover:brightness-105"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#D4AF37]/40 via-transparent to-[#D4AF37]/30 group-hover:from-[#D4AF37]/60 group-hover:via-[#D4AF37]/20 group-hover:to-[#D4AF37]/50 transition-all duration-500 rounded-[22px]"})]})})}),i.length>0&&a.jsx(Ks,{title:" Trending Products",products:i,index:0,loading:y,productsPerSection:Ct}),l.length>0&&a.jsx(Ks,{title:" Recommended For You",products:l,index:1,loading:y,productsPerSection:Ct}),u.length>0&&a.jsx(Ks,{title:" Electronics Picks",products:u,categoryName:"Electrical Appliances",index:2,loading:y,productsPerSection:Ct}),f.length>0&&a.jsx(Ks,{title:" Fashion Essentials",products:f,categoryName:"Clothing and Fashion",index:3,loading:y,productsPerSection:Ct}),a.jsxs("section",{className:"w-full py-20 bg-gradient-to-b from-[#0F0F0F] via-[#1A1A1A] to-[#0F0F0F] relative overflow-hidden group",children:[a.jsx("div",{className:"absolute top-0 left-1/3 w-[500px] h-[500px] bg-[#FFE55C] rounded-full mix-blend-screen filter blur-[100px] opacity-10 group-hover:opacity-20 transition-opacity duration-700"}),a.jsx("div",{className:"absolute bottom-0 right-1/3 w-[500px] h-[500px] bg-[#D4AF37] rounded-full mix-blend-screen filter blur-[100px] opacity-10 group-hover:opacity-20 transition-opacity duration-700"}),a.jsx("div",{className:"max-w-[1280px] mx-auto px-6 lg:px-10 relative z-10",children:a.jsxs("div",{className:"relative rounded-[24px] overflow-hidden group cursor-pointer border-2 border-[rgba(212,175,55,0.3)] hover:border-[rgba(212,175,55,0.8)] transition-all duration-500",children:[a.jsx("img",{src:"https://via.placeholder.com/1600x400",alt:"Bottom Ad",className:"w-full rounded-[22px] group-hover:scale-110 transition-transform duration-700 brightness-75 group-hover:brightness-90"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FFE55C]/50 via-[#D4AF37]/30 to-[#B8941F]/50 group-hover:from-[#FFE55C]/70 group-hover:via-[#D4AF37]/50 group-hover:to-[#B8941F]/70 transition-all duration-500 rounded-[22px]"})]})})]})]})}const Yx="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function $i(e){const[t,r]=_.useState(!1),n=()=>{r(!0)},{src:s,alt:i,style:o,className:l,...c}=e;return t?a.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${l??""}`,style:o,children:a.jsx("div",{className:"flex items-center justify-center w-full h-full",children:a.jsx("img",{src:Yx,alt:"Error loading image",...c,"data-original-url":s})})}):a.jsx("img",{src:s,alt:i,className:l,style:o,...c,onError:n})}function Zf({product:e,onProductClick:t,variant:r="default"}){var x;const[n,s]=_.useState(0),[i,o]=_.useState(!0),l=((x=e.product_images)==null?void 0:x.map(v=>v.url))||[e.image||"https://via.placeholder.com/500"];_.useEffect(()=>{if(!i||l.length<=1)return;const v=setInterval(()=>{s(w=>(w+1)%l.length)},5e3);return()=>clearInterval(v)},[i,l.length]);const c=v=>{v.stopPropagation(),o(!1),s(w=>(w-1+l.length)%l.length)},u=v=>{v.stopPropagation(),o(!1),s(w=>(w+1)%l.length)},h=(v,w)=>v.length<=w?v:v.slice(0,w).trim()+"...",f=()=>o(!1),p=()=>o(!0),y=(e.stock??0)>0;return a.jsxs("div",{onClick:()=>t(e.id),className:`product-card ${r==="black"?"card-black p-4":""}`,children:[a.jsx("div",{className:"product-image-container group relative",onMouseEnter:f,onMouseLeave:p,children:a.jsxs("div",{className:"relative w-full h-full overflow-hidden rounded-lg",children:[a.jsx($i,{src:l[n],alt:e.name,className:"product-image transition-opacity duration-500"}),!y&&a.jsx("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded text-xs font-semibold",children:"Out of Stock"}),e.brand&&a.jsx("div",{className:"absolute top-2 right-2 bg-black/60 text-[#D4AF37] px-2 py-1 rounded text-xs font-medium backdrop-blur-sm",children:e.brand}),l.length>1&&a.jsxs("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 bg-black/60 px-2 py-1 rounded-full text-xs text-[#D4AF37] backdrop-blur-sm",children:[n+1," / ",l.length]}),l.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:c,className:"absolute left-1 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 bg-black/60 hover:bg-[#D4AF37] text-white hover:text-black p-1.5 rounded-full backdrop-blur-sm",children:a.jsx(G0,{size:16,strokeWidth:2.5})}),a.jsx("button",{onClick:u,className:"absolute right-1 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 bg-black/60 hover:bg-[#D4AF37] text-white hover:text-black p-1.5 rounded-full backdrop-blur-sm",children:a.jsx(Xl,{size:16,strokeWidth:2.5})})]}),l.length>1&&a.jsx("div",{className:"absolute top-2 left-1/2 transform -translate-x-1/2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:l.map((v,w)=>a.jsx("button",{onClick:m=>{m.stopPropagation(),o(!1),s(w)},className:`w-1 h-1 rounded-full transition-all ${w===n?"bg-[#D4AF37] w-2":"bg-white/40 hover:bg-white/60"}`},w))})]})}),a.jsxs("div",{className:"product-info",children:[a.jsx("p",{className:"product-category",children:e.category}),a.jsx("h3",{className:"product-name",children:h(e.name,50)}),e.short_description&&a.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:e.short_description}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[e.sku&&a.jsxs("span",{children:["SKU: ",e.sku]}),y&&a.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[a.jsx(Qt,{size:12}),e.stock," in stock"]})]}),typeof e.price=="number"&&a.jsxs("div",{className:"product-price",children:["$",e.price.toLocaleString()]})]})]})}function Xx({onNavigate:e}){const[t,r]=_.useState([]),[n,s]=_.useState(!0),[i,o]=_.useState("All"),[l,c]=_.useState("featured"),[u,h]=_.useState({min:0,max:1e6}),[f,p]=_.useState(!1),[y,x]=B0(),v=["All","Cosmetics","Construction","Furniture","Clothing and Fashion","Events Tools","Electrical Appliances"];_.useEffect(()=>{w()},[]),_.useEffect(()=>{const d=y.get("category");o(d||"All")},[y]);const w=async()=>{try{s(!0);const{data:d,error:g}=await A.from("products").select(`
          *,
          product_images ( url, alt_text, position ),
          product_categories (
            categories ( name )
          ),
          product_specs ( spec_key, spec_value )
        `).eq("published",!0).order("created_at",{ascending:!1});if(g)throw g;console.log("Fetched products:",d==null?void 0:d.length);const b=(d==null?void 0:d.map(N=>{var k,j,S,F,C,I;return{id:N.id,name:N.name,price:N.price,stock:N.stock||0,brand:N.brand,sku:N.sku,short_description:N.short_description,description:N.description,image:(j=(k=N.product_images)==null?void 0:k.sort((V,Ce)=>V.position-Ce.position)[0])==null?void 0:j.url,product_images:((S=N.product_images)==null?void 0:S.sort((V,Ce)=>V.position-Ce.position))||[],category:((I=(C=(F=N.product_categories)==null?void 0:F[0])==null?void 0:C.categories)==null?void 0:I.name)||"Uncategorized",product_specs:N.product_specs||[],view_count:N.view_count}}))||[];r(b)}catch(d){console.error("Error fetching products:",d)}finally{s(!1)}},m=t.filter(d=>i==="All"||d.category===i).filter(d=>d.price>=u.min&&d.price<=u.max).sort((d,g)=>l==="price-low"?d.price-g.price:l==="price-high"?g.price-d.price:0);return n?a.jsx("div",{className:"section flex items-center justify-center min-h-[50vh]",children:a.jsx(le,{className:"animate-spin text-[var(--gold-primary)]",size:48})}):a.jsxs("div",{className:"page-fade section relative",children:[a.jsxs("div",{className:"relative min-h-[300px] flex items-center justify-center -mx-8 -mt-8 px-8 pt-8 mb-8",style:{overflow:"hidden"},children:[a.jsx("div",{className:"absolute inset-0 z-0"}),a.jsxs("div",{className:"relative z-10 text-center",children:[a.jsx("h1",{className:"page-title",style:{fontFamily:"'Oswald', sans-serif"},children:"Luxury Collection"}),a.jsxs("p",{className:"page-desc",children:[m.length," exceptional pieces representing the pinnacle of craftsmanship."]})]})]}),a.jsxs("div",{className:"filters-container",children:[a.jsx("div",{className:"filter-group",children:v.map(d=>a.jsx("button",{onClick:()=>{o(d),d==="All"?(y.delete("category"),x(y)):x({category:d})},className:`filter-chip ${i===d?"active":""}`,children:d},d))}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem"},children:[a.jsxs("button",{onClick:()=>p(!f),className:"link-gold",style:{background:"none",WebkitBackgroundClip:"unset",color:"var(--black)",display:"flex",alignItems:"center"},children:[a.jsx(oy,{size:20,strokeWidth:2.5,style:{marginRight:"0.5rem"}}),"Filters"]}),a.jsxs("div",{className:"sort-wrapper",children:[a.jsxs("select",{value:l,onChange:d=>c(d.target.value),className:"sort-select",children:[a.jsx("option",{value:"featured",children:"Featured"}),a.jsx("option",{value:"price-low",children:"Price: Low to High"}),a.jsx("option",{value:"price-high",children:"Price: High to Low"}),a.jsx("option",{value:"newest",children:"Newest"})]}),a.jsx(Yl,{size:16,className:"sort-icon",strokeWidth:3})]})]})]}),f&&a.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"#f9f9f9",borderRadius:"0.5rem",marginBottom:"2rem",border:"1px solid #e5e7eb"},children:[a.jsx("h3",{style:{marginBottom:"1rem",fontWeight:"600",fontSize:"0.95rem"},children:"Price Range"}),a.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.5rem",color:"#666"},children:"Min"}),a.jsx("input",{type:"number",value:u.min,onChange:d=>h({...u,min:Math.max(0,parseInt(d.target.value)||0)}),min:"0",className:"w-full px-2 py-2 border border-gray-300 rounded text-sm",placeholder:"$0"})]}),a.jsxs("div",{style:{flex:1},children:[a.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.5rem",color:"#666"},children:"Max"}),a.jsx("input",{type:"number",value:u.max,onChange:d=>h({...u,max:Math.max(u.min,parseInt(d.target.value)||1e6)}),min:"0",className:"w-full px-2 py-2 border border-gray-300 rounded text-sm",placeholder:"$10,000"})]})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{fontSize:"0.85rem",color:"#666",display:"block",marginBottom:"0.5rem"},children:"Min Price Slider"}),a.jsx("input",{type:"range",min:"0",max:u.max,value:u.min,onChange:d=>h({...u,min:Math.min(parseInt(d.target.value),u.max)}),style:{width:"100%"}})]}),a.jsxs("div",{children:[a.jsx("label",{style:{fontSize:"0.85rem",color:"#666",display:"block",marginBottom:"0.5rem"},children:"Max Price Slider"}),a.jsx("input",{type:"range",min:u.min,max:"10000",value:u.max,onChange:d=>h({...u,max:Math.max(u.min,parseInt(d.target.value))}),style:{width:"100%"}})]})]}),a.jsxs("p",{style:{marginTop:"1rem",fontSize:"0.9rem",fontWeight:"500"},children:["$",u.min.toLocaleString()," - $",u.max.toLocaleString()]})]}),a.jsx("div",{className:"grid grid-cols-4 gap-6",children:m.map(d=>a.jsx("div",{className:"glass-border",children:a.jsx(Zf,{product:d,onProductClick:g=>e("product",g)})},d.id))}),a.jsx("div",{style:{textAlign:"center",marginTop:"4rem"},children:a.jsx("button",{className:"load-more-btn",children:"Load More"})})]})}function Zx({isOpen:e,onClose:t}){return e?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),a.jsxs("div",{className:"relative z-10 w-full max-w-md bg-[#0A0A0A] border border-[#D4AF37]/20 rounded-2xl p-8 shadow-2xl animate-in fade-in zoom-in duration-300",children:[a.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:a.jsx(ft,{size:24})}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#FFE55C] via-[#D4AF37] to-[#B8941F] rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-[#D4AF37]/20",children:a.jsx(sy,{size:32,className:"text-black",strokeWidth:2.5})}),a.jsx("h3",{className:"text-2xl font-serif font-bold text-white mb-2",children:"Login Required"}),a.jsx("p",{className:"text-[#A3A3A3] mb-8",children:"Please log in to your account to add items to your cart and proceed with checkout."}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Kt,{to:"/login",className:"block w-full py-3 px-6 bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] text-black font-semibold rounded-xl hover:shadow-[0_8px_20px_rgba(212,175,55,0.3)] transition-all transform hover:-translate-y-0.5",children:"Log In Now"}),a.jsx("button",{onClick:t,className:"block w-full py-3 px-6 bg-transparent border border-[#D4AF37]/30 text-[#D4AF37] font-semibold rounded-xl hover:bg-[#D4AF37]/10 transition-colors",children:"Continue Browsing"})]})]})]})]}):null}const ep=_.createContext({session:null,user:null,loading:!0,signOut:async()=>{}});function ew({children:e}){const[t,r]=_.useState(null),[n,s]=_.useState(null),[i,o]=_.useState(!0);_.useEffect(()=>{A.auth.getSession().then(({data:{session:u}})=>{r(u),s((u==null?void 0:u.user)??null),o(!1)});const{data:{subscription:c}}=A.auth.onAuthStateChange((u,h)=>{r(h),s((h==null?void 0:h.user)??null),o(!1)});return()=>c.unsubscribe()},[]);const l=async()=>{await A.auth.signOut()};return a.jsx(ep.Provider,{value:{session:t,user:n,loading:i,signOut:l},children:e})}const nc=()=>_.useContext(ep),tp=_.createContext({items:[],addToCart:async()=>{},removeFromCart:async()=>{},updateQuantity:async()=>{},total:0,itemCount:0,loading:!1});function tw({children:e}){const{user:t}=nc(),[r,n]=_.useState([]),[s,i]=_.useState(null),[o,l]=_.useState(!1);_.useEffect(()=>{t?c():(n([]),i(null))},[t]),_.useEffect(()=>{if(!s)return;const x=A.channel("cart_subscription").on("postgres_changes",{event:"*",schema:"public",table:"cart_items",filter:`cart_id=eq.${s}`},()=>{c()}).subscribe();return()=>{A.removeChannel(x)}},[s]);const c=async()=>{if(t){l(!0);try{let x;const{data:v}=await A.from("carts").select("id").eq("user_id",t.id).single();if(v)x=v.id;else{const{data:m,error:d}=await A.from("carts").insert({user_id:t.id}).select().single();if(d||!m)throw d;x=m.id}i(x);const{data:w}=await A.from("cart_items").select("*, products ( id, name, price, description, product_images ( url ), seller_id )").eq("cart_id",x);n(w||[])}catch(x){console.error("Error fetching cart:",x)}finally{l(!1)}}},u=async(x,v=1)=>{if(!t||!s){alert("Please login to add to cart");return}try{const w=r.find(m=>m.product_id===x.id);w?await f(w.id,w.quantity+v):(await A.from("cart_items").insert({cart_id:s,product_id:x.id,quantity:v,price_at_time:x.price}),console.log("Item added to cart_items table in Supabase"),await c())}catch(w){console.error("Error adding to cart:",w),alert("Error adding to cart")}},h=async x=>{await A.from("cart_items").delete().eq("id",x),n(v=>v.filter(w=>w.id!==x))},f=async(x,v)=>{v<1||(await A.from("cart_items").update({quantity:v}).eq("id",x),n(w=>w.map(m=>m.id===x?{...m,quantity:v}:m)))},p=r.reduce((x,v)=>{var w;return x+(((w=v.products)==null?void 0:w.price)||0)*v.quantity},0),y=r.reduce((x,v)=>x+v.quantity,0);return a.jsx(tp.Provider,{value:{items:r,addToCart:u,removeFromCart:h,updateQuantity:f,total:p,itemCount:y,loading:o},children:e})}const oa=()=>_.useContext(tp);function rw(){var v,w;const{id:e}=Jl(),{addToCart:t}=oa(),[r,n]=_.useState(null),[s,i]=_.useState(!0),[o,l]=_.useState(1),[c,u]=_.useState("One Size"),[h,f]=_.useState(!1),p=["Small","Medium","Large","One Size"];_.useEffect(()=>{e&&y()},[e]);const y=async()=>{var m,d,g,b,N,k;try{i(!0);const{data:j,error:S}=await A.from("products").select(`
          *,
          product_images ( url, alt_text, position ),
          product_categories (
            categories ( name, slug )
          ),
          product_specs ( spec_key, spec_value )
        `).eq("id",e).single();if(S)throw S;n({...j,image:(d=(m=j.product_images)==null?void 0:m.sort((F,C)=>F.position-C.position)[0])==null?void 0:d.url,category:((N=(b=(g=j.product_categories)==null?void 0:g[0])==null?void 0:b.categories)==null?void 0:N.name)||"Uncategorized",product_images:((k=j.product_images)==null?void 0:k.sort((F,C)=>F.position-C.position))||[],product_specs:j.product_specs||[]})}catch(j){console.error("Error fetching product:",j)}finally{i(!1)}},x=async()=>{const{data:{session:m}}=await A.auth.getSession();if(!m){f(!0);return}r&&(await t(r,o),alert("Product added to cart"))};return s?a.jsx("div",{className:"section flex items-center justify-center min-h-[50vh]",children:a.jsx(le,{className:"animate-spin text-[var(--gold-primary)]",size:48})}):r?a.jsxs("div",{className:"section relative",children:[a.jsxs("div",{className:"detail-grid relative z-10",children:[a.jsxs("div",{children:[a.jsx("div",{className:"gallery-main",children:a.jsx($i,{src:r.image||"https://via.placeholder.com/800",alt:r.name,className:"product-image"})}),a.jsx("div",{className:"gallery-thumbnails",children:((v=r.product_images)==null?void 0:v.map((m,d)=>a.jsx("div",{className:"gallery-thumb",children:a.jsx($i,{src:m.url,alt:m.alt_text||r.name,className:"product-image"})},d)))||[1,2,3].map(m=>a.jsx("div",{className:"gallery-thumb",children:a.jsx("div",{className:"w-full h-full bg-gray-200"})},m))})]}),a.jsxs("div",{className:"card-black",children:[a.jsx("p",{className:"text-muted mb-2",children:r.category}),a.jsx("h1",{className:"text-white mb-6",style:{fontSize:"2.5rem",fontFamily:"'Oswald', sans-serif"},children:r.name}),a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsxs("div",{className:"flex gap-1",children:[[1,2,3,4,5].map(m=>a.jsx(Bn,{size:20,strokeWidth:2.5,style:{fill:"url(#gold-gradient)",stroke:"#D4AF37",filter:"drop-shadow(0 0 4px rgba(244, 224, 77, 0.5))"}},m)),a.jsx("svg",{width:"0",height:"0",children:a.jsx("defs",{children:a.jsxs("linearGradient",{id:"gold-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"#FFE55C"}),a.jsx("stop",{offset:"50%",stopColor:"#D4AF37"}),a.jsx("stop",{offset:"100%",stopColor:"#B8941F"})]})})})]}),a.jsx("span",{className:"text-muted",children:"(127 reviews)"})]}),a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsxs("span",{className:"detail-price",children:["$",((w=r.price)==null?void 0:w.toLocaleString())||"0.00"]}),r.stock!==void 0&&r.stock!==null?r.stock>0?a.jsxs("span",{className:"bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-sm",children:[r.stock," in stock"]}):a.jsx("span",{className:"bg-red-500/20 text-red-400 px-3 py-1 rounded-full text-sm",children:"Out of stock"}):a.jsx("span",{className:"bg-gray-500/20 text-gray-400 px-3 py-1 rounded-full text-sm",children:"Stock unavailable"})]}),r.short_description&&a.jsx("p",{className:"text-gray-300 mb-4 font-medium",children:r.short_description}),a.jsx("p",{className:"detail-desc",children:r.description||"No detailed description available for this product."}),r.product_specs&&r.product_specs.length>0&&a.jsxs("div",{className:"mb-6 mt-6 pt-6 border-t border-gray-700",children:[a.jsx("h4",{className:"text-white mb-4 font-semibold",children:"Specifications"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:r.product_specs.map((m,d)=>a.jsxs("div",{className:"bg-gray-800/50 rounded px-3 py-2",children:[a.jsx("span",{className:"text-gray-400 text-sm block",children:m.spec_key}),a.jsx("span",{className:"text-white",children:m.spec_value||"N/A"})]},d))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-white mb-4",style:{fontFamily:"'Oswald', sans-serif"},children:"Select Size"}),a.jsx("div",{className:"size-grid",children:p.map(m=>a.jsx("button",{onClick:()=>u(m),className:`size-btn ${c===m?"active":""}`,children:m},m))})]}),a.jsxs("div",{className:"mb-12",children:[a.jsx("h4",{className:"text-white mb-4",style:{fontFamily:"'Oswald', sans-serif"},children:"Quantity"}),a.jsxs("div",{className:"quantity-controls",children:[a.jsx("button",{onClick:()=>l(Math.max(1,o-1)),className:"qty-btn",children:a.jsx(Af,{size:20,strokeWidth:2.5})}),a.jsx("span",{className:"qty-display",children:o}),a.jsx("button",{onClick:()=>l(o+1),className:"qty-btn",disabled:r.stock!==void 0&&o>=r.stock,children:a.jsx(dn,{size:20,strokeWidth:2.5})})]})]}),a.jsxs("div",{className:"detail-actions",children:[a.jsx("button",{onClick:x,className:"btn-primary",style:{flex:1,padding:"1rem"},disabled:r.stock!==void 0&&r.stock<=0,children:r.stock!==void 0&&r.stock<=0?"Out of Stock":"Add to Cart"}),a.jsx("button",{className:"qty-btn",style:{width:"64px",height:"auto",border:"1px solid var(--white)"},children:a.jsx(ey,{size:24,strokeWidth:2.5})})]}),a.jsxs("div",{className:"detail-features",children:[a.jsxs("div",{className:"feature-row",children:[a.jsx(ec,{size:24,strokeWidth:2.5,style:{color:"#D4AF37"}}),a.jsx("span",{children:"Free shipping worldwide"})]}),a.jsxs("div",{className:"feature-row",children:[a.jsx(Rf,{size:24,strokeWidth:2.5,style:{color:"#D4AF37"}}),a.jsx("span",{children:"Authenticity guaranteed"})]}),a.jsxs("div",{className:"feature-row",children:[a.jsx(ay,{size:24,strokeWidth:2.5,style:{color:"#D4AF37"}}),a.jsx("span",{children:"30-day return policy"})]})]})]})]}),a.jsx(Zx,{isOpen:h,onClose:()=>f(!1)})]}):a.jsx("div",{className:"section text-center text-white",children:"Product not found"})}function nw({onNavigate:e}){const{items:t,total:r,removeFromCart:n,updateQuantity:s,loading:i}=oa(),o=r,l=o>500?0:50,c=o*.08,u=o+l+c;return i?a.jsx("div",{className:"section flex items-center justify-center min-h-[50vh]",children:a.jsx(le,{className:"animate-spin text-[var(--gold-primary)]",size:48})}):a.jsxs("div",{className:"page-fade section relative",children:[a.jsx("h1",{className:"page-title mb-12",children:"Shopping Cart"}),t.length===0?a.jsxs("div",{className:"card-black p-24 text-center",children:[a.jsx("h3",{className:"text-white mb-6",children:"Your cart is empty"}),a.jsx("p",{className:"text-muted mb-12",children:"Discover our exceptional collection"}),a.jsx("button",{onClick:()=>e("shop"),className:"btn-primary",style:{padding:"1rem 3rem"},children:"Continue Shopping"})]}):a.jsxs("div",{className:"cart-grid",children:[a.jsx("div",{className:"col-span-2 space-y-6",children:t.map(h=>{var f,p,y,x,v,w,m,d;return a.jsxs("div",{className:"card-black p-6 flex gap-6",children:[a.jsx("div",{className:"cart-thumb",children:a.jsx($i,{src:((y=(p=(f=h.products)==null?void 0:f.product_images)==null?void 0:p[0])==null?void 0:y.url)||"https://via.placeholder.com/150",alt:(x=h.products)==null?void 0:x.name,className:"product-image"})}),a.jsxs("div",{className:"cart-details",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-white mb-2",children:(v=h.products)==null?void 0:v.name}),a.jsxs("div",{className:"text-white font-bold",children:["$",(m=(w=h.products)==null?void 0:w.price)==null?void 0:m.toLocaleString()]})]}),a.jsx("button",{onClick:()=>n(h.id),className:"text-muted hover:text-white transition-colors bg-transparent border-none cursor-pointer p-0",children:a.jsx(ft,{size:24,strokeWidth:2.5})})]}),a.jsxs("div",{className:"flex items-center justify-between mt-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>s(h.id,Math.max(1,h.quantity-1)),className:"qty-btn",style:{width:"32px",height:"32px"},children:a.jsx(Af,{size:14,strokeWidth:2.5})}),a.jsx("span",{className:"text-white w-8 text-center",children:h.quantity}),a.jsx("button",{onClick:()=>s(h.id,h.quantity+1),className:"qty-btn",style:{width:"32px",height:"32px"},children:a.jsx(dn,{size:14,strokeWidth:2.5})})]}),a.jsxs("div",{className:"bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] bg-clip-text text-transparent font-bold",children:["$",((((d=h.products)==null?void 0:d.price)||0)*h.quantity).toLocaleString()]})]})]})]},h.id)})}),a.jsx("div",{children:a.jsxs("div",{className:"card-black p-8 sticky top-24",children:[a.jsx("h3",{className:"text-white mb-8 font-serif",style:{fontFamily:"'Oswald', sans-serif"},children:"Order Summary"}),a.jsxs("div",{className:"space-y-4 mb-8",children:[a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{children:"Subtotal"}),a.jsxs("span",{children:["$",o.toLocaleString()]})]}),a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{children:"Shipping"}),a.jsx("span",{children:l===0?"Free":`$${l}`})]}),a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{children:"Tax"}),a.jsxs("span",{children:["$",c.toFixed(2)]})]}),a.jsxs("div",{className:"summary-total",children:[a.jsx("span",{children:"Total"}),a.jsxs("div",{className:"total-price",children:["$",u.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),a.jsxs(Kt,{to:"/checkout",style:{textDecoration:"none"},children:[a.jsx("button",{className:"btn-primary",style:{width:"100%",marginBottom:"1rem",padding:"1rem"},children:"Proceed to Checkout"}),a.jsx("button",{onClick:()=>e("shop"),className:"btn-outline-gold",style:{width:"100%",padding:"1rem"},children:"Continue Shopping"})]}),o<500&&a.jsx("div",{className:"mt-6 p-4 border border-[rgba(222,157,13,0.3)] text-center",children:a.jsxs("p",{className:"text-muted text-sm",children:["Add ",a.jsxs("span",{style:{color:"var(--gold-solid)"},children:["$",(500-o).toLocaleString()]})," more for free shipping"]})})]})})]})]})}async function sw(e,t){var n,s,i,o,l,c,u;if(e.length===0)return`Product Name,Category,Vendor Business Name,Vendor Email,Price,Quantity
`;const r=["Product Name,Category,Vendor Business Name,Vendor Email,Price,Quantity"];for(const h of e)try{const f=(n=h.products)==null?void 0:n.seller_id,p=h.product_id;let y=null;if(f){const{data:C}=await t.from("vendors").select("business_name,email").eq("id",f).maybeSingle();y=C}let x=null;if(p){const{data:C}=await t.from("product_categories").select("categories(name)").eq("product_id",p).limit(1);x=C}const v=((s=h.products)==null?void 0:s.name)||"Unknown",w=((o=(i=x==null?void 0:x[0])==null?void 0:i.categories)==null?void 0:o.name)||"Uncategorized",m=(y==null?void 0:y.business_name)||"Unknown Vendor",d=(y==null?void 0:y.email)||"N/A",g=((l=h.products)==null?void 0:l.price)??0,b=typeof g=="number"?g:Number(g||0),N=h.quantity??1,k=`"${v.replace(/"/g,'""')}"`,j=`"${w.replace(/"/g,'""')}"`,S=`"${m.replace(/"/g,'""')}"`,F=`"${d.replace(/"/g,'""')}"`;r.push(`${k},${j},${S},${F},$${b.toFixed(2)},${N}`)}catch(f){console.error(`Error fetching data for product ${h.product_id}:`,f);const p=`"${(((c=h.products)==null?void 0:c.name)||"Unknown").replace(/"/g,'""')}"`,y=((u=h.products)==null?void 0:u.price)??0,x=typeof y=="number"?y:Number(y||0),v=h.quantity??1;r.push(`${p},"Uncategorized","Unknown Vendor","N/A",$${x.toFixed(2)},${v}`)}return r.join(`
`)}function iw(e,t,r){return`# User Preference Data
# Generated: ${new Date().toISOString()}
${t?`# User Email: ${t}
`:""}# This file contains product preferences for personalized recommendations

`+e}function aw(e,t,r,n){const s={userId:e,userEmail:t,timestamp:new Date().toISOString(),csvData:r,productCount:n.length},i=localStorage.getItem("user_preference_records"),o=i?JSON.parse(i):[];o.push(s);const l=o.filter(c=>c.userId===e);if(l.length>50){const c=o.filter(f=>f.userId!==e),u=l.slice(-50),h=[...c,...u];localStorage.setItem("user_preference_records",JSON.stringify(h))}else localStorage.setItem("user_preference_records",JSON.stringify(o));console.log(`User preference data saved for ${t}`)}function ow(e,t){const r=new Date().toISOString().split("T")[0],n=t?`user-preferences-${t.replace(/[@.]/g,"_")}-${r}.csv`:`user-preferences-${r}.csv`,s=document.createElement("a");s.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(e)),s.setAttribute("download",n),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s),console.log(`CSV file saved: ${n}`)}function lw(){const e=ve(),{items:t}=oa(),{user:r}=nc(),[n,s]=_.useState(1),i=[{id:1,title:"Shipping",icon:ec},{id:2,title:"Payment",icon:Mo},{id:3,title:"Confirmation",icon:K0}];return _.useEffect(()=>{var o;(o=window.setStepProgress)==null||o.call(window,n-1)},[n]),a.jsx("div",{className:"section relative",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsx("h1",{className:"page-title mb-12",style:{fontFamily:"'Oswald', sans-serif"},children:"Checkout"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.jsxs("div",{id:"steps",className:"relative flex justify-between items-center w-full px-6 mb-12",children:[a.jsx("div",{id:"progress-bg",className:"absolute top-5 h-1 rounded-full bg-gray-600 pointer-events-none z-0"}),a.jsx("div",{id:"progress-fill",className:"absolute top-5 h-1 rounded-full bg-[var(--gold-primary)] pointer-events-none z-10 transition-all duration-500"}),i.map(o=>a.jsxs("div",{className:`step flex flex-col items-center gap-2 relative z-20 ${n>=o.id?"opacity-100":"opacity-40"}`,children:[a.jsx("div",{className:`icon w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all duration-300 bg-black ${n>=o.id?"border-[var(--gold-primary)] text-[var(--gold-primary)]":"border-gray-400 text-gray-400"}`,children:a.jsx(o.icon,{size:20})}),a.jsx("span",{className:"font-semibold text-sm whitespace-nowrap",children:o.title})]},o.id))]}),a.jsx("script",{dangerouslySetInnerHTML:{__html:`
                            (function () {
                                const container = document.getElementById('steps');
                                const progressBg = document.getElementById('progress-bg');
                                const progressFill = document.getElementById('progress-fill');

                                let completedIndex = 0;

                                function updateProgress() {
                                    const stepIcons = Array.from(container.querySelectorAll('.step .icon'));
                                    if (stepIcons.length < 2) return;

                                    const containerRect = container.getBoundingClientRect();

                                    const centers = stepIcons.map(icon => {
                                        const r = icon.getBoundingClientRect();
                                        return (r.left + r.right) / 2 - containerRect.left;
                                    });

                                    const left = centers[0];
                                    const right = centers[centers.length - 1];

                                    const trackLeftPx = left;
                                    const trackWidthPx = Math.max(0, right - left);

                                    progressBg.style.left = trackLeftPx + 'px';
                                    progressBg.style.width = trackWidthPx + 'px';

                                    const fillRight = centers[Math.min(completedIndex, centers.length - 1)];
                                    const fillWidthPx = Math.max(0, fillRight - left);

                                    progressFill.style.left = trackLeftPx + 'px';
                                    progressFill.style.width = fillWidthPx + 'px';
                                }

                                window.setStepProgress = function (index) {
                                    completedIndex = index;
                                    updateProgress();
                                };

                                let resizeTimer;
                                window.addEventListener('resize', () => {
                                    clearTimeout(resizeTimer);
                                    resizeTimer = setTimeout(updateProgress, 80);
                                });

                                requestAnimationFrame(() => requestAnimationFrame(updateProgress));
                            })();
                        `}}),a.jsxs("div",{className:`card-black ${n!==1?"opacity-50 pointer-events-none":""}`,children:[a.jsx("h3",{className:"text-2xl font-serif mb-6 text-[var(--gold-primary)]",style:{fontFamily:"'Oswald', sans-serif"},children:"Shipping Address"}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsx("input",{type:"text",placeholder:"First Name",className:"bg-white/10 border border-white/20 p-3 rounded text-white placeholder:text-gray-200"}),a.jsx("input",{type:"text",placeholder:"Last Name",className:"bg-white/10 border border-white/20 p-3 rounded text-white placeholder:text-gray-200"}),a.jsx("input",{type:"email",placeholder:"Email",className:"col-span-2 bg-white/10 border border-white/20 p-3 rounded text-white placeholder:text-gray-200"}),a.jsx("input",{type:"text",placeholder:"Address",className:"col-span-2 bg-white/10 border border-white/20 p-3 rounded text-white placeholder:text-gray-200"}),a.jsx("input",{type:"text",placeholder:"City",className:"bg-white/10 border border-white/20 p-3 rounded text-white placeholder:text-gray-200"}),a.jsx("input",{type:"text",placeholder:"Postal Code",className:"bg-white/10 border border-white/20 p-3 rounded text-white placeholder:text-gray-200"})]}),n===1&&a.jsx("button",{onClick:()=>s(2),className:"btn-primary mt-8 w-full",children:"Continue to Payment"})]}),a.jsxs("div",{className:`card-black ${n!==2?"opacity-50 pointer-events-none":""}`,children:[a.jsx("h3",{className:"text-2xl font-serif mb-6 text-[var(--gold-primary)]",style:{fontFamily:"'Oswald', sans-serif"},children:"Payment Method"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 border border-[var(--gold-primary)] rounded flex items-center gap-4 bg-[var(--gold-glow)]",children:[a.jsx(Mo,{className:"text-[var(--gold-primary)]"}),a.jsx("span",{children:"Credit Card"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-4",children:[a.jsx("input",{type:"text",placeholder:"Card Number",className:"col-span-2 bg-white/10 border border-white/20 p-3 rounded text-white placeholder:text-gray-300"}),a.jsx("input",{type:"text",placeholder:"MM/YY",className:"bg-white/10 border border-white/20 p-3 rounded text-white placeholder:text-gray-300"}),a.jsx("input",{type:"text",placeholder:"CVC",className:"bg-white/10 border border-white/20 p-3 rounded text-white placeholder:text-gray-3s00"})]})]}),n===2&&a.jsx("button",{onClick:async()=>{try{if(r&&t.length>0){const o=await sw(t,A),l=iw(o,r.email);aw(r.id,r.email||"",l,t),ow(l,r.email)}}catch(o){console.error("Error saving preference data:",o)}e("/order-confirmation")},className:"btn-primary mt-8 w-full",children:"Place Order"})]})]}),a.jsx("div",{children:a.jsxs("div",{className:"card-black sticky top-24",children:[a.jsx("h3",{className:"font-serif text-xl mb-6",style:{fontFamily:"'Oswald', sans-serif"},children:"Order Summary"}),a.jsxs("div",{className:"space-y-4 text-gray-400",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Subtotal"}),a.jsx("span",{children:"$12,500"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Shipping"}),a.jsx("span",{children:"Free"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Tax"}),a.jsx("span",{children:"$1,000"})]}),a.jsxs("div",{className:"border-t border-white/10 pt-4 flex justify-between text-white font-bold text-lg",children:[a.jsx("span",{children:"Total"}),a.jsx("span",{className:"text-[var(--gold-primary)]",children:"$13,500"})]})]})]})})]})]})})}function cw(){return a.jsx("div",{className:"section flex items-center justify-center min-h-[60vh] relative",children:a.jsxs("div",{className:"card-black max-w-2xl w-full text-center p-16",children:[a.jsx("div",{className:"flex justify-center mb-8",children:a.jsx(Cf,{size:80,className:"text-[var(--gold-primary)]",strokeWidth:1})}),a.jsx("h1",{className:"font-serif text-4xl mb-4 bg-gradient-to-r from-[var(--gold-light)] via-[var(--gold-primary)] to-[var(--gold-dark)] bg-clip-text text-transparent",children:"Order Confirmed"}),a.jsx("p",{className:"text-gray-400 mb-8 text-lg",children:"Thank you for your purchase. Your order #MSS-8829 has been processed."}),a.jsxs("div",{className:"bg-white/5 rounded p-8 mb-8 text-left max-w-md mx-auto",children:[a.jsx("h4",{className:"text-white font-bold mb-4",children:"Order Details"}),a.jsxs("div",{className:"space-y-2 text-gray-400",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Estimated Delivery"}),a.jsx("span",{className:"text-white",children:"Dec 18, 2025"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Payment Method"}),a.jsx("span",{className:"text-white",children:"Visa ending 4242"})]}),a.jsxs("div",{className:"flex justify-between pt-4 border-t border-white/10 mt-4",children:[a.jsx("span",{children:"Total Amount"}),a.jsx("span",{className:"text-[var(--gold-primary)] font-bold",children:"$13,500"})]})]})]}),a.jsxs("div",{className:"flex gap-4 justify-center",children:[a.jsx(Kt,{to:"/account",className:"btn-outline-gold no-underline",children:"Track Order"}),a.jsx(Kt,{to:"/shop",className:"btn-primary no-underline",children:"Continue Shopping"})]})]})})}function uw(){const e=ve(),[t,r]=_.useState("login"),[n,s]=_.useState(!1),[i,o]=_.useState(""),[l,c]=_.useState(""),[u,h]=_.useState(""),[f,p]=_.useState(null),y=async()=>{try{s(!0),p(null);const{error:v}=await A.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/account`}});if(v)throw v}catch(v){p(v.message),s(!1)}},x=async v=>{v.preventDefault(),s(!0),p(null);try{if(t==="login"){const{error:w}=await A.auth.signInWithPassword({email:i,password:l});if(w)throw w;e("/account")}else{const{error:w}=await A.auth.signUp({email:i,password:l,options:{data:{full_name:u}}});if(w)throw w;alert("Registration successful! Please check your email to confirm your account."),r("login")}}catch(w){p(w.message)}finally{s(!1)}};return a.jsx("div",{className:"page-fade section flex items-center justify-center min-h-[70vh]",children:a.jsxs("div",{className:"card-black max-w-md w-full p-8 border border-[#FFC92E]/20 shadow-[0_0_40px_rgba(255,201,46,0.1)]",children:[a.jsxs("div",{className:"flex border-b border-white/10 mb-8",children:[a.jsxs("button",{className:`flex-1 pb-4 text-center font-serif text-lg transition-colors relative ${t==="login"?"text-[var(--gold-primary)]":"text-gray-500 hover:text-gray-300"}`,onClick:()=>r("login"),children:["Login",t==="login"&&a.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D]"})]}),a.jsxs("button",{className:`flex-1 pb-4 text-center font-serif text-lg transition-colors relative ${t==="register"?"text-[var(--gold-primary)]":"text-gray-500 hover:text-gray-300"}`,onClick:()=>r("register"),children:["Register",t==="register"&&a.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D]"})]})]}),f&&a.jsxs("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-500/30 rounded-lg flex items-center gap-3 text-red-200 text-sm",children:[a.jsx(q0,{size:18}),f]}),t==="login"?a.jsxs("form",{className:"space-y-6",onSubmit:x,children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-400 mb-2 text-sm uppercase tracking-wider font-medium",children:"Email Address"}),a.jsx("input",{type:"email",className:"w-full  bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors",value:i,onChange:v=>o(v.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-400 mb-2 text-sm uppercase tracking-wider font-medium",children:"Password"}),a.jsx("input",{type:"password",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors",value:l,onChange:v=>c(v.target.value),required:!0})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsxs("label",{className:"flex items-center gap-2 text-gray-400 cursor-pointer hover:text-white transition-colors",children:[a.jsx("input",{type:"checkbox",className:"accent-[#FFC92E]"}),a.jsx("span",{children:"Remember me"})]}),a.jsx("a",{href:"#",className:"text-[#FFC92E] hover:text-[#FFE55C] transition-colors",children:"Forgot Password?"})]}),a.jsxs("button",{type:"submit",disabled:n,className:"btn-gold",children:[n&&a.jsx(le,{className:"animate-spin inline mr-2",size:16}),"Sign In"]}),a.jsx("div",{children:a.jsxs("p",{className:"text-center text-gray-500 text-sm",children:["Don't have an account?"," ",a.jsx("span",{className:"text-[#FFC92E] hover:text-[#FFE55C] cursor-pointer font-medium",onClick:()=>r("register"),children:"Register"})]})})]}):a.jsxs("form",{className:"space-y-6",onSubmit:x,children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-400 mb-2 text-sm uppercase tracking-wider font-medium",children:"Full Name"}),a.jsx("input",{type:"text",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors",value:u,onChange:v=>h(v.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-400 mb-2 text-sm uppercase tracking-wider font-medium",children:"Email Address"}),a.jsx("input",{type:"email",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors",value:i,onChange:v=>o(v.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-400 mb-2 text-sm uppercase tracking-wider font-medium",children:"Password"}),a.jsx("input",{type:"password",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors",value:l,onChange:v=>c(v.target.value),required:!0})]}),a.jsxs("button",{type:"submit",disabled:n,className:"btn-gold2",children:[n&&a.jsx(le,{className:"animate-spin inline mr-2",size:16}),"Create Account"]}),a.jsxs("p",{className:"text-center text-gray-500 text-sm",children:["Already have an account?"," ",a.jsx("span",{className:"text-[#FFC92E] hover:text-[#FFE55C] cursor-pointer font-medium",onClick:()=>r("login"),children:"Login"})]})]}),a.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2",children:[a.jsx("div",{className:"h-px w-12 bg-gradient-to-r from-transparent to-[#FFC92E]/30"}),a.jsx("span",{className:"text-xs uppercase tracking-widest text-[#FFC92E]/50 font-medium",children:"Or"}),a.jsx("div",{className:"h-px w-12 bg-gradient-to-l from-transparent to-[#FFC92E]/30"})]}),a.jsx("div",{className:"mt-8 pt-6 border-t border-white/10",children:a.jsxs("button",{onClick:y,type:"button",className:"group w-full relative overflow-hidden bg-[#000] border border-[#333] hover:border-[#FFC92E]/50 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-center gap-3 transition-all duration-300 hover:shadow-[0_0_15px_rgba(255,201,46,0.15)]",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FFC92E]/0 via-[#FFC92E]/10 to-[#FFC92E]/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),a.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),a.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),a.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),a.jsx("span",{className:"text-gray-300 group-hover:text-white transition-colors",children:"Sign in with Google"})]})})]})})}async function ed(e){if(!e)return null;try{if(e.startsWith("http://")||e.startsWith("https://"))return e;const{data:t}=A.storage.from("avatars").getPublicUrl(e);return(t==null?void 0:t.publicUrl)||null}catch(t){return console.error("Error getting avatar URL:",t),null}}const dw="AIzaSyAVamyyQXuecYqP-WyQsVuNdi5mEwUnSGc";function hw(){return new Promise((e,t)=>{if(!navigator.geolocation){t(new Error("Geolocation not supported"));return}const r=setTimeout(()=>{t(new Error("Device location request timed out"))},1e4);navigator.geolocation.getCurrentPosition(n=>{clearTimeout(r),e({lat:n.coords.latitude,lng:n.coords.longitude,accuracy:n.coords.accuracy})},n=>{clearTimeout(r),t(n)},{enableHighAccuracy:!0,timeout:8e3,maximumAge:0})})}async function fw(){const e=[{name:"ipapi.co",url:"https://ipapi.co/json/",parse:t=>({lat:t.latitude,lng:t.longitude})},{name:"geolocation-db",url:"https://geolocation-db.com/json/",parse:t=>({lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)})}];for(const t of e)try{const r=await fetch(t.url,{headers:{Accept:"application/json"}});if(!r.ok)continue;const n=await r.json();if(n.latitude&&n.longitude)return t.parse(n)}catch{continue}throw new Error("IP geolocation failed")}async function pw(){console.log("[Geolocation] Starting location acquisition...");try{console.log("[Geolocation] Attempting device geolocation...");const e=await hw();return console.log(`[Geolocation] Device location: ${e.lat}, ${e.lng} (accuracy: ${e.accuracy.toFixed(0)}m)`),e}catch(e){console.warn("[Geolocation] Device location unavailable:",e.message),console.log("[Geolocation] Falling back to IP geolocation...");try{const t=await fw();return console.log(`[Geolocation] IP location: ${t.lat}, ${t.lng}`),t}catch{throw console.error("[Geolocation] All methods failed"),new Error("Unable to determine location. Please enable device location or check internet connection.")}}}async function mw(e,t){try{console.log("[ReverseGeocode] Converting coordinates to address...");const r=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${e},${t}&result_type=street_address|route|locality&language=en&key=${dw}`);if(!r.ok)throw new Error(`Geocoding API error: ${r.status}`);const n=await r.json();if(n.status==="ZERO_RESULTS")return console.warn("[ReverseGeocode] No address found for coordinates"),{line1:`${e.toFixed(5)}, ${t.toFixed(5)}`,neighborhood:"",city:"Unknown",state:"Unknown",country:"Unknown",postal_code:""};if(n.results.length===0)throw new Error("No geocoding results");const s=n.results[0],i=l=>{const c=s.address_components.find(u=>l.some(h=>u.types.includes(h)));return(c==null?void 0:c.long_name)||(c==null?void 0:c.short_name)||""},o={line1:s.formatted_address.split(",")[0].trim(),neighborhood:i(["neighborhood","sublocality_level_1","sublocality"]),city:i(["locality","administrative_area_level_2","administrative_area_level_3"]),state:i(["administrative_area_level_1"]),country:i(["country"]),postal_code:i(["postal_code"])};return console.log("[ReverseGeocode] Address extracted:",o),o}catch(r){throw console.error("[ReverseGeocode] Error:",r),r}}async function gw(){try{console.log("[AddressTracking] Getting delivery address...");const e=await pw(),t=await mw(e.lat,e.lng),r={lat:e.lat,lng:e.lng,...t};return console.log("[AddressTracking] Delivery address obtained successfully"),r}catch(e){throw console.error("[AddressTracking] Failed:",e),e}}function yw(){var kr,T,U,z,Q,ae;const{user:e,signOut:t,loading:r}=nc(),n=ve(),[s,i]=_.useState("orders"),[o,l]=_.useState([]),[c,u]=_.useState([]),[h,f]=_.useState(null),[p,y]=_.useState([]),[x,v]=_.useState(null),[w,m]=_.useState(!1),[d,g]=_.useState(!1),[b,N]=_.useState({display_name:"",email:""}),[k,j]=_.useState({line1:"",line2:"",neighborhood:"",city:"",state:"",country:"",postal_code:"",label:"Home"}),[S,F]=_.useState(!1);_.useEffect(()=>{!r&&!e&&n("/login"),e&&C()},[e,r,n]);const C=async()=>{var P;m(!0);try{const{data:W}=await A.from("user_profiles").select("*").eq("user_id",e.id).single();if(f(W),N({display_name:(W==null?void 0:W.display_name)||"",email:(e==null?void 0:e.email)||""}),W!=null&&W.avatar_url){const ot=await ed(W.avatar_url);v(ot)}else if((P=e==null?void 0:e.user_metadata)!=null&&P.avatar_url){const ot=await ed(e.user_metadata.avatar_url);v(ot)}const{data:Z}=await A.from("addresses").select("*").eq("user_id",e.id);y(Z||[]);const{data:me}=await A.from("orders").select("*").eq("user_id",e.id).order("placed_at",{ascending:!1});if(me&&me.length>0){const ot=me.map(js=>js.id),{data:Nr}=await A.from("order_items").select("*, products(name, product_images(url))").in("order_id",ot),ap=me.map(js=>({...js,order_items:(Nr==null?void 0:Nr.filter(op=>op.order_id===js.id))||[]}));l(ap)}else l([]);const{data:Pe}=await A.from("carts").select("id").eq("user_id",e.id).single();if(Pe!=null&&Pe.id){const{data:ot}=await A.from("cart_items").select("*, products ( name, price, product_images ( url ) )").eq("cart_id",Pe.id);u(ot||[])}else u([])}catch(W){console.error("Error fetching data:",W),u([])}finally{m(!1)}},I=async()=>{await t(),n("/login")},V=()=>{N({display_name:(h==null?void 0:h.display_name)||"",email:(e==null?void 0:e.email)||""}),g(!0)},Ce=async()=>{try{m(!0);const{error:P}=await A.from("user_profiles").update({display_name:b.display_name}).eq("user_id",e.id);if(P)throw P;console.log("[Profile] Profile updated successfully"),f({...h,display_name:b.display_name}),g(!1)}catch(P){console.error("[Profile] Error saving profile:",P)}finally{m(!1)}},St=async()=>{try{F(!0);const P=await gw();j({line1:P.line1,neighborhood:P.neighborhood,city:P.city,state:P.state,country:P.country,postal_code:P.postal_code,label:"Current Location"})}catch(P){const W=P.message;let Z="Failed to get location.";W.includes("not supported")?Z="Geolocation is not supported in your browser.":W.includes("permission denied")?Z="Please enable location access in your browser settings and try again.":W.includes("timed out")?Z="Location request timed out. Please ensure location services are enabled.":W.includes("internet")&&(Z="Please check your internet connection and try again."),alert(Z),console.error("[AddressTracking] Location error:",P)}finally{F(!1)}},la=async()=>{try{m(!0),console.log("[Address] Saving address:",k);const{error:P}=await A.from("addresses").insert({user_id:e.id,label:k.label,line1:k.line1,line2:k.line2,neighborhood:k.neighborhood,city:k.city,state:k.state,country:k.country,postal_code:k.postal_code});if(P)throw P;console.log("[Address] Address saved successfully"),await C(),g(!1)}catch(P){console.error("[Address] Error saving address:",P)}finally{m(!1)}},jr=[{id:"orders",label:"Orders",icon:_u,description:"Track your purchases"},{id:"cart",label:"Cart",icon:ai,description:"Items in your cart"},{id:"addresses",label:"Addresses",icon:Nn,description:"Delivery locations"},{id:"payment",label:"Payment",icon:Mo,description:"Cards & billing"},{id:"profile",label:"Profile",icon:Bn,description:"Personal info"}];return r||w&&!h&&!o.length?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black",children:a.jsxs("div",{className:"text-center",children:[a.jsx(le,{className:"animate-spin text-[#FFC92E] mx-auto mb-4",size:48}),a.jsx("p",{className:"text-gray-500",children:"Loading your dashboard..."})]})}):a.jsxs("div",{className:"min-h-screen bg-black text-white",children:[a.jsx("div",{className:"section py-12",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8 relative overflow-hidden rounded-2xl bg-gradient-to-r from-[#0B0B0B] via-[#111] to-[#0B0B0B] p-8 border border-[#FFC92E]/30 shadow-[0_0_30px_rgba(255,201,46,0.1)]",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FEFDFE] via-[#FFC92E] to-[#DE9D0D] opacity-5"}),a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#FFC92E] rounded-full blur-[80px] opacity-10"}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"p-2 bg-[#FFC92E]/10 rounded-full border border-[#FFC92E]/20",children:a.jsx(_u,{className:"text-[#FFC92E]",size:28,strokeWidth:1.5})}),a.jsx("h1",{className:"text-4xl font-serif font-bold bg-gradient-to-r from-[#FEFDFE] via-[#FFC92E] to-[#DE9D0D] bg-clip-text text-transparent drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)]",children:"Welcome Back"})]}),a.jsx("p",{className:"text-gray-400 text-lg",children:(h==null?void 0:h.display_name)||((kr=e==null?void 0:e.user_metadata)==null?void 0:kr.full_name)||"Valued Customer"})]}),a.jsxs("div",{className:"flex items-center gap-8 bg-white/5 px-6 py-3 rounded-xl border border-white/5",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-1 font-bold",children:"Total Orders"}),a.jsx("p",{className:"text-2xl font-bold bg-gradient-to-b from-[#FFC92E] to-[#DE9D0D] bg-clip-text text-transparent",children:o.length})]}),a.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-1 font-bold",children:"Member Tier"}),a.jsxs("p",{className:"text-lg font-semibold text-white flex items-center gap-1 justify-end",children:[a.jsx(Bn,{size:14,className:"fill-[#FFC92E] text-[#FFC92E]"}),"Gold"]})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[a.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] p-6 border border-[#FFC92E]/20 shadow-xl group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#FFC92E]/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[a.jsxs("div",{className:"relative mb-6",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FEFDFE] via-[#FFC92E] to-[#DE9D0D] rounded-full blur opacity-40 group-hover:opacity-60 transition-opacity duration-500"}),a.jsx("div",{className:"relative w-24 h-24 rounded-full p-[2px] bg-gradient-to-r from-[#FEFDFE] via-[#FFC92E] to-[#DE9D0D]",children:a.jsx("div",{className:"w-full h-full rounded-full bg-[#0B0B0B] flex items-center justify-center overflow-hidden",children:x?a.jsx("img",{src:x,alt:"Profile",className:"w-full h-full object-cover"}):a.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D] bg-clip-text text-transparent",children:(((T=h==null?void 0:h.display_name)==null?void 0:T[0])||((U=e==null?void 0:e.email)==null?void 0:U[0])||"U").toUpperCase()})})}),a.jsx("div",{className:"absolute bottom-0 right-0 bg-[#0B0B0B] rounded-full p-1 border border-[#FFC92E]",children:a.jsx("div",{className:"w-3 h-3 bg-[#00FF00] rounded-full animate-pulse"})})]}),a.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:(h==null?void 0:h.display_name)||((z=e==null?void 0:e.user_metadata)==null?void 0:z.full_name)||"Valued Customer"}),a.jsx("p",{className:"text-xs text-gray-500 mb-6 font-mono",children:e==null?void 0:e.email}),a.jsx("button",{onClick:V,className:"w-full py-2 rounded-lg bg-[#FFC92E]/10 border border-[#FFC92E]/30 text-[#FFC92E] text-xs font-bold uppercase tracking-widest hover:bg-[#FFC92E] hover:text-black transition-all duration-300",children:"Edit Profile"})]})]}),a.jsxs("div",{className:"rounded-2xl overflow-hidden border border-white/5 bg-[#0F0F0F] shadow-lg",children:[jr.map(P=>a.jsxs("button",{onClick:()=>i(P.id),className:`w-full flex items-center gap-4 p-5 transition-all duration-300 text-left border-b border-white/5 last:border-b-0 group relative overflow-hidden
                                            ${s===P.id?"bg-white/5":"hover:bg-white/5"}`,children:[s===P.id&&a.jsx("div",{className:"absolute inset-y-0 left-0 w-1 bg-gradient-to-b from-[#FFC92E] to-[#DE9D0D]"}),a.jsx("div",{className:`relative z-10 p-2 rounded-lg transition-all duration-300 ${s===P.id?"bg-gradient-to-br from-[#FFC92E] to-[#DE9D0D] text-black shadow-[0_0_15px_rgba(255,201,46,0.3)]":"bg-white/5 text-gray-400 group-hover:text-[#FFC92E] group-hover:bg-[#FFC92E]/10"}`,children:a.jsx(P.icon,{size:18,strokeWidth:s===P.id?2.5:2})}),a.jsxs("div",{className:"flex-1 relative z-10",children:[a.jsx("div",{className:`text-sm font-bold tracking-wide transition-colors ${s===P.id?"text-white":"text-gray-400 group-hover:text-white"}`,children:P.label}),a.jsx("div",{className:`text-[10px] uppercase tracking-wider ${s===P.id?"text-[#FFC92E]":"text-gray-600"}`,children:P.description})]}),a.jsx(Xl,{size:16,className:`relative z-10 transition-all duration-300 ${s===P.id?"text-[#FFC92E] translate-x-0":"text-gray-600 -translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0"}`})]},P.id)),a.jsxs("button",{onClick:I,className:"w-full flex items-center gap-4 p-5 text-gray-500 hover:text-red-400 transition-all text-left group relative overflow-hidden hover:bg-red-500/5",children:[a.jsx("div",{className:"p-2 rounded-lg bg-white/5 group-hover:bg-red-500/10 transition-all",children:a.jsx(Pf,{size:18,strokeWidth:2})}),a.jsx("span",{className:"font-medium text-sm tracking-wide",children:"Sign Out"})]})]})]}),a.jsxs("div",{className:"lg:col-span-3",children:[a.jsx("div",{className:"mb-6 flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h2",{className:"text-2xl font-serif font-bold text-white",children:(Q=jr.find(P=>P.id===s))==null?void 0:Q.label}),a.jsx("div",{className:"h-px w-12 bg-[#FFC92E]/30"})]})}),s==="orders"&&a.jsx("div",{className:"space-y-6",children:o.length===0?a.jsx("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] p-16 text-center border border-dashed border-[#FFC92E]/20",children:a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-20 h-20 bg-[#FFC92E]/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-[#FFC92E]/20",children:a.jsx(ai,{size:32,className:"text-[#FFC92E]",strokeWidth:1.5})}),a.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"No orders placed yet"}),a.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Start your collection of premium products today."}),a.jsxs("button",{onClick:()=>n("/shop"),className:"inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D] text-black font-bold rounded-lg hover:shadow-[0_0_20px_rgba(255,201,46,0.3)] transition-all transform hover:-translate-y-0.5",children:[a.jsx(Nn,{size:18}),"Explore Shop"]})]})}):o.map(P=>{var W;return a.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] border border-white/5 shadow-lg hover:border-[#FFC92E]/30 transition-all duration-300 group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FFC92E]/0 via-[#FFC92E]/5 to-[#FFC92E]/0 opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"relative z-10 p-6 border-b border-white/5 bg-white/[0.02]",children:a.jsxs("div",{className:"flex flex-wrap gap-6 justify-between items-center",children:[a.jsxs("div",{className:"flex gap-8",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-1 font-bold",children:"Order ID"}),a.jsxs("p",{className:"font-mono text-white text-sm",children:["#",P.id.slice(0,8).toUpperCase()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-1 font-bold",children:"Date"}),a.jsx("p",{className:"text-gray-300 text-sm",children:new Date(P.placed_at).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-1 font-bold",children:"Total"}),a.jsxs("p",{className:"text-lg font-bold text-[#FFC92E]",children:["$",P.total_amount.toLocaleString()]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("span",{className:"px-3 py-1 rounded border border-[#FFC92E]/30 text-[10px] font-bold uppercase tracking-widest text-[#FFC92E] bg-[#FFC92E]/10",children:P.status})})]})}),a.jsx("div",{className:"relative z-10 p-6 space-y-4",children:(W=P.order_items)==null?void 0:W.map(Z=>{var me,Pe,ot,Nr;return a.jsxs("div",{className:"flex gap-4 items-center p-3 rounded-lg hover:bg-white/5 transition-colors border border-transparent hover:border-white/5",children:[a.jsx("div",{className:"w-16 h-16 bg-white/5 rounded overflow-hidden flex-shrink-0 border border-white/10",children:((ot=(Pe=(me=Z.products)==null?void 0:me.product_images)==null?void 0:Pe[0])==null?void 0:ot.url)&&a.jsx("img",{src:Z.products.product_images[0].url,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",alt:""})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-white font-medium mb-1",children:(Nr=Z.products)==null?void 0:Nr.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",Z.quantity,"  $",Z.unit_price]})]}),a.jsx("div",{className:"text-right",children:a.jsxs("p",{className:"font-bold text-white",children:["$",(Z.quantity*Z.unit_price).toLocaleString()]})})]},Z.id)})})]},P.id)})}),s==="cart"&&a.jsx("div",{className:"space-y-6",children:c.length===0?a.jsx("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] p-16 text-center border border-dashed border-[#FFC92E]/20",children:a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-20 h-20 bg-[#FFC92E]/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-[#FFC92E]/20",children:a.jsx(Qt,{size:32,className:"text-[#FFC92E]",strokeWidth:1.5})}),a.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"Your cart is empty"}),a.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Add items to your cart to get started."}),a.jsxs("button",{onClick:()=>n("/shop"),className:"inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D] text-black font-bold rounded-lg hover:shadow-[0_0_20px_rgba(255,201,46,0.3)] transition-all transform hover:-translate-y-0.5",children:[a.jsx(Nn,{size:18}),"Start Shopping"]})]})}):a.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] border border-white/5 shadow-lg group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FFC92E]/0 via-[#FFC92E]/5 to-[#FFC92E]/0 opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"relative z-10 p-6 border-b border-white/5 bg-white/[0.02]",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"Cart Preview"}),a.jsxs("span",{className:"px-3 py-1 rounded bg-[#FFC92E]/10 border border-[#FFC92E]/30 text-[#FFC92E] text-sm font-bold",children:[c.length," item",c.length!==1?"s":""]})]})}),a.jsx("div",{className:"relative z-10 p-6 space-y-4",children:c.map(P=>{var W,Z,me,Pe;return a.jsxs("div",{className:"flex gap-4 items-center p-3 rounded-lg hover:bg-white/5 transition-colors border border-transparent hover:border-white/5",children:[a.jsx("div",{className:"w-16 h-16 bg-white/5 rounded overflow-hidden flex-shrink-0 border border-white/10",children:((me=(Z=(W=P.products)==null?void 0:W.product_images)==null?void 0:Z[0])==null?void 0:me.url)&&a.jsx("img",{src:P.products.product_images[0].url,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",alt:""})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-white font-medium mb-1",children:(Pe=P.products)==null?void 0:Pe.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",P.quantity,"  $",parseFloat(P.price_at_time).toFixed(2)]})]}),a.jsx("div",{className:"text-right",children:a.jsxs("p",{className:"font-bold text-white",children:["$",(P.quantity*parseFloat(P.price_at_time)).toLocaleString(void 0,{maximumFractionDigits:2})]})})]},P.id)})}),a.jsxs("div",{className:"relative z-10 p-6 border-t border-white/5 bg-white/[0.01]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("p",{className:"text-gray-400",children:"Subtotal"}),a.jsxs("p",{className:"text-white font-bold",children:["$",c.reduce((P,W)=>P+W.quantity*parseFloat(W.price_at_time),0).toLocaleString(void 0,{maximumFractionDigits:2})]})]}),a.jsxs("button",{onClick:()=>n("/cart"),className:"w-full py-3 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D] text-black font-bold rounded-lg hover:shadow-[0_0_20px_rgba(255,201,46,0.3)] transition-all flex items-center justify-center gap-2",children:[a.jsx(ai,{size:18}),"View Full Cart"]})]})]})}),s!=="orders"&&s!=="profile"&&a.jsx("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] p-16 text-center border border-dashed border-[#FFC92E]/20",children:a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-16 h-16 bg-[#FFC92E]/10 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(le,{size:24,className:"text-[#FFC92E] animate-spin-slow"})}),a.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Coming Soon"}),a.jsx("p",{className:"text-gray-500",children:"This feature is currently under development."})]})}),s==="profile"&&a.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] p-8 border border-[#FFC92E]/20 shadow-lg",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#FFC92E] rounded-full blur-[100px] opacity-5"}),a.jsxs("form",{className:"relative z-10 space-y-6 max-w-2xl",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Full Name"}),a.jsx("input",{type:"text",defaultValue:(h==null?void 0:h.display_name)||((ae=e==null?void 0:e.user_metadata)==null?void 0:ae.full_name),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Phone"}),a.jsx("input",{type:"tel",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Email"}),a.jsx("input",{disabled:!0,value:e==null?void 0:e.email,className:"w-full bg-black/20 border border-white/5 rounded-lg p-3 text-gray-500 cursor-not-allowed"})]}),a.jsxs("button",{type:"button",className:"px-8 py-3 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D] text-black font-bold rounded-lg hover:shadow-[0_0_20px_rgba(255,201,46,0.2)] transition-all flex items-center gap-2",children:[a.jsx(Nn,{size:18}),"Save Changes"]})]})]})]})]})]})}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] border border-[#FFC92E]/30 shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 p-6 border-b border-white/5 bg-gradient-to-r from-[#0B0B0B] via-[#111] to-[#0B0B0B] flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Edit Profile & Addresses"}),a.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:a.jsx(ft,{size:24,className:"text-white"})})]}),a.jsxs("div",{className:"p-6 space-y-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[a.jsx(Bn,{size:20,className:"text-[#FFC92E]"}),"Personal Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Full Name"}),a.jsx("input",{type:"text",value:b.display_name,onChange:P=>N({...b,display_name:P.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Email"}),a.jsx("input",{type:"email",disabled:!0,value:b.email,className:"w-full bg-black/20 border border-white/5 rounded-lg p-3 text-gray-500 cursor-not-allowed"})]})]})]}),a.jsxs("div",{className:"space-y-4 border-t border-white/5 pt-8",children:[a.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[a.jsx(ku,{size:20,className:"text-[#FFC92E]"}),"Delivery Addresses"]}),p.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Your saved addresses:"}),p.map(P=>a.jsxs("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[a.jsx("p",{className:"font-semibold text-white text-sm mb-1",children:P.label}),a.jsx("p",{className:"text-xs text-gray-400",children:P.line1}),P.neighborhood&&a.jsx("p",{className:"text-xs text-gray-400",children:P.neighborhood}),P.line2&&a.jsx("p",{className:"text-xs text-gray-400",children:P.line2}),a.jsxs("p",{className:"text-xs text-gray-400",children:[P.city,", ",P.state," ",P.postal_code]})]},P.id))]}),a.jsxs("div",{className:"space-y-4 mt-6 p-4 rounded-lg bg-white/[0.02] border border-white/5",children:[a.jsx("h4",{className:"text-sm font-bold text-white",children:"Add New Address"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Address Label"}),a.jsx("input",{type:"text",value:k.label,onChange:P=>j({...k,label:P.target.value}),placeholder:"e.g., Home, Work, Apartment",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Address Line 1"}),a.jsx("input",{type:"text",value:k.line1,onChange:P=>j({...k,line1:P.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Neighborhood/Region"}),a.jsx("input",{type:"text",value:k.neighborhood,onChange:P=>j({...k,neighborhood:P.target.value}),placeholder:"e.g., Shonibare Estate, Maryland",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Address Line 2 (Optional)"}),a.jsx("input",{type:"text",value:k.line2,onChange:P=>j({...k,line2:P.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"City"}),a.jsx("input",{type:"text",value:k.city,onChange:P=>j({...k,city:P.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"State/Province"}),a.jsx("input",{type:"text",value:k.state,onChange:P=>j({...k,state:P.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Country"}),a.jsx("input",{type:"text",value:k.country,onChange:P=>j({...k,country:P.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Postal Code"}),a.jsx("input",{type:"text",value:k.postal_code,onChange:P=>j({...k,postal_code:P.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]})]}),a.jsx("button",{onClick:St,disabled:S,className:"w-full py-3 bg-white/5 border border-white/10 hover:border-[#FFC92E]/50 text-white font-bold rounded-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50",title:"Uses device GPS for accuracy, falls back to IP geolocation",children:S?a.jsxs(a.Fragment,{children:[a.jsx(le,{size:18,className:"animate-spin"}),"Getting Location..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ku,{size:18}),"Use Current Location"]})})]})]})]}),a.jsxs("div",{className:"sticky bottom-0 p-6 border-t border-white/5 bg-gradient-to-r from-[#0B0B0B] via-[#111] to-[#0B0B0B] flex gap-4",children:[a.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-3 bg-white/5 border border-white/10 text-white font-bold rounded-lg hover:bg-white/10 transition-all",children:"Cancel"}),a.jsx("button",{onClick:()=>{Ce(),la()},disabled:w,className:"flex-1 py-3 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D] text-black font-bold rounded-lg hover:shadow-[0_0_20px_rgba(255,201,46,0.3)] transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:w?a.jsxs(a.Fragment,{children:[a.jsx(le,{size:18,className:"animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Nn,{size:18}),"Save Changes"]})})]})]})})]})}function vw({products:e,onProductClick:t}){const r=_.useRef(null),[n,s]=_.useState(0),[i,o]=_.useState(!1),l=300,c=24,u=3e3;_.useEffect(()=>{if(i)return;const p=setInterval(()=>{const y=(n+1)%e.length;h(y)},u);return()=>clearInterval(p)},[n,i,e.length]);const h=p=>{r.current&&(r.current.scrollTo({left:p*(l+c),behavior:"smooth"}),s(p))},f=()=>{if(!r.current)return;const p=r.current.scrollLeft,y=Math.round(p/(l+c));s(y)};return a.jsxs("div",{className:"relative w-full py-12 overflow-hidden",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[a.jsx("div",{ref:r,onScroll:f,className:`\r
          flex gap-6 px-12 overflow-x-auto\r
          scroll-smooth\r
          snap-x snap-mandatory\r
          overflow-y-hidden\r
        `,style:{minHeight:"500px",msOverflowStyle:"none",scrollbarWidth:"none"},children:e.map((p,y)=>{const x=y===n;return a.jsx("div",{className:`
                snap-center shrink-0 transition-all duration-500
                ${x?"scale-100 opacity-100":"scale-90 opacity-50"}
              `,style:{width:l,minHeight:"420px",display:"flex",alignItems:"center"},children:a.jsx("div",{className:"glass-border shadow-2xl w-full",style:{height:"450px"},children:a.jsx(Zf,{product:p,onProductClick:t})})},p.id)})}),a.jsx("div",{className:"flex justify-center gap-2 mt-6",children:e.map((p,y)=>a.jsx("button",{onClick:()=>h(y),className:`rounded-full transition-all duration-300 ${y===n?"w-3 h-3 bg-[#D4AF37]":"w-2 h-2 bg-white/30 hover:bg-white/50"}`},y))})]})}const xw=({texts:e,speed:t=18,pause:r=1300})=>{const[n,s]=_.useState(0),[i,o]=_.useState(""),[l,c]=_.useState(!1);return _.useEffect(()=>{let u=!0,h;const f=e[n%e.length],p=()=>{u&&(o(y=>l?f.substring(0,y.length-1):f.substring(0,y.length+1)),!l&&i===f?h=window.setTimeout(()=>c(!0),r):l&&i===""?(c(!1),s(y=>y+1)):h=window.setTimeout(p,l?t/2:t))};return h=window.setTimeout(p,t),()=>{u=!1,clearTimeout(h)}},[i,l,n,e,t,r]),a.jsxs("span",{className:"typing-text",children:[i,a.jsx("span",{className:"typing-caret","aria-hidden":!0,children:""})]})},Wa=({children:e,className:t=""})=>{const r=_.useRef(null);return _.useEffect(()=>{const n=r.current;if(!n||!("IntersectionObserver"in window)){n==null||n.classList.add("in-view");return}const s=new IntersectionObserver(i=>{i.forEach(o=>{o.isIntersecting&&(o.target.classList.add("in-view"),s.unobserve(o.target))})},{threshold:.15});return s.observe(n),()=>s.disconnect()},[]),a.jsx("div",{ref:r,className:`reveal ${t}`,children:e})};function ww({onNavigate:e}){var o,l;const t=ve(),[r,n]=_.useState([]),[s,i]=_.useState(!0);return _.useEffect(()=>{(async()=>{try{const{data:u,error:h}=await A.from("products").select(`
            *,
            product_images (url, alt_text, position),
            product_categories (
              categories (name)
            )
          `).eq("published",!0).order("created_at",{ascending:!1}).limit(8);if(h)throw h;u&&n(u.map(f=>{var p,y,x,v,w,m;return{id:f.id,name:f.name,brand:f.brand,short_description:f.short_description,image:((y=(p=f.product_images)==null?void 0:p.sort((d,g)=>(d.position||0)-(g.position||0))[0])==null?void 0:y.url)||null,product_images:((x=f.product_images)==null?void 0:x.sort((d,g)=>(d.position||0)-(g.position||0)))||[],category:((m=(w=(v=f.product_categories)==null?void 0:v[0])==null?void 0:w.categories)==null?void 0:m.name)||"Uncategorized"}}))}catch(u){console.error("Error loading featured products:",u)}finally{i(!1)}})()},[]),a.jsxs("div",{children:[a.jsx("main",{className:"flex items-center justify-center w-full py-12 lg:py-20 px-6 lg:px-10",children:a.jsx("div",{className:"w-full max-w-[1280px]",children:a.jsxs("div",{className:"flex flex-col-reverse lg:flex-row items-center gap-16 lg:gap-32",children:[a.jsxs("div",{className:"flex flex-col gap-8 flex-1 lg:max-w-[50%]",children:[a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"h-px w-8 bg-[#d4af37]"}),a.jsx("span",{className:"text-[#d4af37] text-xs font-bold uppercase tracking-widest",children:"Est. 2024"})]}),a.jsx("h1",{className:"text-slate-900 text-5xl sm:text-6xl lg:text-7xl font-extrabold leading-[1.1]",style:{fontFamily:"'Oswald', sans-serif",textShadow:"0 0 6px rgba(236,211,141,0.03), 0 0 14px rgba(231,227,214,0.36)"},children:a.jsx(xw,{texts:["Collect the Exceptional.","Embrace Luxury.","Redefine Excellence."]})}),a.jsx("p",{className:"text-lg sm:text-xl text-slate-600 max-w-[540px]",children:"Discover a curated selection of artifacts designed for the few, not the many. Elevate your everyday with unparalleled craftsmanship."})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 pt-4",children:[a.jsx("button",{onClick:()=>t("/shop"),className:"group relative h-14 px-8 min-w-[180px] rounded-lg bg-gradient-to-r from-[#BF953F] via-[#FCF6BA] to-[#B38728] text-white font-bold uppercase shadow-lg transition active:scale-95",children:"Shop Collection"}),a.jsx("button",{onClick:()=>t("/shop"),className:"h-14 px-8 min-w-[180px] rounded-lg border border-slate-200 font-bold uppercase hover:bg-slate-50",children:"Explore More"}),a.jsx("button",{onClick:()=>t("/vendor/dashboard"),className:"h-14 px-8 min-w-[180px] rounded-lg bg-slate-900 text-white font-bold uppercase border border-slate-700 hover:bg-slate-800",children:"Vendor Portal"})]}),a.jsxs("div",{className:"flex items-center gap-8 pt-8 border-t border-slate-100",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold",children:[r.length,"+"]}),a.jsx("p",{className:"text-sm text-slate-500",children:"Exclusive Items"})]}),a.jsx("div",{className:"w-px h-10 bg-slate-200"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:"Global"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Shipping Available"})]})]})]}),a.jsx("div",{className:"relative w-full lg:flex-1 aspect-square max-h-[700px]",children:a.jsxs("div",{className:"absolute inset-0 rounded-2xl overflow-hidden bg-slate-100 shadow-2xl",children:[(o=r[0])!=null&&o.image?a.jsx("img",{src:r[0].image,alt:r[0].name,className:"w-full h-full object-cover transition-transform duration-700 hover:scale-105"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:"Premium Collection"}),a.jsxs("div",{className:"absolute bottom-6 left-6 right-6 bg-white/95 backdrop-blur p-5 rounded-xl flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wider text-slate-500 font-bold",children:"Featured Collection"}),a.jsx("p",{className:"font-bold text-lg",children:((l=r[0])==null?void 0:l.name)||"Luxury Items"})]}),a.jsx("button",{onClick:()=>{var c;return e("product",(c=r[0])==null?void 0:c.id)},className:"size-10 rounded-full bg-black text-white flex items-center justify-center",children:a.jsx(Xl,{size:20})})]})]})})]})})}),a.jsxs("section",{className:"section",children:[a.jsxs("div",{className:"flex justify-between items-end mb-12",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-serif text-[#D4AF37] mb-4",children:"Featured Collection"}),a.jsx("p",{className:"text-muted max-w-xl",children:"Curated selection of our most exclusive pieces."})]}),a.jsx("button",{onClick:()=>e("shop"),className:"link-gold",children:"View All "})]}),!s&&a.jsx(vw,{products:r,onProductClick:c=>e("product",c)})]}),a.jsx("section",{className:"features-section",children:a.jsxs("div",{className:"container grid grid-cols-3 gap-12",children:[a.jsxs(Wa,{className:"feature-item",children:[a.jsx(Bn,{size:32}),a.jsx("h4",{children:"Premium Quality"}),a.jsx("p",{children:"Only the finest materials"})]}),a.jsxs(Wa,{className:"feature-item",children:[a.jsx(Rf,{size:32}),a.jsx("h4",{children:"Authenticity Guaranteed"}),a.jsx("p",{children:"Verified & certified"})]}),a.jsxs(Wa,{className:"feature-item",children:[a.jsx(ec,{size:32}),a.jsx("h4",{children:"White Glove Delivery"}),a.jsx("p",{children:"Luxury shipping worldwide"})]})]})})]})}const rp=_.createContext({currentSeason:"none",showGreeting:!1,dismissGreeting:()=>{}});function bw({children:e}){const[t,r]=_.useState("none"),[n,s]=_.useState(!1);_.useEffect(()=>{const l=new Date().getMonth();let c="none";if(l===11?c="winter":l===1&&(c="valentine"),r(c),c!=="none"){const u=localStorage.getItem("lastGreetingDate"),h=new Date().toDateString();u!==h&&s(!0)}},[]);const i=()=>{s(!1);const o=new Date().toDateString();localStorage.setItem("lastGreetingDate",o)};return a.jsx(rp.Provider,{value:{currentSeason:t,showGreeting:n,dismissGreeting:i},children:e})}const np=()=>_.useContext(rp);function _w(){const[e,t]=_.useState([]);_.useEffect(()=>{let n=new Date().toISOString();const s=A.channel("public:global_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"global_notifications"},o=>{console.log("Realtime notification received:",o);const l=o.new;l.created_at>n&&(n=l.created_at),t(c=>c.some(u=>u.id===l.id)?c:[l,...c].slice(0,3)),setTimeout(()=>{t(c=>c.filter(u=>u.id!==l.id))},8e3)}).subscribe(),i=setInterval(async()=>{const{data:o}=await A.from("global_notifications").select("*").gt("created_at",n).order("created_at",{ascending:!0});o&&o.length>0&&(console.log("Polled new notifications:",o),n=o[o.length-1].created_at,o.forEach(l=>{t(c=>c.some(u=>u.id===l.id)?c:[l,...c].slice(0,3)),setTimeout(()=>{t(c=>c.filter(u=>u.id!==l.id))},8e3)}))},3e3);return()=>{clearInterval(i),A.removeChannel(s)}},[]);const r=n=>{t(s=>s.filter(i=>i.id!==n))};return console.log("GlobalNotifications rendering with:",e.length,"notifications"),e.length===0?null:a.jsx("div",{className:"fixed bottom-5 left-5 z-50 flex flex-col gap-3 max-w-sm w-full pointer-events-none",style:{zIndex:9999},children:e.map((n,s)=>a.jsx("div",{className:"pointer-events-auto bg-[#0A0A0A]/90 backdrop-blur-md border border-(--gold-primary)/30 p-4 rounded-lg shadow-2xl transform transition-all duration-500 ease-out animate-in slide-in-from-left-full",style:{animationDelay:`${s*100}ms`},children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-(--gold-primary)/10 rounded-full shrink-0",children:a.jsx(ai,{size:18,className:"text-(--gold-primary)"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-white/90 text-sm leading-relaxed font-light",children:n.message}),a.jsx("span",{className:"text-[10px] text-white/40 mt-1 block",children:"Just now"})]}),a.jsx("button",{onClick:()=>r(n.id),className:"text-white/40 hover:text-white transition-colors shrink-0",children:a.jsx(ft,{size:14})})]})},n.id))})}function jw(){const{currentSeason:e}=np();if(e==="none")return null;const r=(n=>Array.from({length:n},(s,i)=>({id:i,left:Math.random()*100,animationDelay:Math.random()*5})))(20);return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"seasonal-overlay",children:[e==="winter"&&a.jsx(a.Fragment,{children:r.map(n=>a.jsx("div",{className:"snowflake",style:{left:`${n.left}%`,animationDelay:`${n.animationDelay}s`},children:""},n.id))}),e==="valentine"&&a.jsx(a.Fragment,{children:r.map(n=>a.jsx("div",{className:"heart",style:{left:`${n.left}%`,animationDelay:`${n.animationDelay}s`},children:""},n.id))})]}),a.jsx("div",{className:"seasonal-banner",children:a.jsx("div",{className:`corner-ribbon ${e==="valentine"?"valentine":""}`,children:e==="winter"?"Season's Greetings":"Happy Valentine's"})})]})}function kw(){const{currentSeason:e,showGreeting:t,dismissGreeting:r}=np();if(!t||e==="none")return null;const s={winter:{icon:"",title:"Happy Holidays!",message:"Wishing you a wonderful holiday season filled with joy and warmth."},valentine:{icon:"",title:"Happy Valentine's!",message:"Spread love and kindness this Valentine's Day."}}[e],i=o=>{o.target===o.currentTarget&&r()};return a.jsx("div",{className:"greeting-modal-backdrop",onClick:i,children:a.jsx("div",{className:"greeting-modal",children:a.jsxs("div",{className:"greeting-modal-content",children:[a.jsx("div",{className:"greeting-modal-icon",children:s.icon}),a.jsx("h2",{className:"greeting-modal-title",children:s.title}),a.jsx("p",{className:"greeting-modal-message",children:s.message}),a.jsx("button",{className:"greeting-modal-close",onClick:r,children:"Continue Shopping"})]})})})}function _s(){const[e,t]=_.useState(null),[r,n]=_.useState(!0),[s,i]=_.useState(null),[o,l]=_.useState(!1),c=async()=>{try{n(!0),i(null);const{data:{user:u},error:h}=await A.auth.getUser();if(h)throw h;if(!u){t(null),l(!1);return}const{data:f,error:p}=await A.from("vendors").select("*").eq("user_id",u.id).single();if(p)if(p.code==="PGRST116")t(null),l(!1);else throw p;else t(f),l(!0)}catch(u){console.error("Error fetching vendor:",u),i(u instanceof Error?u.message:"Failed to fetch vendor data"),l(!1)}finally{n(!1)}};return _.useEffect(()=>{c()},[]),{vendor:e,loading:r,error:s,isVendor:o,refetch:c}}function Nw({children:e}){const t=ve(),{vendor:r}=_s(),n=async()=>{await A.auth.signOut(),t("/")},s=[{to:"/vendor/dashboard",icon:ry,label:"Dashboard"},{to:"/vendor/products",icon:Qt,label:"Products"},{to:"/vendor/orders",icon:Ri,label:"Orders"},{to:"/vendor/profile",icon:$f,label:"Profile"}];return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:()=>t("/"),className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 transition",children:[a.jsx(Ql,{size:20}),a.jsx("span",{className:"hidden sm:inline",children:"Back to Store"})]}),a.jsx("div",{className:"h-6 w-px bg-gray-300"}),a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:(r==null?void 0:r.business_name)||"Vendor Portal"})]}),a.jsxs("button",{onClick:n,className:"inline-flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition",children:[a.jsx(Pf,{size:18}),a.jsx("span",{className:"hidden sm:inline",children:"Sign Out"})]})]})})}),a.jsx("div",{className:"bg-white border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4",children:a.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:s.map(i=>a.jsxs(L0,{to:i.to,className:({isActive:o})=>`inline-flex items-center gap-2 px-4 py-3 border-b-2 font-medium transition whitespace-nowrap ${o?"border-[#D4AF37] text-[#D4AF37]":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:[a.jsx(i.icon,{size:18}),i.label]},i.to))})})}),a.jsx("main",{className:"max-w-7xl mx-auto",children:e}),a.jsx("footer",{className:"bg-white border-t border-gray-200 mt-12",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:a.jsxs("p",{className:"text-center text-sm text-gray-600",children:[" ",new Date().getFullYear()," ",(r==null?void 0:r.business_name)||"My Superstore",". All rights reserved."]})})})]})}function Sw(){const e=ve(),{vendor:t,loading:r,isVendor:n}=_s(),[s,i]=_.useState({totalProducts:0,publishedProducts:0,pendingOrders:0,totalRevenue:0,totalViews:0}),[o,l]=_.useState(!0);_.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(t)try{l(!0);const{data:u,error:h}=await A.from("products").select("id, published, view_count").eq("seller_id",t.id);if(h)throw h;const f=(u==null?void 0:u.length)||0,p=(u==null?void 0:u.filter(d=>d.published).length)||0,y=(u==null?void 0:u.reduce((d,g)=>d+(g.view_count||0),0))||0,x=(u==null?void 0:u.map(d=>d.id))||[];let v=0,w=[];if(x.length>0){const{count:d,error:g}=await A.from("order_items").select("order_id",{count:"exact",head:!0}).in("product_id",x).eq("orders.status","pending");g&&console.error("Error fetching orders:",g),v=d||0;const{data:b,error:N}=await A.from("order_items").select("quantity, unit_price").in("product_id",x);N&&console.error("Error fetching revenue:",N),w=b||[]}const m=(w==null?void 0:w.reduce((d,g)=>d+g.quantity*g.unit_price,0))||0;i({totalProducts:f,publishedProducts:p,pendingOrders:v,totalRevenue:m,totalViews:y})}catch(u){console.error("Error fetching stats:",u)}finally{l(!1)}};return r?a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsx(le,{className:"animate-spin text-[#D4AF37]",size:48})}):!n||!t?a.jsx("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 border-2 border-[#D4AF37]",children:[a.jsx("div",{className:"w-16 h-16 bg-[#D4AF37]/10 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-[#D4AF37]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No Vendor Profile Found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Set up your vendor profile to start selling products and managing your inventory."}),a.jsxs("button",{onClick:()=>e("/vendor/profile"),className:"btn-primary inline-flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Set Up Vendor Profile"]})]})}):o?a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsx(le,{className:"animate-spin text-[#D4AF37]",size:48})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",t.business_name,"!"]}),a.jsx("p",{className:"text-gray-600",children:"Here's what's happening with your store today."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:a.jsx(Qt,{className:"text-blue-600",size:24})}),a.jsx(Df,{className:"text-green-500",size:20})]}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalProducts}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Products"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.publishedProducts," published"]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:a.jsx(Q0,{className:"text-green-600",size:24})})}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",s.totalRevenue.toFixed(2)]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All-time sales"})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:a.jsx(Ri,{className:"text-yellow-600",size:24})})}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.pendingOrders}),a.jsx("p",{className:"text-sm text-gray-600",children:"Pending Orders"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Awaiting processing"})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:a.jsx(Zl,{className:"text-purple-600",size:24})})}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalViews}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Views"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Product page views"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("button",{onClick:()=>e("/vendor/products/new"),className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:border-[#D4AF37] hover:bg-[#D4AF37]/5 transition",children:[a.jsx("div",{className:"p-2 bg-[#D4AF37]/10 rounded-lg",children:a.jsx(dn,{className:"text-[#D4AF37]",size:20})}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Add Product"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Create a new listing"})]})]}),a.jsxs("button",{onClick:()=>e("/vendor/products"),className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:border-[#D4AF37] hover:bg-[#D4AF37]/5 transition",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(Qt,{className:"text-blue-600",size:20})}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-medium text-gray-900",children:"View Products"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage your inventory"})]})]}),a.jsxs("button",{onClick:()=>e("/vendor/orders"),className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:border-[#D4AF37] hover:bg-[#D4AF37]/5 transition",children:[a.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:a.jsx(Ri,{className:"text-yellow-600",size:20})}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-medium text-gray-900",children:"View Orders"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Check pending orders"})]})]})]})]}),!t.is_verified&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:a.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-yellow-900 mb-1",children:"Account Verification Pending"}),a.jsx("p",{className:"text-sm text-yellow-800 mb-3",children:"Your vendor account is pending verification. Complete your profile to speed up the process."}),a.jsx("button",{onClick:()=>e("/vendor/profile"),className:"text-sm font-medium text-yellow-900 hover:underline",children:"Complete Profile "})]})]})})]})}function Ew(e={}){const{search:t="",publishedOnly:r=!1,limit:n=20,offset:s=0}=e,[i,o]=_.useState([]),[l,c]=_.useState(!0),[u,h]=_.useState(null),[f,p]=_.useState(0),y=async()=>{try{c(!0),h(null);const{data:{user:x},error:v}=await A.auth.getUser();if(v)throw v;if(!x)throw new Error("User not authenticated");const{data:w,error:m}=await A.from("vendors").select("id").eq("user_id",x.id).single();if(m)throw m;if(!w)throw new Error("Vendor profile not found");let d=A.from("products").select(`
          *,
          product_images(id, url, alt_text, position),
          product_specs(id, spec_key, spec_value),
          product_categories(categories(id, name, slug))
        `,{count:"exact"}).eq("seller_id",w.id).order("created_at",{ascending:!1});t&&(d=d.or(`name.ilike.%${t}%,sku.ilike.%${t}%,description.ilike.%${t}%`)),r&&(d=d.eq("published",!0)),d=d.range(s,s+n-1);const{data:g,error:b,count:N}=await d;if(b)throw b;o(g||[]),p(N||0)}catch(x){console.error("Error fetching vendor products:",x),h(x instanceof Error?x.message:"Failed to fetch products")}finally{c(!1)}};return _.useEffect(()=>{y()},[t,r,n,s]),{products:i,loading:l,error:u,total:f,refetch:y}}function Cw({product:e,onEdit:t,onDelete:r,onView:n}){var o;const s=(o=e.product_images)==null?void 0:o[0],i=s==null?void 0:s.url;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow h-full flex flex-col w-full max-w-[280px]",children:[a.jsxs("div",{className:"aspect-4/3 bg-gray-100 relative",children:[i?a.jsx("img",{src:s.url,alt:s.alt_text||e.name,className:"w-full h-full object-contain"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.jsx("div",{className:"absolute top-1 right-1",children:e.published?a.jsx("span",{className:"px-1 py-0.5 bg-green-500 text-white text-[9px] font-medium rounded",children:"Published"}):a.jsx("span",{className:"px-1 py-0.5 bg-gray-500 text-white text-[9px] font-medium rounded",children:"Draft"})}),e.stock===0&&a.jsx("div",{className:"absolute top-1 left-1",children:a.jsx("span",{className:"px-1 py-0.5 bg-red-500 text-white text-[9px] font-medium rounded",children:"Out of Stock"})})]}),a.jsxs("div",{className:"p-2 flex-1 flex flex-col",children:[a.jsx("h3",{className:"font-semibold text-xs text-gray-900 mb-0.5 line-clamp-2 leading-tight",children:e.name}),e.sku&&a.jsxs("p",{className:"text-[9px] text-gray-500 mb-1",children:["SKU: ",e.sku]}),a.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1.5",children:[a.jsxs("span",{className:"text-base font-bold text-[#D4AF37]",children:["$",e.price.toFixed(2)]}),a.jsxs("span",{className:"text-[10px] text-gray-500",children:["Stock: ",e.stock]})]}),e.short_description&&a.jsx("p",{className:"text-[10px] text-gray-600 mb-1.5 line-clamp-2 leading-tight",children:e.short_description}),a.jsxs("div",{className:"flex gap-2 text-[9px] text-gray-500 mb-2 pb-1.5 border-b",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:e.view_count})," views"]}),e.brand&&a.jsx("div",{className:"truncate",children:a.jsx("span",{className:"font-medium text-gray-700",children:e.brand})})]}),a.jsxs("div",{className:"flex gap-1 mt-auto",children:[a.jsxs("button",{onClick:()=>n(e.id),className:"flex-1 inline-flex items-center justify-center gap-0.5 px-1.5 py-1 text-[10px] font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded transition",children:[a.jsx(Zl,{size:12}),"View"]}),a.jsxs("button",{onClick:()=>t(e.id),className:"flex-1 inline-flex items-center justify-center gap-0.5 px-1.5 py-1 text-[10px] font-medium text-white bg-[#D4AF37] hover:bg-[#B8941F] rounded transition",children:[a.jsx(Of,{size:12}),"Edit"]}),a.jsx("button",{onClick:()=>r(e.id),className:"px-1.5 py-1 text-red-600 hover:bg-red-50 rounded transition","aria-label":"Delete product",children:a.jsx(If,{size:12})})]})]})]})}function sp({isOpen:e,title:t,message:r,confirmText:n="Confirm",cancelText:s="Cancel",onConfirm:i,onCancel:o,variant:l="danger"}){return e?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:o}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-200",children:[a.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition",children:a.jsx(ft,{size:20})}),a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center ${l==="danger"?"bg-red-100":"bg-yellow-100"}`,children:a.jsx(H0,{className:l==="danger"?"text-red-600":"text-yellow-600",size:24})}),a.jsxs("div",{className:"flex-1 pt-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t}),a.jsx("p",{className:"text-sm text-gray-600",children:r})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:o,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:s}),a.jsx("button",{onClick:i,className:`flex-1 px-4 py-2 text-sm font-medium text-white rounded-lg transition ${l==="danger"?"bg-red-600 hover:bg-red-700":"bg-yellow-600 hover:bg-yellow-700"}`,children:n})]})]})]}):null}function Pw(){const e=ve(),[t,r]=_.useState(""),[n,s]=_.useState(!1),[i,o]=_.useState(0),[l,c]=_.useState(!1),[u,h]=_.useState(null),[f,p]=_.useState(!1),y=12,x=i*y,{products:v,loading:w,error:m,total:d,refetch:g}=Ew({search:t,publishedOnly:n,limit:y,offset:x}),b=Math.ceil(d/y),N=async()=>{if(u){p(!0);try{const{error:j}=await A.from("products").delete().eq("id",u);if(j)throw j;c(!1),h(null),g()}catch(j){console.error("Error deleting product:",j),alert("Failed to delete product")}finally{p(!1)}}},k=j=>{h(j),c(!0)};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Products"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:[d," products total"]})]}),a.jsxs("button",{onClick:()=>e("/vendor/products/new"),className:"btn-primary inline-flex items-center gap-2",children:[a.jsx(dn,{size:20}),"Add Product"]})]}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(Ff,{className:"absolute left-3 top-2.5 text-gray-400",size:20}),a.jsx("input",{type:"text",value:t,onChange:j=>{r(j.target.value),o(0)},placeholder:"Search products by name, SKU, or description...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:n,onChange:j=>{s(j.target.checked),o(0)},className:"w-4 h-4 text-[#D4AF37] border-gray-300 rounded focus:ring-[#D4AF37]"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Published only"})]})]})}),m&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg mb-6",children:m}),w&&a.jsx("div",{className:"flex justify-center items-center py-20",children:a.jsx(le,{className:"animate-spin text-[#D4AF37]",size:48})}),!w&&v.length===0&&a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t?"No products found":"No products yet"}),a.jsx("p",{className:"text-gray-600 mb-6",children:t?"Try adjusting your search or filters":"Get started by adding your first product"}),!t&&a.jsxs("button",{onClick:()=>e("/vendor/products/new"),className:"btn-primary inline-flex items-center gap-2",children:[a.jsx(dn,{size:20}),"Add Your First Product"]})]}),!w&&v.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 justify-items-center mb-8",children:v.map(j=>a.jsx(Cw,{product:j,onEdit:S=>e(`/vendor/products/${S}/edit`),onDelete:k,onView:S=>e(`/vendor/products/${S}`)},j.id))}),b>1&&a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("button",{onClick:()=>o(Math.max(0,i-1)),disabled:i===0,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Previous"}),a.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",i+1," of ",b]}),a.jsx("button",{onClick:()=>o(Math.min(b-1,i+1)),disabled:i>=b-1,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Next"})]})]}),a.jsx(sp,{isOpen:l,title:"Delete Product",message:"Are you sure you want to delete this product? This action cannot be undone.",confirmText:f?"Deleting...":"Delete",onConfirm:N,onCancel:()=>{c(!1),h(null)},variant:"danger"})]})}const Aw="69bcf51fbec18d562474ec6674ff8539",Tw="https://api.imgbb.com/1/upload";async function ip(e){if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(e.type))throw new Error("Invalid file type. Only JPEG, PNG, WEBP, and GIF are allowed.");const r=5*1024*1024;if(e.size>r)throw new Error("File size exceeds 5MB limit");const n=new FormData;n.append("image",e),n.append("key",Aw);try{const s=await fetch(Tw,{method:"POST",body:n});if(!s.ok)throw new Error(`Upload failed: ${s.statusText}`);const i=await s.json();if(!i.success)throw new Error("ImgBB upload failed");return{url:i.data.url,displayUrl:i.data.display_url,deleteUrl:i.data.delete_url}}catch(s){throw console.error("ImgBB upload error:",s),new Error(s instanceof Error?s.message:"Failed to upload image to ImgBB")}}async function Fw(e){try{const r=(await fetch(e,{method:"HEAD"})).headers.get("content-type");return(r==null?void 0:r.startsWith("image/"))??!1}catch{return!1}}function Rw({images:e,onChange:t,maxImages:r=10}){const[n,s]=_.useState("file"),[i,o]=_.useState(""),[l,c]=_.useState(!1),[u,h]=_.useState(null),[f,p]=_.useState(null),y=_.useRef(null),x=async k=>{if(!k||k.length===0)return;const j=k[0];c(!0),h(null);try{const F={url:(await ip(j)).displayUrl,alt_text:j.name.replace(/\.[^/.]+$/,""),position:e.length};t([...e,F])}catch(S){h(S instanceof Error?S.message:"Upload failed")}finally{c(!1)}},v=async()=>{if(i.trim()){c(!0),h(null);try{if(!await Fw(i))throw new Error("Invalid image URL");const j={url:i,alt_text:"",position:e.length};t([...e,j]),o("")}catch(k){h(k instanceof Error?k.message:"Invalid URL")}finally{c(!1)}}},w=k=>{const S=e.filter((F,C)=>C!==k).map((F,C)=>({...F,position:C}));t(S)},m=(k,j)=>{const S=[...e];S[k]={...S[k],alt_text:j},t(S)},d=k=>{p(k)},g=(k,j)=>{if(k.preventDefault(),f===null||f===j)return;const S=[...e],F=S[f];S.splice(f,1),S.splice(j,0,F);const C=S.map((I,V)=>({...I,position:V}));t(C),p(j)},b=()=>{p(null)},N=e.length<r;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2 mb-4",children:[a.jsx("button",{type:"button",onClick:()=>s("file"),className:`px-4 py-2 rounded-lg font-medium transition ${n==="file"?"bg-[#D4AF37] text-black":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Upload File"}),a.jsx("button",{type:"button",onClick:()=>s("url"),className:`px-4 py-2 rounded-lg font-medium transition ${n==="url"?"bg-[#D4AF37] text-black":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Paste URL"})]}),N&&a.jsxs(a.Fragment,{children:[n==="file"&&a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[a.jsx("input",{ref:y,type:"file",accept:"image/*",onChange:k=>x(k.target.files),className:"hidden"}),a.jsx(Wo,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-600 mb-2",children:"Drag & drop or click to upload"}),a.jsx("button",{type:"button",onClick:()=>{var k;return(k=y.current)==null?void 0:k.click()},disabled:l,className:"btn-primary inline-flex items-center gap-2",children:l?a.jsxs(a.Fragment,{children:[a.jsx(le,{className:"animate-spin",size:16}),"Uploading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Wo,{size:16}),"Choose File"]})}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"PNG, JPG, WEBP up to 5MB"})]}),n==="url"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"url",value:i,onChange:k=>o(k.target.value),placeholder:"https://example.com/image.jpg",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",onKeyDown:k=>k.key==="Enter"&&v()})}),a.jsx("button",{type:"button",onClick:v,disabled:l||!i.trim(),className:"btn-primary inline-flex items-center gap-2",children:l?a.jsx(le,{className:"animate-spin",size:16}):a.jsxs(a.Fragment,{children:[a.jsx(ny,{size:16}),"Add URL"]})})]})]}),u&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg",children:u}),e.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Images (",e.length,"/",r,")"]}),e.map((k,j)=>a.jsxs("div",{draggable:!0,onDragStart:()=>d(j),onDragOver:S=>g(S,j),onDragEnd:b,className:"flex items-start gap-3 p-3 border border-gray-200 rounded-lg bg-white hover:border-gray-300 transition cursor-move",children:[a.jsx(Z0,{className:"text-gray-400 mt-1 flex-shrink-0",size:20}),a.jsx("img",{src:k.url,alt:k.alt_text||"Product image",className:"w-20 h-20 object-cover rounded border border-gray-200 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("input",{type:"text",value:k.alt_text||"",onChange:S=>m(j,S.target.value),placeholder:"Alt text (optional)",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1 truncate",children:["Position: ",j+1]})]}),a.jsx("button",{type:"button",onClick:()=>w(j),className:"p-2 text-red-600 hover:bg-red-50 rounded transition flex-shrink-0",children:a.jsx(ft,{size:18})})]},j))]}),!N&&a.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Maximum ",r," images reached"]})]})}function Ow({specs:e,onChange:t}){const r=()=>{const o={spec_key:"",spec_value:""};t([...e,o])},n=o=>{t(e.filter((l,c)=>c!==o))},s=(o,l)=>{const c=[...e];c[o]={...c[o],spec_key:l},t(c)},i=(o,l)=>{const c=[...e];c[o]={...c[o],spec_value:l},t(c)};return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product Specifications"}),a.jsxs("button",{type:"button",onClick:r,className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-[#D4AF37] hover:bg-[#D4AF37]/10 rounded-lg transition",children:[a.jsx(dn,{size:16}),"Add Spec"]})]}),e.length===0&&a.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[a.jsx("p",{className:"text-gray-500 text-sm",children:"No specifications added yet"}),a.jsx("button",{type:"button",onClick:r,className:"mt-2 text-[#D4AF37] hover:underline text-sm font-medium",children:"Add your first specification"})]}),e.length>0&&a.jsx("div",{className:"space-y-2",children:e.map((o,l)=>a.jsxs("div",{className:"flex gap-2 items-start",children:[a.jsx("input",{type:"text",value:o.spec_key,onChange:c=>s(l,c.target.value),placeholder:"Key (e.g., Weight)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent"}),a.jsx("input",{type:"text",value:o.spec_value||"",onChange:c=>i(l,c.target.value),placeholder:"Value (e.g., 2.5kg)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent"}),a.jsx("button",{type:"button",onClick:()=>n(l),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition","aria-label":"Remove specification",children:a.jsx(ft,{size:20})})]},l))}),e.length>0&&a.jsxs("p",{className:"text-xs text-gray-500",children:[e.length," specification",e.length!==1?"s":""," added"]})]})}function Iw({selectedIds:e,onChange:t}){const[r,n]=_.useState([]),[s,i]=_.useState(!0),[o,l]=_.useState(!1);_.useEffect(()=>{c()},[]);const c=async()=>{try{const{data:p,error:y}=await A.from("categories").select("*").order("name");if(y)throw y;n(p||[])}catch(p){console.error("Error fetching categories:",p)}finally{i(!1)}},u=p=>{e.includes(p)?t(e.filter(y=>y!==p)):t([...e,p])},h=p=>{t(e.filter(y=>y!==p))},f=r.filter(p=>e.includes(p.id));return a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Categories"}),f.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:f.map(p=>a.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-[#D4AF37]/10 text-[#D4AF37] rounded-full text-sm font-medium",children:[p.name,a.jsx("button",{type:"button",onClick:()=>h(p.id),className:"hover:bg-[#D4AF37]/20 rounded-full p-0.5",children:a.jsx(ft,{size:14})})]},p.id))}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>l(!o),className:"w-full px-4 py-2 text-left border border-gray-300 rounded-lg bg-white hover:border-gray-400 focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent transition flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-700",children:e.length>0?`${e.length} selected`:"Select categories"}),a.jsx(Yl,{className:`text-gray-400 transition-transform ${o?"rotate-180":""}`,size:20})]}),o&&a.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[s&&a.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"Loading categories..."}),!s&&r.length===0&&a.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No categories available"}),!s&&r.map(p=>{const y=e.includes(p.id);return a.jsxs("label",{className:"flex items-center px-4 py-2 hover:bg-gray-50 cursor-pointer transition",children:[a.jsx("input",{type:"checkbox",checked:y,onChange:()=>u(p.id),className:"w-4 h-4 text-[#D4AF37] border-gray-300 rounded focus:ring-[#D4AF37]"}),a.jsx("span",{className:"ml-3 text-sm text-gray-700",children:p.name})]},p.id)})]})]}),e.length===0&&a.jsx("p",{className:"text-xs text-gray-500",children:"Select at least one category for your product"})]})}function td(){const{id:e}=Jl(),t=ve(),{vendor:r,loading:n}=_s(),s=!!e,[i,o]=_.useState({name:"",sku:"",price:0,stock:0,short_description:"",description:"",brand:"",published:!1,images:[],specs:[],category_ids:[]}),[l,c]=_.useState(s),[u,h]=_.useState(!1),[f,p]=_.useState(null),[y,x]=_.useState(!1),[v,w]=_.useState(0),[m,d]=_.useState(0);_.useEffect(()=>{s&&e&&g(e)},[e,s]);const g=async j=>{try{c(!0);const{data:S,error:F}=await A.from("products").select(`
          *,
          product_images(*),
          product_specs(*),
          product_categories(category_id)
        `).eq("id",j).single();if(F)throw F;S&&o({name:S.name,sku:S.sku||"",price:S.price,stock:S.stock,short_description:S.short_description||"",description:S.description||"",brand:S.brand||"",published:S.published,images:(S.product_images||[]).sort((C,I)=>C.position-I.position),specs:S.product_specs||[],category_ids:(S.product_categories||[]).map(C=>C.category_id)})}catch(S){console.error("Error fetching product:",S),p("Failed to load product")}finally{c(!1)}},b=async j=>{if(j.preventDefault(),!r){p("Vendor profile not found");return}h(!0),p(null);try{if(!i.name.trim())throw new Error("Product name is required");if(i.price<=0)throw new Error("Price must be greater than 0");if(i.category_ids.length===0)throw new Error("Select at least one category");s&&e?await k(e):await N(),t("/vendor/products")}catch(S){console.error("Error saving product:",S),p(S instanceof Error?S.message:"Failed to save product")}finally{h(!1)}},N=async()=>{if(!r)return;const j=i.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),{data:S,error:F}=await A.from("products").insert({name:i.name,slug:j,sku:i.sku||null,short_description:i.short_description||null,description:i.description||null,price:i.price,stock:i.stock,brand:i.brand||null,published:i.published,seller_id:r.id}).select().single();if(F)throw F;if(i.images.length>0){const C=i.images.map(V=>({product_id:S.id,url:V.url,alt_text:V.alt_text,position:V.position})),{error:I}=await A.from("product_images").insert(C);if(I)throw I}if(i.specs.length>0){const C=i.specs.filter(I=>I.spec_key.trim()).map(I=>({product_id:S.id,spec_key:I.spec_key,spec_value:I.spec_value}));if(C.length>0){const{error:I}=await A.from("product_specs").insert(C);if(I)throw I}}if(i.category_ids.length>0){const C=i.category_ids.map(V=>({product_id:S.id,category_id:V})),{error:I}=await A.from("product_categories").insert(C);if(I)throw I}},k=async j=>{const{error:S}=await A.from("products").update({name:i.name,sku:i.sku||null,short_description:i.short_description||null,description:i.description||null,price:i.price,stock:i.stock,brand:i.brand||null,published:i.published,updated_at:new Date().toISOString()}).eq("id",j);if(S)throw S;if(await A.from("product_images").delete().eq("product_id",j),i.images.length>0){const C=i.images.map(V=>({product_id:j,url:V.url,alt_text:V.alt_text,position:V.position})),{error:I}=await A.from("product_images").insert(C);if(I)throw I}await A.from("product_specs").delete().eq("product_id",j);const F=i.specs.filter(C=>C.spec_key.trim());if(F.length>0){const C=F.map(V=>({product_id:j,spec_key:V.spec_key,spec_value:V.spec_value})),{error:I}=await A.from("product_specs").insert(C);if(I)throw I}if(await A.from("product_categories").delete().eq("product_id",j),i.category_ids.length>0){const C=i.category_ids.map(V=>({product_id:j,category_id:V})),{error:I}=await A.from("product_categories").insert(C);if(I)throw I}};return n||l?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(le,{className:"animate-spin text-[#D4AF37]",size:48})}):r?a.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:()=>t("/vendor/products"),className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[a.jsx(Ql,{size:20}),"Back to Products"]}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s?"Edit Product":"New Product"})]}),f&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg mb-6",children:f}),a.jsxs("form",{onSubmit:b,className:"space-y-8",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Basic Information"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",value:i.name,onChange:j=>o({...i,name:j.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Enter product name"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),a.jsx("input",{type:"text",value:i.sku,onChange:j=>o({...i,sku:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"e.g., PROD-001"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),a.jsx("input",{type:"text",value:i.brand,onChange:j=>o({...i,brand:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Enter brand name"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price *"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"isPriceRange",checked:y,onChange:j=>x(j.target.checked),className:"w-4 h-4 cursor-pointer"}),a.jsx("label",{htmlFor:"isPriceRange",className:"text-sm text-gray-600 cursor-pointer",children:"Use price range"})]}),y?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{children:"Min Price"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:"$"}),a.jsx("input",{type:"number",value:v,onChange:j=>w(parseFloat(j.target.value)||0),min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Min: 0.00"})]}),a.jsx("p",{children:"Max Price"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:"$"}),a.jsx("input",{type:"number",value:m,onChange:j=>d(parseFloat(j.target.value)||0),min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Max: 0.00"})]})]}):a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:"$"}),a.jsx("input",{type:"number",value:i.price,onChange:j=>o({...i,price:parseFloat(j.target.value)||0}),min:"0",step:"0.01",required:!0,className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"0.00"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock *"}),a.jsx("input",{type:"number",value:i.stock,onChange:j=>o({...i,stock:parseInt(j.target.value)||0}),min:"0",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"0"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Description"}),a.jsx("input",{type:"text",value:i.short_description,onChange:j=>o({...i,short_description:j.target.value}),maxLength:200,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Brief product description (max 200 characters)"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[i.short_description.length,"/200 characters"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:i.description,onChange:j=>o({...i,description:j.target.value}),rows:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Detailed product description"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Images"}),a.jsx(Rw,{images:i.images,onChange:j=>o({...i,images:j}),maxImages:10})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Categories *"}),a.jsx(Iw,{selectedIds:i.category_ids,onChange:j=>o({...i,category_ids:j})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Specifications"}),a.jsx(Ow,{specs:i.specs,onChange:j=>o({...i,specs:j})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Publishing"}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:i.published,onChange:j=>o({...i,published:j.target.checked}),className:"w-5 h-5 text-[#D4AF37] border-gray-300 rounded focus:ring-[#D4AF37]"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Publish this product"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Published products are visible to customers"})]})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{type:"button",onClick:()=>t("/vendor/products"),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:u,className:"flex-1 btn-primary inline-flex items-center justify-center gap-2",children:u?a.jsxs(a.Fragment,{children:[a.jsx(le,{className:"animate-spin",size:20}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Tf,{size:20}),s?"Update Product":"Create Product"]})})]})]})]}):a.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Vendor Access Required"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"You need a vendor account to manage products."}),a.jsx("button",{onClick:()=>t("/vendor/profile"),className:"btn-primary",children:"Set Up Vendor Profile"})]})}function Dw(){var v,w;const{id:e}=Jl(),t=ve(),[r,n]=_.useState(null),[s,i]=_.useState(!0),[o,l]=_.useState(!1),[c,u]=_.useState(!1);_.useEffect(()=>{e&&h(e)},[e]);const h=async m=>{try{const{data:d,error:g}=await A.from("products").select(`
          *,
          product_images(*),
          product_specs(*),
          product_categories(categories(*))
        `).eq("id",m).single();if(g)throw g;n(d)}catch(d){console.error("Error fetching product:",d)}finally{i(!1)}},f=async()=>{if(e){u(!0);try{const{error:m}=await A.from("products").delete().eq("id",e);if(m)throw m;t("/vendor/products")}catch(m){console.error("Error deleting product:",m),alert("Failed to delete product")}finally{u(!1)}}};if(s)return a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsx(le,{className:"animate-spin text-[#D4AF37]",size:48})});if(!r)return a.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Product Not Found"}),a.jsx("button",{onClick:()=>t("/vendor/products"),className:"btn-primary",children:"Back to Products"})]});const p=((v=r.product_images)==null?void 0:v.sort((m,d)=>m.position-d.position))||[],y=r.product_specs||[],x=((w=r.product_categories)==null?void 0:w.map(m=>m.categories).filter(Boolean))||[];return a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:()=>t("/vendor/products"),className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[a.jsx(Ql,{size:20}),"Back to Products"]}),a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.name}),r.published?a.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm font-medium rounded-full",children:"Published"}):a.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm font-medium rounded-full",children:"Draft"})]}),r.sku&&a.jsxs("p",{className:"text-gray-500",children:["SKU: ",r.sku]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>t(`/vendor/products/${r.id}/edit`),className:"btn-primary inline-flex items-center gap-2",children:[a.jsx(Of,{size:18}),"Edit"]}),a.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 text-red-600 border border-red-600 hover:bg-red-50 rounded-lg transition",children:a.jsx(If,{size:18})})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-[#D4AF37]/10 rounded-lg",children:a.jsx(Qt,{className:"text-[#D4AF37]",size:24})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.stock}),a.jsx("p",{className:"text-sm text-gray-600",children:"In Stock"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(Zl,{className:"text-blue-600",size:24})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.view_count}),a.jsx("p",{className:"text-sm text-gray-600",children:"Views"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(Df,{className:"text-green-600",size:24})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",r.price.toFixed(2)]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Price"})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Images"}),p.length>0?a.jsx("div",{className:"space-y-4",children:p.map((m,d)=>a.jsxs("div",{children:[a.jsx("img",{src:m.url,alt:m.alt_text||`Product image ${d+1}`,className:"w-full rounded-lg border border-gray-200"}),m.alt_text&&a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:m.alt_text})]},m.id||d))}):a.jsx("p",{className:"text-gray-500 text-sm",children:"No images uploaded"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Details"}),a.jsxs("dl",{className:"space-y-3",children:[r.brand&&a.jsxs("div",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Brand"}),a.jsx("dd",{className:"text-sm text-gray-900",children:r.brand})]}),a.jsxs("div",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Price"}),a.jsxs("dd",{className:"text-2xl font-bold text-[#D4AF37]",children:["$",r.price.toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Stock"}),a.jsx("dd",{className:`text-sm font-medium ${r.stock>0?"text-green-600":"text-red-600"}`,children:r.stock>0?`${r.stock} units available`:"Out of stock"})]})]})]}),x.length>0&&a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Categories"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(m=>a.jsx("span",{className:"px-3 py-1 bg-[#D4AF37]/10 text-[#D4AF37] rounded-full text-sm font-medium",children:m.name},m.id))})]}),y.length>0&&a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Specifications"}),a.jsx("dl",{className:"space-y-2",children:y.map(m=>a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 last:border-0",children:[a.jsx("dt",{className:"text-sm font-medium text-gray-700",children:m.spec_key}),a.jsx("dd",{className:"text-sm text-gray-900",children:m.spec_value})]},m.id))})]})]})]}),(r.short_description||r.description)&&a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mt-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Description"}),r.short_description&&a.jsx("p",{className:"text-gray-700 mb-4 font-medium",children:r.short_description}),r.description&&a.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:r.description})]}),a.jsx(sp,{isOpen:o,title:"Delete Product",message:"Are you sure you want to delete this product? This action cannot be undone.",confirmText:c?"Deleting...":"Delete",onConfirm:f,onCancel:()=>l(!1),variant:"danger"})]})}function $w(){const{vendor:e,loading:t}=_s(),[r,n]=_.useState([]),[s,i]=_.useState(!0),[o,l]=_.useState("all");_.useEffect(()=>{e&&c()},[e,o]);const c=async()=>{if(e)try{i(!0);const{data:f,error:p}=await A.from("products").select("id").eq("seller_id",e.id);if(p)throw p;const y=(f==null?void 0:f.map(g=>g.id))||[];if(y.length===0){n([]);return}let x=A.from("order_items").select(`
          *,
          products(id, name, price),
          orders!inner(
            id,
            status,
            total_amount,
            currency,
            placed_at,
            updated_at,
            shipping_address:addresses(*)
          )
        `).in("product_id",y).order("created_at",{ascending:!1});const{data:v,error:w}=await x;if(w)throw w;const m=new Map;v==null||v.forEach(g=>{const b=g.orders.id;m.has(b)||m.set(b,{...g.orders,order_items:[]});const N=m.get(b);N.order_items=N.order_items||[],N.order_items.push({...g,products:g.products})});let d=Array.from(m.values());o!=="all"&&(d=d.filter(g=>g.status===o)),n(d)}catch(f){console.error("Error fetching orders:",f)}finally{i(!1)}};if(t||s)return a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsx(le,{className:"animate-spin text-[#D4AF37]",size:48})});const u=f=>{switch(f){case"pending":return a.jsx(J0,{className:"text-yellow-600",size:20});case"completed":return a.jsx(Cf,{className:"text-green-600",size:20});case"shipped":return a.jsx(Qt,{className:"text-blue-600",size:20});case"cancelled":return a.jsx(cy,{className:"text-red-600",size:20});default:return null}},h=f=>{switch(f){case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"shipped":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Orders"}),a.jsx("p",{className:"text-gray-600",children:"Manage orders containing your products"})]}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-6",children:a.jsx("div",{className:"flex gap-2 overflow-x-auto",children:["all","pending","shipped","completed","cancelled"].map(f=>a.jsx("button",{onClick:()=>l(f),className:`px-4 py-2 rounded-lg font-medium transition whitespace-nowrap ${o===f?"bg-[#D4AF37] text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:f.charAt(0).toUpperCase()+f.slice(1)},f))})}),r.length===0?a.jsxs("div",{className:"text-center py-20 bg-white rounded-lg border border-gray-200",children:[a.jsx(Qt,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Orders Found"}),a.jsx("p",{className:"text-gray-600",children:o==="all"?"No orders containing your products yet":`No ${o} orders`})]}):a.jsx("div",{className:"space-y-4",children:r.map(f=>{var p;return a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4 pb-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Order #",f.id.slice(0,8)]}),a.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${h(f.status)}`,children:[u(f.status),f.status.charAt(0).toUpperCase()+f.status.slice(1)]})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Placed on ",new Date(f.placed_at).toLocaleDateString()," at"," ",new Date(f.placed_at).toLocaleTimeString()]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-2xl font-bold text-[#D4AF37]",children:["$",f.total_amount.toFixed(2)]}),a.jsx("p",{className:"text-sm text-gray-600",children:f.currency})]})]}),a.jsxs("div",{className:"space-y-3 mb-4",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Your Products in this Order:"}),(p=f.order_items)==null?void 0:p.map(y=>{var x;return a.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900",children:((x=y.products)==null?void 0:x.name)||"Unknown Product"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",y.quantity,"  $",y.unit_price.toFixed(2)]})]}),a.jsxs("p",{className:"font-semibold text-gray-900",children:["$",(y.quantity*y.unit_price).toFixed(2)]})]},y.id)})]}),f.shipping_address&&a.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Shipping Address"}),a.jsxs("p",{className:"text-sm text-gray-600",children:[f.shipping_address.line1,f.shipping_address.line2&&`, ${f.shipping_address.line2}`,a.jsx("br",{}),f.shipping_address.city,", ",f.shipping_address.state," ",f.shipping_address.postal_code,a.jsx("br",{}),f.shipping_address.country]})]})]},f.id)})})]})}function Lw(){const{vendor:e,loading:t,refetch:r}=_s(),[n,s]=_.useState({business_name:"",email:"",phone:"",country:"",city:"",address:"",bank_name:"",bank_account_number:"",bank_account_name:"",payout_currency:"USD",logo_url:""}),[i,o]=_.useState(!1),[l,c]=_.useState(!1),[u,h]=_.useState(null),[f,p]=_.useState(!1);_.useEffect(()=>{e&&s({business_name:e.business_name,email:e.email,phone:e.phone||"",country:e.country||"",city:e.city||"",address:e.address||"",bank_name:e.bank_name||"",bank_account_number:e.bank_account_number||"",bank_account_name:e.bank_account_name||"",payout_currency:e.payout_currency||"USD",logo_url:e.logo_url||""})},[e]);const y=async v=>{o(!0),h(null);try{const w=await ip(v);s({...n,logo_url:w.displayUrl})}catch(w){h(w instanceof Error?w.message:"Logo upload failed")}finally{o(!1)}},x=async v=>{var w,m;v.preventDefault(),c(!0),h(null),p(!1);try{if(!((w=n.business_name)!=null&&w.trim()))throw new Error("Business name is required");if(!((m=n.email)!=null&&m.trim()))throw new Error("Email is required");if(e){const{error:d}=await A.from("vendors").update({business_name:n.business_name,email:n.email,phone:n.phone,country:n.country,city:n.city,address:n.address,bank_name:n.bank_name,bank_account_number:n.bank_account_number,bank_account_name:n.bank_account_name,payout_currency:n.payout_currency,logo_url:n.logo_url,updated_at:new Date().toISOString()}).eq("id",e.id);if(d)throw d}else{const{data:{user:d},error:g}=await A.auth.getUser();if(g)throw g;if(!d)throw new Error("User not authenticated");const{data:b}=await A.from("user_profiles").select("id").eq("user_id",d.id).maybeSingle();if(!b){const{error:k}=await A.from("user_profiles").insert({user_id:d.id,email:d.email,display_name:n.business_name||"Vendor"});if(k&&(console.error("Error creating user profile:",k),k.code!=="23505"))throw new Error(`Failed to create base user profile: ${k.message}`)}const{error:N}=await A.from("vendors").insert({user_id:d.id,business_name:n.business_name,email:n.email,phone:n.phone,country:n.country,city:n.city,address:n.address,bank_name:n.bank_name,bank_account_number:n.bank_account_number,bank_account_name:n.bank_account_name,payout_currency:n.payout_currency,logo_url:n.logo_url});if(N)throw N}p(!0),await r(),setTimeout(()=>p(!1),3e3)}catch(d){console.error("Error saving vendor profile:",d),h(d instanceof Error?d.message:"Failed to save profile")}finally{c(!1)}};return t?a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsx(le,{className:"animate-spin text-[#D4AF37]",size:48})}):a.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Vendor Profile"}),a.jsx("p",{className:"text-gray-600",children:e?"Update your vendor information":"Create your vendor profile"})]}),u&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg mb-6",children:u}),f&&a.jsx("div",{className:"bg-green-50 text-green-600 px-4 py-3 rounded-lg mb-6",children:"Profile saved successfully!"}),e&&!e.is_verified&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:"Verification Pending:"})," Your vendor account is under review. You can still manage products, but they may not be visible to customers until verified."]})}),a.jsxs("form",{onSubmit:x,className:"space-y-8",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Business Information"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Logo"}),a.jsxs("div",{className:"flex items-center gap-4",children:[n.logo_url&&a.jsx("img",{src:n.logo_url,alt:"Business logo",className:"w-24 h-24 object-cover rounded-lg border border-gray-200"}),a.jsxs("label",{className:"cursor-pointer",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:v=>{var w;(w=v.target.files)!=null&&w[0]&&y(v.target.files[0])},className:"hidden"}),a.jsx("div",{className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition",children:i?a.jsxs(a.Fragment,{children:[a.jsx(le,{className:"animate-spin",size:16}),"Uploading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Wo,{size:16}),"Upload Logo"]})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name *"}),a.jsx("input",{type:"text",value:n.business_name,onChange:v=>s({...n,business_name:v.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Your business name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),a.jsx("input",{type:"email",value:n.email,onChange:v=>s({...n,email:v.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"business@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),a.jsx("input",{type:"tel",value:n.phone||"",onChange:v=>s({...n,phone:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"+1 234 567 8900"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),a.jsx("input",{type:"text",value:n.country||"",onChange:v=>s({...n,country:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"United States"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),a.jsx("input",{type:"text",value:n.city||"",onChange:v=>s({...n,city:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"New York"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),a.jsx("textarea",{value:n.address||"",onChange:v=>s({...n,address:v.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Full business address"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Bank Details"}),a.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Required for receiving payments from sales"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),a.jsx("input",{type:"text",value:n.bank_name||"",onChange:v=>s({...n,bank_name:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"e.g., Chase Bank"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),a.jsx("input",{type:"text",value:n.bank_account_number||"",onChange:v=>s({...n,bank_account_number:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Account number"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Holder Name"}),a.jsx("input",{type:"text",value:n.bank_account_name||"",onChange:v=>s({...n,bank_account_name:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Name on bank account"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payout Currency"}),a.jsxs("select",{value:n.payout_currency,onChange:v=>s({...n,payout_currency:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",children:[a.jsx("option",{value:"USD",children:"USD - US Dollar"}),a.jsx("option",{value:"EUR",children:"EUR - Euro"}),a.jsx("option",{value:"GBP",children:"GBP - British Pound"}),a.jsx("option",{value:"NGN",children:"NGN - Nigerian Naira"})]})]})]})]}),a.jsx("div",{className:"flex gap-4",children:a.jsx("button",{type:"submit",disabled:l,className:"flex-1 btn-primary inline-flex items-center justify-center gap-2",children:l?a.jsxs(a.Fragment,{children:[a.jsx(le,{className:"animate-spin",size:20}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Tf,{size:20}),"Save Profile"]})})})]})]})}const Uw=()=>{const{itemCount:e}=oa();return a.jsx(Gx,{cartItemCount:e})};function zw(){const e=ve(),t=(r,n)=>{switch(r){case"home":e("/");break;case"shop":e("/shop",{state:n});break;case"product":n&&e(`/product/${n}`);break;case"vendor/dashboard":e("/vendor/dashboard");break;default:e(`/${r}`)}};return a.jsx(ew,{children:a.jsx(tw,{children:a.jsxs(bw,{children:[a.jsx(jw,{}),a.jsx(kw,{}),a.jsx(_w,{}),a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Uw,{}),a.jsx("main",{className:"grow px-0 sm:px-0 lg:px-0",children:a.jsxs(xu,{children:[a.jsx(de,{path:"/",element:a.jsx(Zu,{})}),a.jsx(de,{path:"/shop",element:a.jsx(Xx,{onNavigate:t})}),a.jsx(de,{path:"/product/:id",element:a.jsx(rw,{})}),a.jsx(de,{path:"/cart",element:a.jsx(nw,{onNavigate:t})}),a.jsx(de,{path:"/checkout",element:a.jsx(lw,{})}),a.jsx(de,{path:"/order-confirmation",element:a.jsx(cw,{})}),a.jsx(de,{path:"/login",element:a.jsx(uw,{})}),a.jsx(de,{path:"/account",element:a.jsx(yw,{})}),a.jsx(de,{path:"/about",element:a.jsx(ww,{onNavigate:t})}),a.jsx(de,{path:"/vendor/*",element:a.jsx(Nw,{children:a.jsxs(xu,{children:[a.jsx(de,{path:"dashboard",element:a.jsx(Sw,{})}),a.jsx(de,{path:"products",element:a.jsx(Pw,{})}),a.jsx(de,{path:"products/new",element:a.jsx(td,{})}),a.jsx(de,{path:"products/:id",element:a.jsx(Dw,{})}),a.jsx(de,{path:"products/:id/edit",element:a.jsx(td,{})}),a.jsx(de,{path:"orders",element:a.jsx($w,{})}),a.jsx(de,{path:"profile",element:a.jsx(Lw,{})})]})})}),a.jsx(de,{path:"*",element:a.jsx(Zu,{})})]})}),a.jsx(Jx,{})]})]})})})}mf(document.getElementById("root")).render(a.jsx(_.StrictMode,{children:a.jsx(I0,{children:a.jsx(zw,{})})}));
