function hp(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function fp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rd={exports:{}},Mi={},nd={exports:{}},M={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ws=Symbol.for("react.element"),pp=Symbol.for("react.portal"),mp=Symbol.for("react.fragment"),gp=Symbol.for("react.strict_mode"),xp=Symbol.for("react.profiler"),vp=Symbol.for("react.provider"),yp=Symbol.for("react.context"),wp=Symbol.for("react.forward_ref"),bp=Symbol.for("react.suspense"),_p=Symbol.for("react.memo"),jp=Symbol.for("react.lazy"),cc=Symbol.iterator;function kp(e){return e===null||typeof e!="object"?null:(e=cc&&e[cc]||e["@@iterator"],typeof e=="function"?e:null)}var sd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},id=Object.assign,ad={};function xn(e,t,r){this.props=e,this.context=t,this.refs=ad,this.updater=r||sd}xn.prototype.isReactComponent={};xn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function od(){}od.prototype=xn.prototype;function al(e,t,r){this.props=e,this.context=t,this.refs=ad,this.updater=r||sd}var ol=al.prototype=new od;ol.constructor=al;id(ol,xn.prototype);ol.isPureReactComponent=!0;var uc=Array.isArray,ld=Object.prototype.hasOwnProperty,ll={current:null},cd={key:!0,ref:!0,__self:!0,__source:!0};function ud(e,t,r){var n,s={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)ld.call(t,n)&&!cd.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ws,type:e,key:a,ref:o,props:s,_owner:ll.current}}function Np(e,t){return{$$typeof:ws,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cl(e){return typeof e=="object"&&e!==null&&e.$$typeof===ws}function Sp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var dc=/\/+/g;function fa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sp(""+e.key):t.toString(36)}function Zs(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ws:case pp:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+fa(o,0):n,uc(s)?(r="",e!=null&&(r=e.replace(dc,"$&/")+"/"),Zs(s,t,r,"",function(u){return u})):s!=null&&(cl(s)&&(s=Np(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(dc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",uc(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+fa(a,l);o+=Zs(a,t,r,c,s)}else if(c=kp(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+fa(a,l++),o+=Zs(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ps(e,t,r){if(e==null)return e;var n=[],s=0;return Zs(e,n,"","",function(a){return t.call(r,a,s++)}),n}function Ep(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Oe={current:null},ei={transition:null},Cp={ReactCurrentDispatcher:Oe,ReactCurrentBatchConfig:ei,ReactCurrentOwner:ll};function dd(){throw Error("act(...) is not supported in production builds of React.")}M.Children={map:Ps,forEach:function(e,t,r){Ps(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ps(e,function(){t++}),t},toArray:function(e){return Ps(e,function(t){return t})||[]},only:function(e){if(!cl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};M.Component=xn;M.Fragment=mp;M.Profiler=xp;M.PureComponent=al;M.StrictMode=gp;M.Suspense=bp;M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cp;M.act=dd;M.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=id({},e.props),s=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=ll.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ld.call(t,c)&&!cd.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:ws,type:e.type,key:s,ref:a,props:n,_owner:o}};M.createContext=function(e){return e={$$typeof:yp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vp,_context:e},e.Consumer=e};M.createElement=ud;M.createFactory=function(e){var t=ud.bind(null,e);return t.type=e,t};M.createRef=function(){return{current:null}};M.forwardRef=function(e){return{$$typeof:wp,render:e}};M.isValidElement=cl;M.lazy=function(e){return{$$typeof:jp,_payload:{_status:-1,_result:e},_init:Ep}};M.memo=function(e,t){return{$$typeof:_p,type:e,compare:t===void 0?null:t}};M.startTransition=function(e){var t=ei.transition;ei.transition={};try{e()}finally{ei.transition=t}};M.unstable_act=dd;M.useCallback=function(e,t){return Oe.current.useCallback(e,t)};M.useContext=function(e){return Oe.current.useContext(e)};M.useDebugValue=function(){};M.useDeferredValue=function(e){return Oe.current.useDeferredValue(e)};M.useEffect=function(e,t){return Oe.current.useEffect(e,t)};M.useId=function(){return Oe.current.useId()};M.useImperativeHandle=function(e,t,r){return Oe.current.useImperativeHandle(e,t,r)};M.useInsertionEffect=function(e,t){return Oe.current.useInsertionEffect(e,t)};M.useLayoutEffect=function(e,t){return Oe.current.useLayoutEffect(e,t)};M.useMemo=function(e,t){return Oe.current.useMemo(e,t)};M.useReducer=function(e,t,r){return Oe.current.useReducer(e,t,r)};M.useRef=function(e){return Oe.current.useRef(e)};M.useState=function(e){return Oe.current.useState(e)};M.useSyncExternalStore=function(e,t,r){return Oe.current.useSyncExternalStore(e,t,r)};M.useTransition=function(){return Oe.current.useTransition()};M.version="18.3.1";nd.exports=M;var _=nd.exports;const Pp=fp(_),Ap=hp({__proto__:null,default:Pp},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp=_,Fp=Symbol.for("react.element"),Rp=Symbol.for("react.fragment"),Op=Object.prototype.hasOwnProperty,Ip=Tp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dp={key:!0,ref:!0,__self:!0,__source:!0};function hd(e,t,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Op.call(t,n)&&!Dp.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Fp,type:e,key:a,ref:o,props:s,_owner:Ip.current}}Mi.Fragment=Rp;Mi.jsx=hd;Mi.jsxs=hd;rd.exports=Mi;var i=rd.exports,fd={exports:{}},He={},pd={exports:{}},md={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,U){var z=F.length;F.push(U);e:for(;0<z;){var Z=z-1>>>1,ue=F[Z];if(0<s(ue,U))F[Z]=U,F[z]=ue,z=Z;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var U=F[0],z=F.pop();if(z!==U){F[0]=z;e:for(var Z=0,ue=F.length,E=ue>>>1;Z<E;){var B=2*(Z+1)-1,K=F[B],ee=B+1,Te=F[ee];if(0>s(K,z))ee<ue&&0>s(Te,K)?(F[Z]=Te,F[ee]=z,Z=ee):(F[Z]=K,F[B]=z,Z=B);else if(ee<ue&&0>s(Te,z))F[Z]=Te,F[ee]=z,Z=ee;else break e}}return U}function s(F,U){var z=F.sortIndex-U.sortIndex;return z!==0?z:F.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,x=!1,y=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(F){for(var U=r(u);U!==null;){if(U.callback===null)n(u);else if(U.startTime<=F)n(u),U.sortIndex=U.expirationTime,t(c,U);else break;U=r(u)}}function w(F){if(v=!1,g(F),!y)if(r(c)!==null)y=!0,Sr(S);else{var U=r(u);U!==null&&Er(w,U.startTime-F)}}function S(F,U){y=!1,v&&(v=!1,m(N),N=-1),x=!0;var z=f;try{for(g(U),h=r(c);h!==null&&(!(h.expirationTime>U)||F&&!O());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var ue=Z(h.expirationTime<=U);U=e.unstable_now(),typeof ue=="function"?h.callback=ue:h===r(c)&&n(c),g(U)}else n(c);h=r(c)}if(h!==null)var E=!0;else{var B=r(u);B!==null&&Er(w,B.startTime-U),E=!1}return E}finally{h=null,f=z,x=!1}}var k=!1,j=null,N=-1,P=5,C=-1;function O(){return!(e.unstable_now()-C<P)}function W(){if(j!==null){var F=e.unstable_now();C=F;var U=!0;try{U=j(!0,F)}finally{U?Se():(k=!1,j=null)}}else k=!1}var Se;if(typeof p=="function")Se=function(){p(W)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ce=V.port2;V.port1.onmessage=W,Se=function(){ce.postMessage(null)}}else Se=function(){b(W,0)};function Sr(F){j=F,k||(k=!0,Se())}function Er(F,U){N=b(function(){F(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,Sr(S))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(F){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var z=f;f=U;try{return F()}finally{f=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,U){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var z=f;f=F;try{return U()}finally{f=z}},e.unstable_scheduleCallback=function(F,U,z){var Z=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Z+z:Z):z=Z,F){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=z+ue,F={id:d++,callback:U,priorityLevel:F,startTime:z,expirationTime:ue,sortIndex:-1},z>Z?(F.sortIndex=z,t(u,F),r(c)===null&&F===r(u)&&(v?(m(N),N=-1):v=!0,Er(w,z-Z))):(F.sortIndex=ue,t(c,F),y||x||(y=!0,Sr(S))),F},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(F){var U=f;return function(){var z=f;f=U;try{return F.apply(this,arguments)}finally{f=z}}}})(md);pd.exports=md;var Lp=pd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p=_,Ve=Lp;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gd=new Set,Kn={};function kr(e,t){on(e,t),on(e+"Capture",t)}function on(e,t){for(Kn[e]=t,e=0;e<t.length;e++)gd.add(t[e])}var _t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ka=Object.prototype.hasOwnProperty,Up=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hc={},fc={};function zp(e){return Ka.call(fc,e)?!0:Ka.call(hc,e)?!1:Up.test(e)?fc[e]=!0:(hc[e]=!0,!1)}function Mp(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Bp(e,t,r,n){if(t===null||typeof t>"u"||Mp(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ie(e,t,r,n,s,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ne[e]=new Ie(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ne[t]=new Ie(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ne[e]=new Ie(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ne[e]=new Ie(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ne[e]=new Ie(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ne[e]=new Ie(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ne[e]=new Ie(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ne[e]=new Ie(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ne[e]=new Ie(e,5,!1,e.toLowerCase(),null,!1,!1)});var ul=/[\-:]([a-z])/g;function dl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ul,dl);Ne[t]=new Ie(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ul,dl);Ne[t]=new Ie(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ul,dl);Ne[t]=new Ie(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ne[e]=new Ie(e,1,!1,e.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new Ie("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ne[e]=new Ie(e,1,!1,e.toLowerCase(),null,!0,!0)});function hl(e,t,r,n){var s=Ne.hasOwnProperty(t)?Ne[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Bp(t,r,s,n)&&(r=null),n||s===null?zp(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Et=$p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,As=Symbol.for("react.element"),Ur=Symbol.for("react.portal"),zr=Symbol.for("react.fragment"),fl=Symbol.for("react.strict_mode"),Ja=Symbol.for("react.profiler"),xd=Symbol.for("react.provider"),vd=Symbol.for("react.context"),pl=Symbol.for("react.forward_ref"),Qa=Symbol.for("react.suspense"),Ya=Symbol.for("react.suspense_list"),ml=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),yd=Symbol.for("react.offscreen"),pc=Symbol.iterator;function _n(e){return e===null||typeof e!="object"?null:(e=pc&&e[pc]||e["@@iterator"],typeof e=="function"?e:null)}var ie=Object.assign,pa;function Tn(e){if(pa===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);pa=t&&t[1]||""}return`
`+pa+e}var ma=!1;function ga(e,t){if(!e||ma)return"";ma=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{ma=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Tn(e):""}function Wp(e){switch(e.tag){case 5:return Tn(e.type);case 16:return Tn("Lazy");case 13:return Tn("Suspense");case 19:return Tn("SuspenseList");case 0:case 2:case 15:return e=ga(e.type,!1),e;case 11:return e=ga(e.type.render,!1),e;case 1:return e=ga(e.type,!0),e;default:return""}}function Xa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zr:return"Fragment";case Ur:return"Portal";case Ja:return"Profiler";case fl:return"StrictMode";case Qa:return"Suspense";case Ya:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vd:return(e.displayName||"Context")+".Consumer";case xd:return(e._context.displayName||"Context")+".Provider";case pl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ml:return t=e.displayName||null,t!==null?t:Xa(e.type)||"Memo";case Ft:t=e._payload,e=e._init;try{return Xa(e(t))}catch{}}return null}function qp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xa(t);case 8:return t===fl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vp(e){var t=wd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ts(e){e._valueTracker||(e._valueTracker=Vp(e))}function bd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=wd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function di(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Za(e,t){var r=t.checked;return ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function mc(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Yt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _d(e,t){t=t.checked,t!=null&&hl(e,"checked",t,!1)}function eo(e,t){_d(e,t);var r=Yt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?to(e,t.type,r):t.hasOwnProperty("defaultValue")&&to(e,t.type,Yt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function gc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function to(e,t,r){(t!=="number"||di(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Fn=Array.isArray;function Xr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Yt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ro(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(A(92));if(Fn(r)){if(1<r.length)throw Error(A(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Yt(r)}}function jd(e,t){var r=Yt(t.value),n=Yt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function vc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function kd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function no(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?kd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fs,Nd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Fs=Fs||document.createElement("div"),Fs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Jn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hp=["Webkit","ms","Moz","O"];Object.keys(Dn).forEach(function(e){Hp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dn[t]=Dn[e]})});function Sd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Dn.hasOwnProperty(e)&&Dn[e]?(""+t).trim():t+"px"}function Ed(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Sd(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Gp=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function so(e,t){if(t){if(Gp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function io(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ao=null;function gl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oo=null,Zr=null,en=null;function yc(e){if(e=js(e)){if(typeof oo!="function")throw Error(A(280));var t=e.stateNode;t&&(t=Hi(t),oo(e.stateNode,e.type,t))}}function Cd(e){Zr?en?en.push(e):en=[e]:Zr=e}function Pd(){if(Zr){var e=Zr,t=en;if(en=Zr=null,yc(e),t)for(e=0;e<t.length;e++)yc(t[e])}}function Ad(e,t){return e(t)}function Td(){}var xa=!1;function Fd(e,t,r){if(xa)return e(t,r);xa=!0;try{return Ad(e,t,r)}finally{xa=!1,(Zr!==null||en!==null)&&(Td(),Pd())}}function Qn(e,t){var r=e.stateNode;if(r===null)return null;var n=Hi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(A(231,t,typeof r));return r}var lo=!1;if(_t)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){lo=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{lo=!1}function Kp(e,t,r,n,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Ln=!1,hi=null,fi=!1,co=null,Jp={onError:function(e){Ln=!0,hi=e}};function Qp(e,t,r,n,s,a,o,l,c){Ln=!1,hi=null,Kp.apply(Jp,arguments)}function Yp(e,t,r,n,s,a,o,l,c){if(Qp.apply(this,arguments),Ln){if(Ln){var u=hi;Ln=!1,hi=null}else throw Error(A(198));fi||(fi=!0,co=u)}}function Nr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Rd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wc(e){if(Nr(e)!==e)throw Error(A(188))}function Xp(e){var t=e.alternate;if(!t){if(t=Nr(e),t===null)throw Error(A(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return wc(s),e;if(a===n)return wc(s),t;a=a.sibling}throw Error(A(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(A(189))}}if(r.alternate!==n)throw Error(A(190))}if(r.tag!==3)throw Error(A(188));return r.stateNode.current===r?e:t}function Od(e){return e=Xp(e),e!==null?Id(e):null}function Id(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Id(e);if(t!==null)return t;e=e.sibling}return null}var Dd=Ve.unstable_scheduleCallback,bc=Ve.unstable_cancelCallback,Zp=Ve.unstable_shouldYield,em=Ve.unstable_requestPaint,de=Ve.unstable_now,tm=Ve.unstable_getCurrentPriorityLevel,xl=Ve.unstable_ImmediatePriority,Ld=Ve.unstable_UserBlockingPriority,pi=Ve.unstable_NormalPriority,rm=Ve.unstable_LowPriority,$d=Ve.unstable_IdlePriority,Bi=null,pt=null;function nm(e){if(pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(Bi,e,void 0,(e.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:am,sm=Math.log,im=Math.LN2;function am(e){return e>>>=0,e===0?32:31-(sm(e)/im|0)|0}var Rs=64,Os=4194304;function Rn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mi(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Rn(l):(a&=o,a!==0&&(n=Rn(a)))}else o=r&~s,o!==0?n=Rn(o):a!==0&&(n=Rn(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ot(t),s=1<<r,n|=e[r],t&=~s;return n}function om(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lm(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=om(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function uo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ud(){var e=Rs;return Rs<<=1,!(Rs&4194240)&&(Rs=64),e}function va(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ot(t),e[t]=r}function cm(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ot(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function vl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var H=0;function zd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Md,yl,Bd,Wd,qd,ho=!1,Is=[],Mt=null,Bt=null,Wt=null,Yn=new Map,Xn=new Map,It=[],um="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _c(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Bt=null;break;case"mouseover":case"mouseout":Wt=null;break;case"pointerover":case"pointerout":Yn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xn.delete(t.pointerId)}}function kn(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=js(t),t!==null&&yl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function dm(e,t,r,n,s){switch(t){case"focusin":return Mt=kn(Mt,e,t,r,n,s),!0;case"dragenter":return Bt=kn(Bt,e,t,r,n,s),!0;case"mouseover":return Wt=kn(Wt,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Yn.set(a,kn(Yn.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Xn.set(a,kn(Xn.get(a)||null,e,t,r,n,s)),!0}return!1}function Vd(e){var t=fr(e.target);if(t!==null){var r=Nr(t);if(r!==null){if(t=r.tag,t===13){if(t=Rd(r),t!==null){e.blockedOn=t,qd(e.priority,function(){Bd(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ti(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=fo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);ao=n,r.target.dispatchEvent(n),ao=null}else return t=js(r),t!==null&&yl(t),e.blockedOn=r,!1;t.shift()}return!0}function jc(e,t,r){ti(e)&&r.delete(t)}function hm(){ho=!1,Mt!==null&&ti(Mt)&&(Mt=null),Bt!==null&&ti(Bt)&&(Bt=null),Wt!==null&&ti(Wt)&&(Wt=null),Yn.forEach(jc),Xn.forEach(jc)}function Nn(e,t){e.blockedOn===t&&(e.blockedOn=null,ho||(ho=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,hm)))}function Zn(e){function t(s){return Nn(s,e)}if(0<Is.length){Nn(Is[0],e);for(var r=1;r<Is.length;r++){var n=Is[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Mt!==null&&Nn(Mt,e),Bt!==null&&Nn(Bt,e),Wt!==null&&Nn(Wt,e),Yn.forEach(t),Xn.forEach(t),r=0;r<It.length;r++)n=It[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<It.length&&(r=It[0],r.blockedOn===null);)Vd(r),r.blockedOn===null&&It.shift()}var tn=Et.ReactCurrentBatchConfig,gi=!0;function fm(e,t,r,n){var s=H,a=tn.transition;tn.transition=null;try{H=1,wl(e,t,r,n)}finally{H=s,tn.transition=a}}function pm(e,t,r,n){var s=H,a=tn.transition;tn.transition=null;try{H=4,wl(e,t,r,n)}finally{H=s,tn.transition=a}}function wl(e,t,r,n){if(gi){var s=fo(e,t,r,n);if(s===null)Ca(e,t,n,xi,r),_c(e,n);else if(dm(s,e,t,r,n))n.stopPropagation();else if(_c(e,n),t&4&&-1<um.indexOf(e)){for(;s!==null;){var a=js(s);if(a!==null&&Md(a),a=fo(e,t,r,n),a===null&&Ca(e,t,n,xi,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Ca(e,t,n,null,r)}}var xi=null;function fo(e,t,r,n){if(xi=null,e=gl(n),e=fr(e),e!==null)if(t=Nr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Rd(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xi=e,null}function Hd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tm()){case xl:return 1;case Ld:return 4;case pi:case rm:return 16;case $d:return 536870912;default:return 16}default:return 16}}var $t=null,bl=null,ri=null;function Gd(){if(ri)return ri;var e,t=bl,r=t.length,n,s="value"in $t?$t.value:$t.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[a-n];n++);return ri=s.slice(e,1<n?1-n:void 0)}function ni(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ds(){return!0}function kc(){return!1}function Ge(e){function t(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ds:kc,this.isPropagationStopped=kc,this}return ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),t}var vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=Ge(vn),_s=ie({},vn,{view:0,detail:0}),mm=Ge(_s),ya,wa,Sn,Wi=ie({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sn&&(Sn&&e.type==="mousemove"?(ya=e.screenX-Sn.screenX,wa=e.screenY-Sn.screenY):wa=ya=0,Sn=e),ya)},movementY:function(e){return"movementY"in e?e.movementY:wa}}),Nc=Ge(Wi),gm=ie({},Wi,{dataTransfer:0}),xm=Ge(gm),vm=ie({},_s,{relatedTarget:0}),ba=Ge(vm),ym=ie({},vn,{animationName:0,elapsedTime:0,pseudoElement:0}),wm=Ge(ym),bm=ie({},vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_m=Ge(bm),jm=ie({},vn,{data:0}),Sc=Ge(jm),km={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Em(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sm[e])?!!t[e]:!1}function jl(){return Em}var Cm=ie({},_s,{key:function(e){if(e.key){var t=km[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ni(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jl,charCode:function(e){return e.type==="keypress"?ni(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ni(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pm=Ge(Cm),Am=ie({},Wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ec=Ge(Am),Tm=ie({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jl}),Fm=Ge(Tm),Rm=ie({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Om=Ge(Rm),Im=ie({},Wi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dm=Ge(Im),Lm=[9,13,27,32],kl=_t&&"CompositionEvent"in window,$n=null;_t&&"documentMode"in document&&($n=document.documentMode);var $m=_t&&"TextEvent"in window&&!$n,Kd=_t&&(!kl||$n&&8<$n&&11>=$n),Cc=" ",Pc=!1;function Jd(e,t){switch(e){case"keyup":return Lm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mr=!1;function Um(e,t){switch(e){case"compositionend":return Qd(t);case"keypress":return t.which!==32?null:(Pc=!0,Cc);case"textInput":return e=t.data,e===Cc&&Pc?null:e;default:return null}}function zm(e,t){if(Mr)return e==="compositionend"||!kl&&Jd(e,t)?(e=Gd(),ri=bl=$t=null,Mr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Kd&&t.locale!=="ko"?null:t.data;default:return null}}var Mm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ac(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mm[e.type]:t==="textarea"}function Yd(e,t,r,n){Cd(n),t=vi(t,"onChange"),0<t.length&&(r=new _l("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Un=null,es=null;function Bm(e){lh(e,0)}function qi(e){var t=qr(e);if(bd(t))return e}function Wm(e,t){if(e==="change")return t}var Xd=!1;if(_t){var _a;if(_t){var ja="oninput"in document;if(!ja){var Tc=document.createElement("div");Tc.setAttribute("oninput","return;"),ja=typeof Tc.oninput=="function"}_a=ja}else _a=!1;Xd=_a&&(!document.documentMode||9<document.documentMode)}function Fc(){Un&&(Un.detachEvent("onpropertychange",Zd),es=Un=null)}function Zd(e){if(e.propertyName==="value"&&qi(es)){var t=[];Yd(t,es,e,gl(e)),Fd(Bm,t)}}function qm(e,t,r){e==="focusin"?(Fc(),Un=t,es=r,Un.attachEvent("onpropertychange",Zd)):e==="focusout"&&Fc()}function Vm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qi(es)}function Hm(e,t){if(e==="click")return qi(t)}function Gm(e,t){if(e==="input"||e==="change")return qi(t)}function Km(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ct=typeof Object.is=="function"?Object.is:Km;function ts(e,t){if(ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Ka.call(t,s)||!ct(e[s],t[s]))return!1}return!0}function Rc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Oc(e,t){var r=Rc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Rc(r)}}function eh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?eh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function th(){for(var e=window,t=di();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=di(e.document)}return t}function Nl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Jm(e){var t=th(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&eh(r.ownerDocument.documentElement,r)){if(n!==null&&Nl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=Oc(r,a);var o=Oc(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qm=_t&&"documentMode"in document&&11>=document.documentMode,Br=null,po=null,zn=null,mo=!1;function Ic(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mo||Br==null||Br!==di(n)||(n=Br,"selectionStart"in n&&Nl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),zn&&ts(zn,n)||(zn=n,n=vi(po,"onSelect"),0<n.length&&(t=new _l("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Br)))}function Ls(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Wr={animationend:Ls("Animation","AnimationEnd"),animationiteration:Ls("Animation","AnimationIteration"),animationstart:Ls("Animation","AnimationStart"),transitionend:Ls("Transition","TransitionEnd")},ka={},rh={};_t&&(rh=document.createElement("div").style,"AnimationEvent"in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),"TransitionEvent"in window||delete Wr.transitionend.transition);function Vi(e){if(ka[e])return ka[e];if(!Wr[e])return e;var t=Wr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in rh)return ka[e]=t[r];return e}var nh=Vi("animationend"),sh=Vi("animationiteration"),ih=Vi("animationstart"),ah=Vi("transitionend"),oh=new Map,Dc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zt(e,t){oh.set(e,t),kr(t,[e])}for(var Na=0;Na<Dc.length;Na++){var Sa=Dc[Na],Ym=Sa.toLowerCase(),Xm=Sa[0].toUpperCase()+Sa.slice(1);Zt(Ym,"on"+Xm)}Zt(nh,"onAnimationEnd");Zt(sh,"onAnimationIteration");Zt(ih,"onAnimationStart");Zt("dblclick","onDoubleClick");Zt("focusin","onFocus");Zt("focusout","onBlur");Zt(ah,"onTransitionEnd");on("onMouseEnter",["mouseout","mouseover"]);on("onMouseLeave",["mouseout","mouseover"]);on("onPointerEnter",["pointerout","pointerover"]);on("onPointerLeave",["pointerout","pointerover"]);kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var On="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zm=new Set("cancel close invalid load scroll toggle".split(" ").concat(On));function Lc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Yp(n,t,void 0,e),e.currentTarget=null}function lh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;Lc(s,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;Lc(s,l,u),a=c}}}if(fi)throw e=co,fi=!1,co=null,e}function Y(e,t){var r=t[wo];r===void 0&&(r=t[wo]=new Set);var n=e+"__bubble";r.has(n)||(ch(t,e,2,!1),r.add(n))}function Ea(e,t,r){var n=0;t&&(n|=4),ch(r,e,n,t)}var $s="_reactListening"+Math.random().toString(36).slice(2);function rs(e){if(!e[$s]){e[$s]=!0,gd.forEach(function(r){r!=="selectionchange"&&(Zm.has(r)||Ea(r,!1,e),Ea(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$s]||(t[$s]=!0,Ea("selectionchange",!1,t))}}function ch(e,t,r,n){switch(Hd(t)){case 1:var s=fm;break;case 4:s=pm;break;default:s=wl}r=s.bind(null,t,r,e),s=void 0,!lo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ca(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=fr(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}Fd(function(){var u=a,d=gl(r),h=[];e:{var f=oh.get(e);if(f!==void 0){var x=_l,y=e;switch(e){case"keypress":if(ni(r)===0)break e;case"keydown":case"keyup":x=Pm;break;case"focusin":y="focus",x=ba;break;case"focusout":y="blur",x=ba;break;case"beforeblur":case"afterblur":x=ba;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=xm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Fm;break;case nh:case sh:case ih:x=wm;break;case ah:x=Om;break;case"scroll":x=mm;break;case"wheel":x=Dm;break;case"copy":case"cut":case"paste":x=_m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Ec}var v=(t&4)!==0,b=!v&&e==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var p=u,g;p!==null;){g=p;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,m!==null&&(w=Qn(p,m),w!=null&&v.push(ns(p,w,g)))),b)break;p=p.return}0<v.length&&(f=new x(f,y,null,r,d),h.push({event:f,listeners:v}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",f&&r!==ao&&(y=r.relatedTarget||r.fromElement)&&(fr(y)||y[jt]))break e;if((x||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,x?(y=r.relatedTarget||r.toElement,x=u,y=y?fr(y):null,y!==null&&(b=Nr(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=u),x!==y)){if(v=Nc,w="onMouseLeave",m="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(v=Ec,w="onPointerLeave",m="onPointerEnter",p="pointer"),b=x==null?f:qr(x),g=y==null?f:qr(y),f=new v(w,p+"leave",x,r,d),f.target=b,f.relatedTarget=g,w=null,fr(d)===u&&(v=new v(m,p+"enter",y,r,d),v.target=g,v.relatedTarget=b,w=v),b=w,x&&y)t:{for(v=x,m=y,p=0,g=v;g;g=Pr(g))p++;for(g=0,w=m;w;w=Pr(w))g++;for(;0<p-g;)v=Pr(v),p--;for(;0<g-p;)m=Pr(m),g--;for(;p--;){if(v===m||m!==null&&v===m.alternate)break t;v=Pr(v),m=Pr(m)}v=null}else v=null;x!==null&&$c(h,f,x,v,!1),y!==null&&b!==null&&$c(h,b,y,v,!0)}}e:{if(f=u?qr(u):window,x=f.nodeName&&f.nodeName.toLowerCase(),x==="select"||x==="input"&&f.type==="file")var S=Wm;else if(Ac(f))if(Xd)S=Gm;else{S=Vm;var k=qm}else(x=f.nodeName)&&x.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Hm);if(S&&(S=S(e,u))){Yd(h,S,r,d);break e}k&&k(e,f,u),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&to(f,"number",f.value)}switch(k=u?qr(u):window,e){case"focusin":(Ac(k)||k.contentEditable==="true")&&(Br=k,po=u,zn=null);break;case"focusout":zn=po=Br=null;break;case"mousedown":mo=!0;break;case"contextmenu":case"mouseup":case"dragend":mo=!1,Ic(h,r,d);break;case"selectionchange":if(Qm)break;case"keydown":case"keyup":Ic(h,r,d)}var j;if(kl)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Mr?Jd(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(Kd&&r.locale!=="ko"&&(Mr||N!=="onCompositionStart"?N==="onCompositionEnd"&&Mr&&(j=Gd()):($t=d,bl="value"in $t?$t.value:$t.textContent,Mr=!0)),k=vi(u,N),0<k.length&&(N=new Sc(N,e,null,r,d),h.push({event:N,listeners:k}),j?N.data=j:(j=Qd(r),j!==null&&(N.data=j)))),(j=$m?Um(e,r):zm(e,r))&&(u=vi(u,"onBeforeInput"),0<u.length&&(d=new Sc("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=j))}lh(h,t)})}function ns(e,t,r){return{instance:e,listener:t,currentTarget:r}}function vi(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Qn(e,r),a!=null&&n.unshift(ns(e,a,s)),a=Qn(e,t),a!=null&&n.push(ns(e,a,s))),e=e.return}return n}function Pr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $c(e,t,r,n,s){for(var a=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Qn(r,a),c!=null&&o.unshift(ns(r,c,l))):s||(c=Qn(r,a),c!=null&&o.push(ns(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var eg=/\r\n?/g,tg=/\u0000|\uFFFD/g;function Uc(e){return(typeof e=="string"?e:""+e).replace(eg,`
`).replace(tg,"")}function Us(e,t,r){if(t=Uc(t),Uc(e)!==t&&r)throw Error(A(425))}function yi(){}var go=null,xo=null;function vo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yo=typeof setTimeout=="function"?setTimeout:void 0,rg=typeof clearTimeout=="function"?clearTimeout:void 0,zc=typeof Promise=="function"?Promise:void 0,ng=typeof queueMicrotask=="function"?queueMicrotask:typeof zc<"u"?function(e){return zc.resolve(null).then(e).catch(sg)}:yo;function sg(e){setTimeout(function(){throw e})}function Pa(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Zn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Zn(t)}function qt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Mc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var yn=Math.random().toString(36).slice(2),ft="__reactFiber$"+yn,ss="__reactProps$"+yn,jt="__reactContainer$"+yn,wo="__reactEvents$"+yn,ig="__reactListeners$"+yn,ag="__reactHandles$"+yn;function fr(e){var t=e[ft];if(t)return t;for(var r=e.parentNode;r;){if(t=r[jt]||r[ft]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Mc(e);e!==null;){if(r=e[ft])return r;e=Mc(e)}return t}e=r,r=e.parentNode}return null}function js(e){return e=e[ft]||e[jt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function Hi(e){return e[ss]||null}var bo=[],Vr=-1;function er(e){return{current:e}}function X(e){0>Vr||(e.current=bo[Vr],bo[Vr]=null,Vr--)}function Q(e,t){Vr++,bo[Vr]=e.current,e.current=t}var Xt={},Ae=er(Xt),$e=er(!1),yr=Xt;function ln(e,t){var r=e.type.contextTypes;if(!r)return Xt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ue(e){return e=e.childContextTypes,e!=null}function wi(){X($e),X(Ae)}function Bc(e,t,r){if(Ae.current!==Xt)throw Error(A(168));Q(Ae,t),Q($e,r)}function uh(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(A(108,qp(e)||"Unknown",s));return ie({},r,n)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xt,yr=Ae.current,Q(Ae,e),Q($e,$e.current),!0}function Wc(e,t,r){var n=e.stateNode;if(!n)throw Error(A(169));r?(e=uh(e,t,yr),n.__reactInternalMemoizedMergedChildContext=e,X($e),X(Ae),Q(Ae,e)):X($e),Q($e,r)}var vt=null,Gi=!1,Aa=!1;function dh(e){vt===null?vt=[e]:vt.push(e)}function og(e){Gi=!0,dh(e)}function tr(){if(!Aa&&vt!==null){Aa=!0;var e=0,t=H;try{var r=vt;for(H=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}vt=null,Gi=!1}catch(s){throw vt!==null&&(vt=vt.slice(e+1)),Dd(xl,tr),s}finally{H=t,Aa=!1}}return null}var Hr=[],Gr=0,_i=null,ji=0,Ke=[],Je=0,wr=null,yt=1,wt="";function or(e,t){Hr[Gr++]=ji,Hr[Gr++]=_i,_i=e,ji=t}function hh(e,t,r){Ke[Je++]=yt,Ke[Je++]=wt,Ke[Je++]=wr,wr=e;var n=yt;e=wt;var s=32-ot(n)-1;n&=~(1<<s),r+=1;var a=32-ot(t)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,yt=1<<32-ot(t)+s|r<<s|n,wt=a+e}else yt=1<<a|r<<s|n,wt=e}function Sl(e){e.return!==null&&(or(e,1),hh(e,1,0))}function El(e){for(;e===_i;)_i=Hr[--Gr],Hr[Gr]=null,ji=Hr[--Gr],Hr[Gr]=null;for(;e===wr;)wr=Ke[--Je],Ke[Je]=null,wt=Ke[--Je],Ke[Je]=null,yt=Ke[--Je],Ke[Je]=null}var qe=null,We=null,re=!1,at=null;function fh(e,t){var r=Qe(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function qc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qe=e,We=qt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qe=e,We=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=wr!==null?{id:yt,overflow:wt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qe(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,qe=e,We=null,!0):!1;default:return!1}}function _o(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jo(e){if(re){var t=We;if(t){var r=t;if(!qc(e,t)){if(_o(e))throw Error(A(418));t=qt(r.nextSibling);var n=qe;t&&qc(e,t)?fh(n,r):(e.flags=e.flags&-4097|2,re=!1,qe=e)}}else{if(_o(e))throw Error(A(418));e.flags=e.flags&-4097|2,re=!1,qe=e}}}function Vc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qe=e}function zs(e){if(e!==qe)return!1;if(!re)return Vc(e),re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vo(e.type,e.memoizedProps)),t&&(t=We)){if(_o(e))throw ph(),Error(A(418));for(;t;)fh(e,t),t=qt(t.nextSibling)}if(Vc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){We=qt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}We=null}}else We=qe?qt(e.stateNode.nextSibling):null;return!0}function ph(){for(var e=We;e;)e=qt(e.nextSibling)}function cn(){We=qe=null,re=!1}function Cl(e){at===null?at=[e]:at.push(e)}var lg=Et.ReactCurrentBatchConfig;function En(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(A(309));var n=r.stateNode}if(!n)throw Error(A(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(A(284));if(!r._owner)throw Error(A(290,e))}return e}function Ms(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hc(e){var t=e._init;return t(e._payload)}function mh(e){function t(m,p){if(e){var g=m.deletions;g===null?(m.deletions=[p],m.flags|=16):g.push(p)}}function r(m,p){if(!e)return null;for(;p!==null;)t(m,p),p=p.sibling;return null}function n(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=Kt(m,p),m.index=0,m.sibling=null,m}function a(m,p,g){return m.index=g,e?(g=m.alternate,g!==null?(g=g.index,g<p?(m.flags|=2,p):g):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,p,g,w){return p===null||p.tag!==6?(p=La(g,m.mode,w),p.return=m,p):(p=s(p,g),p.return=m,p)}function c(m,p,g,w){var S=g.type;return S===zr?d(m,p,g.props.children,w,g.key):p!==null&&(p.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ft&&Hc(S)===p.type)?(w=s(p,g.props),w.ref=En(m,p,g),w.return=m,w):(w=ui(g.type,g.key,g.props,null,m.mode,w),w.ref=En(m,p,g),w.return=m,w)}function u(m,p,g,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=$a(g,m.mode,w),p.return=m,p):(p=s(p,g.children||[]),p.return=m,p)}function d(m,p,g,w,S){return p===null||p.tag!==7?(p=vr(g,m.mode,w,S),p.return=m,p):(p=s(p,g),p.return=m,p)}function h(m,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=La(""+p,m.mode,g),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case As:return g=ui(p.type,p.key,p.props,null,m.mode,g),g.ref=En(m,null,p),g.return=m,g;case Ur:return p=$a(p,m.mode,g),p.return=m,p;case Ft:var w=p._init;return h(m,w(p._payload),g)}if(Fn(p)||_n(p))return p=vr(p,m.mode,g,null),p.return=m,p;Ms(m,p)}return null}function f(m,p,g,w){var S=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return S!==null?null:l(m,p,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case As:return g.key===S?c(m,p,g,w):null;case Ur:return g.key===S?u(m,p,g,w):null;case Ft:return S=g._init,f(m,p,S(g._payload),w)}if(Fn(g)||_n(g))return S!==null?null:d(m,p,g,w,null);Ms(m,g)}return null}function x(m,p,g,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(g)||null,l(p,m,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case As:return m=m.get(w.key===null?g:w.key)||null,c(p,m,w,S);case Ur:return m=m.get(w.key===null?g:w.key)||null,u(p,m,w,S);case Ft:var k=w._init;return x(m,p,g,k(w._payload),S)}if(Fn(w)||_n(w))return m=m.get(g)||null,d(p,m,w,S,null);Ms(p,w)}return null}function y(m,p,g,w){for(var S=null,k=null,j=p,N=p=0,P=null;j!==null&&N<g.length;N++){j.index>N?(P=j,j=null):P=j.sibling;var C=f(m,j,g[N],w);if(C===null){j===null&&(j=P);break}e&&j&&C.alternate===null&&t(m,j),p=a(C,p,N),k===null?S=C:k.sibling=C,k=C,j=P}if(N===g.length)return r(m,j),re&&or(m,N),S;if(j===null){for(;N<g.length;N++)j=h(m,g[N],w),j!==null&&(p=a(j,p,N),k===null?S=j:k.sibling=j,k=j);return re&&or(m,N),S}for(j=n(m,j);N<g.length;N++)P=x(j,m,N,g[N],w),P!==null&&(e&&P.alternate!==null&&j.delete(P.key===null?N:P.key),p=a(P,p,N),k===null?S=P:k.sibling=P,k=P);return e&&j.forEach(function(O){return t(m,O)}),re&&or(m,N),S}function v(m,p,g,w){var S=_n(g);if(typeof S!="function")throw Error(A(150));if(g=S.call(g),g==null)throw Error(A(151));for(var k=S=null,j=p,N=p=0,P=null,C=g.next();j!==null&&!C.done;N++,C=g.next()){j.index>N?(P=j,j=null):P=j.sibling;var O=f(m,j,C.value,w);if(O===null){j===null&&(j=P);break}e&&j&&O.alternate===null&&t(m,j),p=a(O,p,N),k===null?S=O:k.sibling=O,k=O,j=P}if(C.done)return r(m,j),re&&or(m,N),S;if(j===null){for(;!C.done;N++,C=g.next())C=h(m,C.value,w),C!==null&&(p=a(C,p,N),k===null?S=C:k.sibling=C,k=C);return re&&or(m,N),S}for(j=n(m,j);!C.done;N++,C=g.next())C=x(j,m,N,C.value,w),C!==null&&(e&&C.alternate!==null&&j.delete(C.key===null?N:C.key),p=a(C,p,N),k===null?S=C:k.sibling=C,k=C);return e&&j.forEach(function(W){return t(m,W)}),re&&or(m,N),S}function b(m,p,g,w){if(typeof g=="object"&&g!==null&&g.type===zr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case As:e:{for(var S=g.key,k=p;k!==null;){if(k.key===S){if(S=g.type,S===zr){if(k.tag===7){r(m,k.sibling),p=s(k,g.props.children),p.return=m,m=p;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ft&&Hc(S)===k.type){r(m,k.sibling),p=s(k,g.props),p.ref=En(m,k,g),p.return=m,m=p;break e}r(m,k);break}else t(m,k);k=k.sibling}g.type===zr?(p=vr(g.props.children,m.mode,w,g.key),p.return=m,m=p):(w=ui(g.type,g.key,g.props,null,m.mode,w),w.ref=En(m,p,g),w.return=m,m=w)}return o(m);case Ur:e:{for(k=g.key;p!==null;){if(p.key===k)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){r(m,p.sibling),p=s(p,g.children||[]),p.return=m,m=p;break e}else{r(m,p);break}else t(m,p);p=p.sibling}p=$a(g,m.mode,w),p.return=m,m=p}return o(m);case Ft:return k=g._init,b(m,p,k(g._payload),w)}if(Fn(g))return y(m,p,g,w);if(_n(g))return v(m,p,g,w);Ms(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(r(m,p.sibling),p=s(p,g),p.return=m,m=p):(r(m,p),p=La(g,m.mode,w),p.return=m,m=p),o(m)):r(m,p)}return b}var un=mh(!0),gh=mh(!1),ki=er(null),Ni=null,Kr=null,Pl=null;function Al(){Pl=Kr=Ni=null}function Tl(e){var t=ki.current;X(ki),e._currentValue=t}function ko(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function rn(e,t){Ni=e,Pl=Kr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Le=!0),e.firstContext=null)}function Xe(e){var t=e._currentValue;if(Pl!==e)if(e={context:e,memoizedValue:t,next:null},Kr===null){if(Ni===null)throw Error(A(308));Kr=e,Ni.dependencies={lanes:0,firstContext:e}}else Kr=Kr.next=e;return t}var pr=null;function Fl(e){pr===null?pr=[e]:pr.push(e)}function xh(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Fl(t)):(r.next=s.next,s.next=r),t.interleaved=r,kt(e,n)}function kt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Rt=!1;function Rl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,q&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,kt(e,r)}return s=n.interleaved,s===null?(t.next=t,Fl(n)):(t.next=s.next,s.next=t),n.interleaved=t,kt(e,r)}function si(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,vl(e,r)}}function Gc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Si(e,t,r,n){var s=e.updateQueue;Rt=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;o=0,d=u=c=null,l=a;do{var f=l.lane,x=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,v=l;switch(f=t,x=r,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(x,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(x,h,f):y,f==null)break e;h=ie({},h,f);break e;case 2:Rt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else x={eventTime:x,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=x,c=h):d=d.next=x,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);_r|=o,e.lanes=o,e.memoizedState=h}}function Kc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(A(191,s));s.call(n)}}}var ks={},mt=er(ks),is=er(ks),as=er(ks);function mr(e){if(e===ks)throw Error(A(174));return e}function Ol(e,t){switch(Q(as,t),Q(is,e),Q(mt,ks),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:no(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=no(t,e)}X(mt),Q(mt,t)}function dn(){X(mt),X(is),X(as)}function yh(e){mr(as.current);var t=mr(mt.current),r=no(t,e.type);t!==r&&(Q(is,e),Q(mt,r))}function Il(e){is.current===e&&(X(mt),X(is))}var ne=er(0);function Ei(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ta=[];function Dl(){for(var e=0;e<Ta.length;e++)Ta[e]._workInProgressVersionPrimary=null;Ta.length=0}var ii=Et.ReactCurrentDispatcher,Fa=Et.ReactCurrentBatchConfig,br=0,se=null,xe=null,ye=null,Ci=!1,Mn=!1,os=0,cg=0;function Ee(){throw Error(A(321))}function Ll(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ct(e[r],t[r]))return!1;return!0}function $l(e,t,r,n,s,a){if(br=a,se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ii.current=e===null||e.memoizedState===null?fg:pg,e=r(n,s),Mn){a=0;do{if(Mn=!1,os=0,25<=a)throw Error(A(301));a+=1,ye=xe=null,t.updateQueue=null,ii.current=mg,e=r(n,s)}while(Mn)}if(ii.current=Pi,t=xe!==null&&xe.next!==null,br=0,ye=xe=se=null,Ci=!1,t)throw Error(A(300));return e}function Ul(){var e=os!==0;return os=0,e}function ht(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?se.memoizedState=ye=e:ye=ye.next=e,ye}function Ze(){if(xe===null){var e=se.alternate;e=e!==null?e.memoizedState:null}else e=xe.next;var t=ye===null?se.memoizedState:ye.next;if(t!==null)ye=t,xe=e;else{if(e===null)throw Error(A(310));xe=e,e={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},ye===null?se.memoizedState=ye=e:ye=ye.next=e}return ye}function ls(e,t){return typeof t=="function"?t(e):t}function Ra(e){var t=Ze(),r=t.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=e;var n=xe,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((br&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,se.lanes|=d,_r|=d}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,ct(n,t.memoizedState)||(Le=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,se.lanes|=a,_r|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Oa(e){var t=Ze(),r=t.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=e(a,o.action),o=o.next;while(o!==s);ct(a,t.memoizedState)||(Le=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function wh(){}function bh(e,t){var r=se,n=Ze(),s=t(),a=!ct(n.memoizedState,s);if(a&&(n.memoizedState=s,Le=!0),n=n.queue,zl(kh.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||ye!==null&&ye.memoizedState.tag&1){if(r.flags|=2048,cs(9,jh.bind(null,r,n,s,t),void 0,null),we===null)throw Error(A(349));br&30||_h(r,t,s)}return s}function _h(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function jh(e,t,r,n){t.value=r,t.getSnapshot=n,Nh(t)&&Sh(e)}function kh(e,t,r){return r(function(){Nh(t)&&Sh(e)})}function Nh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ct(e,r)}catch{return!0}}function Sh(e){var t=kt(e,1);t!==null&&lt(t,e,1,-1)}function Jc(e){var t=ht();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:e},t.queue=e,e=e.dispatch=hg.bind(null,se,e),[t.memoizedState,e]}function cs(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Eh(){return Ze().memoizedState}function ai(e,t,r,n){var s=ht();se.flags|=e,s.memoizedState=cs(1|t,r,void 0,n===void 0?null:n)}function Ki(e,t,r,n){var s=Ze();n=n===void 0?null:n;var a=void 0;if(xe!==null){var o=xe.memoizedState;if(a=o.destroy,n!==null&&Ll(n,o.deps)){s.memoizedState=cs(t,r,a,n);return}}se.flags|=e,s.memoizedState=cs(1|t,r,a,n)}function Qc(e,t){return ai(8390656,8,e,t)}function zl(e,t){return Ki(2048,8,e,t)}function Ch(e,t){return Ki(4,2,e,t)}function Ph(e,t){return Ki(4,4,e,t)}function Ah(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Th(e,t,r){return r=r!=null?r.concat([e]):null,Ki(4,4,Ah.bind(null,t,e),r)}function Ml(){}function Fh(e,t){var r=Ze();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ll(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Rh(e,t){var r=Ze();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ll(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Oh(e,t,r){return br&21?(ct(r,t)||(r=Ud(),se.lanes|=r,_r|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Le=!0),e.memoizedState=r)}function ug(e,t){var r=H;H=r!==0&&4>r?r:4,e(!0);var n=Fa.transition;Fa.transition={};try{e(!1),t()}finally{H=r,Fa.transition=n}}function Ih(){return Ze().memoizedState}function dg(e,t,r){var n=Gt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Dh(e))Lh(t,r);else if(r=xh(e,t,r,n),r!==null){var s=Re();lt(r,e,n,s),$h(r,t,n)}}function hg(e,t,r){var n=Gt(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Dh(e))Lh(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,ct(l,o)){var c=t.interleaved;c===null?(s.next=s,Fl(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=xh(e,t,s,n),r!==null&&(s=Re(),lt(r,e,n,s),$h(r,t,n))}}function Dh(e){var t=e.alternate;return e===se||t!==null&&t===se}function Lh(e,t){Mn=Ci=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $h(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,vl(e,r)}}var Pi={readContext:Xe,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useInsertionEffect:Ee,useLayoutEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useMutableSource:Ee,useSyncExternalStore:Ee,useId:Ee,unstable_isNewReconciler:!1},fg={readContext:Xe,useCallback:function(e,t){return ht().memoizedState=[e,t===void 0?null:t],e},useContext:Xe,useEffect:Qc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ai(4194308,4,Ah.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ai(4194308,4,e,t)},useInsertionEffect:function(e,t){return ai(4,2,e,t)},useMemo:function(e,t){var r=ht();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ht();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=dg.bind(null,se,e),[n.memoizedState,e]},useRef:function(e){var t=ht();return e={current:e},t.memoizedState=e},useState:Jc,useDebugValue:Ml,useDeferredValue:function(e){return ht().memoizedState=e},useTransition:function(){var e=Jc(!1),t=e[0];return e=ug.bind(null,e[1]),ht().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=se,s=ht();if(re){if(r===void 0)throw Error(A(407));r=r()}else{if(r=t(),we===null)throw Error(A(349));br&30||_h(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,Qc(kh.bind(null,n,a,e),[e]),n.flags|=2048,cs(9,jh.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=ht(),t=we.identifierPrefix;if(re){var r=wt,n=yt;r=(n&~(1<<32-ot(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=os++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=cg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},pg={readContext:Xe,useCallback:Fh,useContext:Xe,useEffect:zl,useImperativeHandle:Th,useInsertionEffect:Ch,useLayoutEffect:Ph,useMemo:Rh,useReducer:Ra,useRef:Eh,useState:function(){return Ra(ls)},useDebugValue:Ml,useDeferredValue:function(e){var t=Ze();return Oh(t,xe.memoizedState,e)},useTransition:function(){var e=Ra(ls)[0],t=Ze().memoizedState;return[e,t]},useMutableSource:wh,useSyncExternalStore:bh,useId:Ih,unstable_isNewReconciler:!1},mg={readContext:Xe,useCallback:Fh,useContext:Xe,useEffect:zl,useImperativeHandle:Th,useInsertionEffect:Ch,useLayoutEffect:Ph,useMemo:Rh,useReducer:Oa,useRef:Eh,useState:function(){return Oa(ls)},useDebugValue:Ml,useDeferredValue:function(e){var t=Ze();return xe===null?t.memoizedState=e:Oh(t,xe.memoizedState,e)},useTransition:function(){var e=Oa(ls)[0],t=Ze().memoizedState;return[e,t]},useMutableSource:wh,useSyncExternalStore:bh,useId:Ih,unstable_isNewReconciler:!1};function nt(e,t){if(e&&e.defaultProps){t=ie({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function No(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ie({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ji={isMounted:function(e){return(e=e._reactInternals)?Nr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Re(),s=Gt(e),a=bt(n,s);a.payload=t,r!=null&&(a.callback=r),t=Vt(e,a,s),t!==null&&(lt(t,e,s,n),si(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Re(),s=Gt(e),a=bt(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Vt(e,a,s),t!==null&&(lt(t,e,s,n),si(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Re(),n=Gt(e),s=bt(r,n);s.tag=2,t!=null&&(s.callback=t),t=Vt(e,s,n),t!==null&&(lt(t,e,n,r),si(t,e,n))}};function Yc(e,t,r,n,s,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!ts(r,n)||!ts(s,a):!0}function Uh(e,t,r){var n=!1,s=Xt,a=t.contextType;return typeof a=="object"&&a!==null?a=Xe(a):(s=Ue(t)?yr:Ae.current,n=t.contextTypes,a=(n=n!=null)?ln(e,s):Xt),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ji,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Xc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ji.enqueueReplaceState(t,t.state,null)}function So(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Rl(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Xe(a):(a=Ue(t)?yr:Ae.current,s.context=ln(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(No(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ji.enqueueReplaceState(s,s.state,null),Si(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function hn(e,t){try{var r="",n=t;do r+=Wp(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Ia(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Eo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var gg=typeof WeakMap=="function"?WeakMap:Map;function zh(e,t,r){r=bt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ti||(Ti=!0,Lo=n),Eo(e,t)},r}function Mh(e,t,r){r=bt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Eo(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Eo(e,t),typeof n!="function"&&(Ht===null?Ht=new Set([this]):Ht.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Zc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new gg;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Ag.bind(null,e,t,r),t.then(e,e))}function eu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tu(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=bt(-1,1),t.tag=2,Vt(r,t,1))),r.lanes|=1),e)}var xg=Et.ReactCurrentOwner,Le=!1;function Fe(e,t,r,n){t.child=e===null?gh(t,null,r,n):un(t,e.child,r,n)}function ru(e,t,r,n,s){r=r.render;var a=t.ref;return rn(t,s),n=$l(e,t,r,n,a,s),r=Ul(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Nt(e,t,s)):(re&&r&&Sl(t),t.flags|=1,Fe(e,t,n,s),t.child)}function nu(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!Jl(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Bh(e,t,a,n,s)):(e=ui(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:ts,r(o,n)&&e.ref===t.ref)return Nt(e,t,s)}return t.flags|=1,e=Kt(a,n),e.ref=t.ref,e.return=t,t.child=e}function Bh(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(ts(a,n)&&e.ref===t.ref)if(Le=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(Le=!0);else return t.lanes=e.lanes,Nt(e,t,s)}return Co(e,t,r,n,s)}function Wh(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q(Qr,Be),Be|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Q(Qr,Be),Be|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Q(Qr,Be),Be|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Q(Qr,Be),Be|=n;return Fe(e,t,s,r),t.child}function qh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,r,n,s){var a=Ue(r)?yr:Ae.current;return a=ln(t,a),rn(t,s),r=$l(e,t,r,n,a,s),n=Ul(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Nt(e,t,s)):(re&&n&&Sl(t),t.flags|=1,Fe(e,t,r,s),t.child)}function su(e,t,r,n,s){if(Ue(r)){var a=!0;bi(t)}else a=!1;if(rn(t,s),t.stateNode===null)oi(e,t),Uh(t,r,n),So(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Xe(u):(u=Ue(r)?yr:Ae.current,u=ln(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Xc(t,o,n,u),Rt=!1;var f=t.memoizedState;o.state=f,Si(t,n,o,s),c=t.memoizedState,l!==n||f!==c||$e.current||Rt?(typeof d=="function"&&(No(t,r,d,n),c=t.memoizedState),(l=Rt||Yc(t,r,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,vh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:nt(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Xe(c):(c=Ue(r)?yr:Ae.current,c=ln(t,c));var x=r.getDerivedStateFromProps;(d=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Xc(t,o,n,c),Rt=!1,f=t.memoizedState,o.state=f,Si(t,n,o,s);var y=t.memoizedState;l!==h||f!==y||$e.current||Rt?(typeof x=="function"&&(No(t,r,x,n),y=t.memoizedState),(u=Rt||Yc(t,r,u,n,f,y,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Po(e,t,r,n,a,s)}function Po(e,t,r,n,s,a){qh(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Wc(t,r,!1),Nt(e,t,a);n=t.stateNode,xg.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=un(t,e.child,null,a),t.child=un(t,null,l,a)):Fe(e,t,l,a),t.memoizedState=n.state,s&&Wc(t,r,!0),t.child}function Vh(e){var t=e.stateNode;t.pendingContext?Bc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Bc(e,t.context,!1),Ol(e,t.containerInfo)}function iu(e,t,r,n,s){return cn(),Cl(s),t.flags|=256,Fe(e,t,r,n),t.child}var Ao={dehydrated:null,treeContext:null,retryLane:0};function To(e){return{baseLanes:e,cachePool:null,transitions:null}}function Hh(e,t,r){var n=t.pendingProps,s=ne.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Q(ne,s&1),e===null)return jo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Xi(o,n,0,null),e=vr(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=To(r),t.memoizedState=Ao,e):Bl(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return vg(e,t,o,n,l,s,r);if(a){a=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Kt(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Kt(l,a):(a=vr(a,o,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?To(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=Ao,n}return a=e.child,e=a.sibling,n=Kt(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Bl(e,t){return t=Xi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bs(e,t,r,n){return n!==null&&Cl(n),un(t,e.child,null,r),e=Bl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vg(e,t,r,n,s,a,o){if(r)return t.flags&256?(t.flags&=-257,n=Ia(Error(A(422))),Bs(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=Xi({mode:"visible",children:n.children},s,0,null),a=vr(a,s,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&un(t,e.child,null,o),t.child.memoizedState=To(o),t.memoizedState=Ao,a);if(!(t.mode&1))return Bs(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(A(419)),n=Ia(a,n,void 0),Bs(e,t,o,n)}if(l=(o&e.childLanes)!==0,Le||l){if(n=we,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,kt(e,s),lt(n,e,s,-1))}return Kl(),n=Ia(Error(A(421))),Bs(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Tg.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,We=qt(s.nextSibling),qe=t,re=!0,at=null,e!==null&&(Ke[Je++]=yt,Ke[Je++]=wt,Ke[Je++]=wr,yt=e.id,wt=e.overflow,wr=t),t=Bl(t,n.children),t.flags|=4096,t)}function au(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ko(e.return,t,r)}function Da(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Gh(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(Fe(e,t,n.children,r),n=ne.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&au(e,r,t);else if(e.tag===19)au(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Q(ne,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Ei(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Da(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ei(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Da(t,!0,r,null,a);break;case"together":Da(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function oi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),_r|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,r=Kt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Kt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function yg(e,t,r){switch(t.tag){case 3:Vh(t),cn();break;case 5:yh(t);break;case 1:Ue(t.type)&&bi(t);break;case 4:Ol(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Q(ki,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Q(ne,ne.current&1),t.flags|=128,null):r&t.child.childLanes?Hh(e,t,r):(Q(ne,ne.current&1),e=Nt(e,t,r),e!==null?e.sibling:null);Q(ne,ne.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Gh(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Q(ne,ne.current),n)break;return null;case 22:case 23:return t.lanes=0,Wh(e,t,r)}return Nt(e,t,r)}var Kh,Fo,Jh,Qh;Kh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Fo=function(){};Jh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,mr(mt.current);var a=null;switch(r){case"input":s=Za(e,s),n=Za(e,n),a=[];break;case"select":s=ie({},s,{value:void 0}),n=ie({},n,{value:void 0}),a=[];break;case"textarea":s=ro(e,s),n=ro(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=yi)}so(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Kn.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Kn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Y("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};Qh=function(e,t,r,n){r!==n&&(t.flags|=4)};function Cn(e,t){if(!re)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ce(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function wg(e,t,r){var n=t.pendingProps;switch(El(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(t),null;case 1:return Ue(t.type)&&wi(),Ce(t),null;case 3:return n=t.stateNode,dn(),X($e),X(Ae),Dl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(zs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,at!==null&&(zo(at),at=null))),Fo(e,t),Ce(t),null;case 5:Il(t);var s=mr(as.current);if(r=t.type,e!==null&&t.stateNode!=null)Jh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(A(166));return Ce(t),null}if(e=mr(mt.current),zs(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[ft]=t,n[ss]=a,e=(t.mode&1)!==0,r){case"dialog":Y("cancel",n),Y("close",n);break;case"iframe":case"object":case"embed":Y("load",n);break;case"video":case"audio":for(s=0;s<On.length;s++)Y(On[s],n);break;case"source":Y("error",n);break;case"img":case"image":case"link":Y("error",n),Y("load",n);break;case"details":Y("toggle",n);break;case"input":mc(n,a),Y("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Y("invalid",n);break;case"textarea":xc(n,a),Y("invalid",n)}so(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Us(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Us(n.textContent,l,e),s=["children",""+l]):Kn.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Y("scroll",n)}switch(r){case"input":Ts(n),gc(n,a,!0);break;case"textarea":Ts(n),vc(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=yi)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ft]=t,e[ss]=n,Kh(e,t,!1,!1),t.stateNode=e;e:{switch(o=io(r,n),r){case"dialog":Y("cancel",e),Y("close",e),s=n;break;case"iframe":case"object":case"embed":Y("load",e),s=n;break;case"video":case"audio":for(s=0;s<On.length;s++)Y(On[s],e);s=n;break;case"source":Y("error",e),s=n;break;case"img":case"image":case"link":Y("error",e),Y("load",e),s=n;break;case"details":Y("toggle",e),s=n;break;case"input":mc(e,n),s=Za(e,n),Y("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ie({},n,{value:void 0}),Y("invalid",e);break;case"textarea":xc(e,n),s=ro(e,n),Y("invalid",e);break;default:s=n}so(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Ed(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Nd(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Jn(e,c):typeof c=="number"&&Jn(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Kn.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Y("scroll",e):c!=null&&hl(e,a,c,o))}switch(r){case"input":Ts(e),gc(e,n,!1);break;case"textarea":Ts(e),vc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Yt(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Xr(e,!!n.multiple,a,!1):n.defaultValue!=null&&Xr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=yi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ce(t),null;case 6:if(e&&t.stateNode!=null)Qh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(A(166));if(r=mr(as.current),mr(mt.current),zs(t)){if(n=t.stateNode,r=t.memoizedProps,n[ft]=t,(a=n.nodeValue!==r)&&(e=qe,e!==null))switch(e.tag){case 3:Us(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Us(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ft]=t,t.stateNode=n}return Ce(t),null;case 13:if(X(ne),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(re&&We!==null&&t.mode&1&&!(t.flags&128))ph(),cn(),t.flags|=98560,a=!1;else if(a=zs(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(A(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(A(317));a[ft]=t}else cn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ce(t),a=!1}else at!==null&&(zo(at),at=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ne.current&1?ve===0&&(ve=3):Kl())),t.updateQueue!==null&&(t.flags|=4),Ce(t),null);case 4:return dn(),Fo(e,t),e===null&&rs(t.stateNode.containerInfo),Ce(t),null;case 10:return Tl(t.type._context),Ce(t),null;case 17:return Ue(t.type)&&wi(),Ce(t),null;case 19:if(X(ne),a=t.memoizedState,a===null)return Ce(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)Cn(a,!1);else{if(ve!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ei(e),o!==null){for(t.flags|=128,Cn(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Q(ne,ne.current&1|2),t.child}e=e.sibling}a.tail!==null&&de()>fn&&(t.flags|=128,n=!0,Cn(a,!1),t.lanes=4194304)}else{if(!n)if(e=Ei(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Cn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!re)return Ce(t),null}else 2*de()-a.renderingStartTime>fn&&r!==1073741824&&(t.flags|=128,n=!0,Cn(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(r=a.last,r!==null?r.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=de(),t.sibling=null,r=ne.current,Q(ne,n?r&1|2:r&1),t):(Ce(t),null);case 22:case 23:return Gl(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Be&1073741824&&(Ce(t),t.subtreeFlags&6&&(t.flags|=8192)):Ce(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function bg(e,t){switch(El(t),t.tag){case 1:return Ue(t.type)&&wi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return dn(),X($e),X(Ae),Dl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Il(t),null;case 13:if(X(ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));cn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return X(ne),null;case 4:return dn(),null;case 10:return Tl(t.type._context),null;case 22:case 23:return Gl(),null;case 24:return null;default:return null}}var Ws=!1,Pe=!1,_g=typeof WeakSet=="function"?WeakSet:Set,R=null;function Jr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){oe(e,t,n)}else r.current=null}function Ro(e,t,r){try{r()}catch(n){oe(e,t,n)}}var ou=!1;function jg(e,t){if(go=gi,e=th(),Nl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var x;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==a||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(x=h.firstChild)!==null;)f=h,h=x;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=o),f===a&&++d===n&&(c=o),(x=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=x}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(xo={focusedElem:e,selectionRange:r},gi=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,b=y.memoizedState,m=t.stateNode,p=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:nt(t.type,v),b);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(w){oe(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return y=ou,ou=!1,y}function Bn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Ro(t,r,a)}s=s.next}while(s!==n)}}function Qi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Oo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Yh(e){var t=e.alternate;t!==null&&(e.alternate=null,Yh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ft],delete t[ss],delete t[wo],delete t[ig],delete t[ag])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Xh(e){return e.tag===5||e.tag===3||e.tag===4}function lu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Io(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=yi));else if(n!==4&&(e=e.child,e!==null))for(Io(e,t,r),e=e.sibling;e!==null;)Io(e,t,r),e=e.sibling}function Do(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Do(e,t,r),e=e.sibling;e!==null;)Do(e,t,r),e=e.sibling}var je=null,st=!1;function At(e,t,r){for(r=r.child;r!==null;)Zh(e,t,r),r=r.sibling}function Zh(e,t,r){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(Bi,r)}catch{}switch(r.tag){case 5:Pe||Jr(r,t);case 6:var n=je,s=st;je=null,At(e,t,r),je=n,st=s,je!==null&&(st?(e=je,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):je.removeChild(r.stateNode));break;case 18:je!==null&&(st?(e=je,r=r.stateNode,e.nodeType===8?Pa(e.parentNode,r):e.nodeType===1&&Pa(e,r),Zn(e)):Pa(je,r.stateNode));break;case 4:n=je,s=st,je=r.stateNode.containerInfo,st=!0,At(e,t,r),je=n,st=s;break;case 0:case 11:case 14:case 15:if(!Pe&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Ro(r,t,o),s=s.next}while(s!==n)}At(e,t,r);break;case 1:if(!Pe&&(Jr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){oe(r,t,l)}At(e,t,r);break;case 21:At(e,t,r);break;case 22:r.mode&1?(Pe=(n=Pe)||r.memoizedState!==null,At(e,t,r),Pe=n):At(e,t,r);break;default:At(e,t,r)}}function cu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new _g),t.forEach(function(n){var s=Fg.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function tt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:je=l.stateNode,st=!1;break e;case 3:je=l.stateNode.containerInfo,st=!0;break e;case 4:je=l.stateNode.containerInfo,st=!0;break e}l=l.return}if(je===null)throw Error(A(160));Zh(a,o,s),je=null,st=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){oe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ef(t,e),t=t.sibling}function ef(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tt(t,e),dt(e),n&4){try{Bn(3,e,e.return),Qi(3,e)}catch(v){oe(e,e.return,v)}try{Bn(5,e,e.return)}catch(v){oe(e,e.return,v)}}break;case 1:tt(t,e),dt(e),n&512&&r!==null&&Jr(r,r.return);break;case 5:if(tt(t,e),dt(e),n&512&&r!==null&&Jr(r,r.return),e.flags&32){var s=e.stateNode;try{Jn(s,"")}catch(v){oe(e,e.return,v)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,o=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&_d(s,a),io(l,o);var u=io(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Ed(s,h):d==="dangerouslySetInnerHTML"?Nd(s,h):d==="children"?Jn(s,h):hl(s,d,h,u)}switch(l){case"input":eo(s,a);break;case"textarea":jd(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var x=a.value;x!=null?Xr(s,!!a.multiple,x,!1):f!==!!a.multiple&&(a.defaultValue!=null?Xr(s,!!a.multiple,a.defaultValue,!0):Xr(s,!!a.multiple,a.multiple?[]:"",!1))}s[ss]=a}catch(v){oe(e,e.return,v)}}break;case 6:if(tt(t,e),dt(e),n&4){if(e.stateNode===null)throw Error(A(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(v){oe(e,e.return,v)}}break;case 3:if(tt(t,e),dt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Zn(t.containerInfo)}catch(v){oe(e,e.return,v)}break;case 4:tt(t,e),dt(e);break;case 13:tt(t,e),dt(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Vl=de())),n&4&&cu(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Pe=(u=Pe)||d,tt(t,e),Pe=u):tt(t,e),dt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(R=e,d=e.child;d!==null;){for(h=R=d;R!==null;){switch(f=R,x=f.child,f.tag){case 0:case 11:case 14:case 15:Bn(4,f,f.return);break;case 1:Jr(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(v){oe(n,r,v)}}break;case 5:Jr(f,f.return);break;case 22:if(f.memoizedState!==null){du(h);continue}}x!==null?(x.return=f,R=x):du(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Sd("display",o))}catch(v){oe(e,e.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){oe(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:tt(t,e),dt(e),n&4&&cu(e);break;case 21:break;default:tt(t,e),dt(e)}}function dt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Xh(r)){var n=r;break e}r=r.return}throw Error(A(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Jn(s,""),n.flags&=-33);var a=lu(e);Do(e,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=lu(e);Io(e,l,o);break;default:throw Error(A(161))}}catch(c){oe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kg(e,t,r){R=e,tf(e)}function tf(e,t,r){for(var n=(e.mode&1)!==0;R!==null;){var s=R,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Ws;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Pe;l=Ws;var u=Pe;if(Ws=o,(Pe=c)&&!u)for(R=s;R!==null;)o=R,c=o.child,o.tag===22&&o.memoizedState!==null?hu(s):c!==null?(c.return=o,R=c):hu(s);for(;a!==null;)R=a,tf(a),a=a.sibling;R=s,Ws=l,Pe=u}uu(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,R=a):uu(e)}}function uu(e){for(;R!==null;){var t=R;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pe||Qi(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Pe)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:nt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Kc(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Kc(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Zn(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Pe||t.flags&512&&Oo(t)}catch(f){oe(t,t.return,f)}}if(t===e){R=null;break}if(r=t.sibling,r!==null){r.return=t.return,R=r;break}R=t.return}}function du(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var r=t.sibling;if(r!==null){r.return=t.return,R=r;break}R=t.return}}function hu(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Qi(4,t)}catch(c){oe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){oe(t,s,c)}}var a=t.return;try{Oo(t)}catch(c){oe(t,a,c)}break;case 5:var o=t.return;try{Oo(t)}catch(c){oe(t,o,c)}}}catch(c){oe(t,t.return,c)}if(t===e){R=null;break}var l=t.sibling;if(l!==null){l.return=t.return,R=l;break}R=t.return}}var Ng=Math.ceil,Ai=Et.ReactCurrentDispatcher,Wl=Et.ReactCurrentOwner,Ye=Et.ReactCurrentBatchConfig,q=0,we=null,pe=null,ke=0,Be=0,Qr=er(0),ve=0,us=null,_r=0,Yi=0,ql=0,Wn=null,De=null,Vl=0,fn=1/0,gt=null,Ti=!1,Lo=null,Ht=null,qs=!1,Ut=null,Fi=0,qn=0,$o=null,li=-1,ci=0;function Re(){return q&6?de():li!==-1?li:li=de()}function Gt(e){return e.mode&1?q&2&&ke!==0?ke&-ke:lg.transition!==null?(ci===0&&(ci=Ud()),ci):(e=H,e!==0||(e=window.event,e=e===void 0?16:Hd(e.type)),e):1}function lt(e,t,r,n){if(50<qn)throw qn=0,$o=null,Error(A(185));bs(e,r,n),(!(q&2)||e!==we)&&(e===we&&(!(q&2)&&(Yi|=r),ve===4&&Dt(e,ke)),ze(e,n),r===1&&q===0&&!(t.mode&1)&&(fn=de()+500,Gi&&tr()))}function ze(e,t){var r=e.callbackNode;lm(e,t);var n=mi(e,e===we?ke:0);if(n===0)r!==null&&bc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&bc(r),t===1)e.tag===0?og(fu.bind(null,e)):dh(fu.bind(null,e)),ng(function(){!(q&6)&&tr()}),r=null;else{switch(zd(n)){case 1:r=xl;break;case 4:r=Ld;break;case 16:r=pi;break;case 536870912:r=$d;break;default:r=pi}r=uf(r,rf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function rf(e,t){if(li=-1,ci=0,q&6)throw Error(A(327));var r=e.callbackNode;if(nn()&&e.callbackNode!==r)return null;var n=mi(e,e===we?ke:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ri(e,n);else{t=n;var s=q;q|=2;var a=sf();(we!==e||ke!==t)&&(gt=null,fn=de()+500,xr(e,t));do try{Cg();break}catch(l){nf(e,l)}while(!0);Al(),Ai.current=a,q=s,pe!==null?t=0:(we=null,ke=0,t=ve)}if(t!==0){if(t===2&&(s=uo(e),s!==0&&(n=s,t=Uo(e,s))),t===1)throw r=us,xr(e,0),Dt(e,n),ze(e,de()),r;if(t===6)Dt(e,n);else{if(s=e.current.alternate,!(n&30)&&!Sg(s)&&(t=Ri(e,n),t===2&&(a=uo(e),a!==0&&(n=a,t=Uo(e,a))),t===1))throw r=us,xr(e,0),Dt(e,n),ze(e,de()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(A(345));case 2:lr(e,De,gt);break;case 3:if(Dt(e,n),(n&130023424)===n&&(t=Vl+500-de(),10<t)){if(mi(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Re(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=yo(lr.bind(null,e,De,gt),t);break}lr(e,De,gt);break;case 4:if(Dt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-ot(n);a=1<<o,o=t[o],o>s&&(s=o),n&=~a}if(n=s,n=de()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ng(n/1960))-n,10<n){e.timeoutHandle=yo(lr.bind(null,e,De,gt),n);break}lr(e,De,gt);break;case 5:lr(e,De,gt);break;default:throw Error(A(329))}}}return ze(e,de()),e.callbackNode===r?rf.bind(null,e):null}function Uo(e,t){var r=Wn;return e.current.memoizedState.isDehydrated&&(xr(e,t).flags|=256),e=Ri(e,t),e!==2&&(t=De,De=r,t!==null&&zo(t)),e}function zo(e){De===null?De=e:De.push.apply(De,e)}function Sg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!ct(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dt(e,t){for(t&=~ql,t&=~Yi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function fu(e){if(q&6)throw Error(A(327));nn();var t=mi(e,0);if(!(t&1))return ze(e,de()),null;var r=Ri(e,t);if(e.tag!==0&&r===2){var n=uo(e);n!==0&&(t=n,r=Uo(e,n))}if(r===1)throw r=us,xr(e,0),Dt(e,t),ze(e,de()),r;if(r===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lr(e,De,gt),ze(e,de()),null}function Hl(e,t){var r=q;q|=1;try{return e(t)}finally{q=r,q===0&&(fn=de()+500,Gi&&tr())}}function jr(e){Ut!==null&&Ut.tag===0&&!(q&6)&&nn();var t=q;q|=1;var r=Ye.transition,n=H;try{if(Ye.transition=null,H=1,e)return e()}finally{H=n,Ye.transition=r,q=t,!(q&6)&&tr()}}function Gl(){Be=Qr.current,X(Qr)}function xr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,rg(r)),pe!==null)for(r=pe.return;r!==null;){var n=r;switch(El(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&wi();break;case 3:dn(),X($e),X(Ae),Dl();break;case 5:Il(n);break;case 4:dn();break;case 13:X(ne);break;case 19:X(ne);break;case 10:Tl(n.type._context);break;case 22:case 23:Gl()}r=r.return}if(we=e,pe=e=Kt(e.current,null),ke=Be=t,ve=0,us=null,ql=Yi=_r=0,De=Wn=null,pr!==null){for(t=0;t<pr.length;t++)if(r=pr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}pr=null}return e}function nf(e,t){do{var r=pe;try{if(Al(),ii.current=Pi,Ci){for(var n=se.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ci=!1}if(br=0,ye=xe=se=null,Mn=!1,os=0,Wl.current=null,r===null||r.return===null){ve=1,us=t,pe=null;break}e:{var a=e,o=r.return,l=r,c=t;if(t=ke,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=eu(o);if(x!==null){x.flags&=-257,tu(x,o,l,a,t),x.mode&1&&Zc(a,u,t),t=x,c=u;var y=t.updateQueue;if(y===null){var v=new Set;v.add(c),t.updateQueue=v}else y.add(c);break e}else{if(!(t&1)){Zc(a,u,t),Kl();break e}c=Error(A(426))}}else if(re&&l.mode&1){var b=eu(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),tu(b,o,l,a,t),Cl(hn(c,l));break e}}a=c=hn(c,l),ve!==4&&(ve=2),Wn===null?Wn=[a]:Wn.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var m=zh(a,c,t);Gc(a,m);break e;case 1:l=c;var p=a.type,g=a.stateNode;if(!(a.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ht===null||!Ht.has(g)))){a.flags|=65536,t&=-t,a.lanes|=t;var w=Mh(a,l,t);Gc(a,w);break e}}a=a.return}while(a!==null)}of(r)}catch(S){t=S,pe===r&&r!==null&&(pe=r=r.return);continue}break}while(!0)}function sf(){var e=Ai.current;return Ai.current=Pi,e===null?Pi:e}function Kl(){(ve===0||ve===3||ve===2)&&(ve=4),we===null||!(_r&268435455)&&!(Yi&268435455)||Dt(we,ke)}function Ri(e,t){var r=q;q|=2;var n=sf();(we!==e||ke!==t)&&(gt=null,xr(e,t));do try{Eg();break}catch(s){nf(e,s)}while(!0);if(Al(),q=r,Ai.current=n,pe!==null)throw Error(A(261));return we=null,ke=0,ve}function Eg(){for(;pe!==null;)af(pe)}function Cg(){for(;pe!==null&&!Zp();)af(pe)}function af(e){var t=cf(e.alternate,e,Be);e.memoizedProps=e.pendingProps,t===null?of(e):pe=t,Wl.current=null}function of(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=bg(r,t),r!==null){r.flags&=32767,pe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ve=6,pe=null;return}}else if(r=wg(r,t,Be),r!==null){pe=r;return}if(t=t.sibling,t!==null){pe=t;return}pe=t=e}while(t!==null);ve===0&&(ve=5)}function lr(e,t,r){var n=H,s=Ye.transition;try{Ye.transition=null,H=1,Pg(e,t,r,n)}finally{Ye.transition=s,H=n}return null}function Pg(e,t,r,n){do nn();while(Ut!==null);if(q&6)throw Error(A(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(cm(e,a),e===we&&(pe=we=null,ke=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||qs||(qs=!0,uf(pi,function(){return nn(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ye.transition,Ye.transition=null;var o=H;H=1;var l=q;q|=4,Wl.current=null,jg(e,r),ef(r,e),Jm(xo),gi=!!go,xo=go=null,e.current=r,kg(r),em(),q=l,H=o,Ye.transition=a}else e.current=r;if(qs&&(qs=!1,Ut=e,Fi=s),a=e.pendingLanes,a===0&&(Ht=null),nm(r.stateNode),ze(e,de()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ti)throw Ti=!1,e=Lo,Lo=null,e;return Fi&1&&e.tag!==0&&nn(),a=e.pendingLanes,a&1?e===$o?qn++:(qn=0,$o=e):qn=0,tr(),null}function nn(){if(Ut!==null){var e=zd(Fi),t=Ye.transition,r=H;try{if(Ye.transition=null,H=16>e?16:e,Ut===null)var n=!1;else{if(e=Ut,Ut=null,Fi=0,q&6)throw Error(A(331));var s=q;for(q|=4,R=e.current;R!==null;){var a=R,o=a.child;if(R.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(R=u;R!==null;){var d=R;switch(d.tag){case 0:case 11:case 15:Bn(8,d,a)}var h=d.child;if(h!==null)h.return=d,R=h;else for(;R!==null;){d=R;var f=d.sibling,x=d.return;if(Yh(d),d===u){R=null;break}if(f!==null){f.return=x,R=f;break}R=x}}}var y=a.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}R=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,R=o;else e:for(;R!==null;){if(a=R,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Bn(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,R=m;break e}R=a.return}}var p=e.current;for(R=p;R!==null;){o=R;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,R=g;else e:for(o=p;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Qi(9,l)}}catch(S){oe(l,l.return,S)}if(l===o){R=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,R=w;break e}R=l.return}}if(q=s,tr(),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(Bi,e)}catch{}n=!0}return n}finally{H=r,Ye.transition=t}}return!1}function pu(e,t,r){t=hn(r,t),t=zh(e,t,1),e=Vt(e,t,1),t=Re(),e!==null&&(bs(e,1,t),ze(e,t))}function oe(e,t,r){if(e.tag===3)pu(e,e,r);else for(;t!==null;){if(t.tag===3){pu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ht===null||!Ht.has(n))){e=hn(r,e),e=Mh(t,e,1),t=Vt(t,e,1),e=Re(),t!==null&&(bs(t,1,e),ze(t,e));break}}t=t.return}}function Ag(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Re(),e.pingedLanes|=e.suspendedLanes&r,we===e&&(ke&r)===r&&(ve===4||ve===3&&(ke&130023424)===ke&&500>de()-Vl?xr(e,0):ql|=r),ze(e,t)}function lf(e,t){t===0&&(e.mode&1?(t=Os,Os<<=1,!(Os&130023424)&&(Os=4194304)):t=1);var r=Re();e=kt(e,t),e!==null&&(bs(e,t,r),ze(e,r))}function Tg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),lf(e,r)}function Fg(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(A(314))}n!==null&&n.delete(t),lf(e,r)}var cf;cf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||$e.current)Le=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Le=!1,yg(e,t,r);Le=!!(e.flags&131072)}else Le=!1,re&&t.flags&1048576&&hh(t,ji,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;oi(e,t),e=t.pendingProps;var s=ln(t,Ae.current);rn(t,r),s=$l(null,t,n,e,s,r);var a=Ul();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ue(n)?(a=!0,bi(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Rl(t),s.updater=Ji,t.stateNode=s,s._reactInternals=t,So(t,n,e,r),t=Po(null,t,n,!0,a,r)):(t.tag=0,re&&a&&Sl(t),Fe(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(oi(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Og(n),e=nt(n,e),s){case 0:t=Co(null,t,n,e,r);break e;case 1:t=su(null,t,n,e,r);break e;case 11:t=ru(null,t,n,e,r);break e;case 14:t=nu(null,t,n,nt(n.type,e),r);break e}throw Error(A(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:nt(n,s),Co(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:nt(n,s),su(e,t,n,s,r);case 3:e:{if(Vh(t),e===null)throw Error(A(387));n=t.pendingProps,a=t.memoizedState,s=a.element,vh(e,t),Si(t,n,null,r);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=hn(Error(A(423)),t),t=iu(e,t,n,r,s);break e}else if(n!==s){s=hn(Error(A(424)),t),t=iu(e,t,n,r,s);break e}else for(We=qt(t.stateNode.containerInfo.firstChild),qe=t,re=!0,at=null,r=gh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(cn(),n===s){t=Nt(e,t,r);break e}Fe(e,t,n,r)}t=t.child}return t;case 5:return yh(t),e===null&&jo(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,o=s.children,vo(n,s)?o=null:a!==null&&vo(n,a)&&(t.flags|=32),qh(e,t),Fe(e,t,o,r),t.child;case 6:return e===null&&jo(t),null;case 13:return Hh(e,t,r);case 4:return Ol(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=un(t,null,n,r):Fe(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:nt(n,s),ru(e,t,n,s,r);case 7:return Fe(e,t,t.pendingProps,r),t.child;case 8:return Fe(e,t,t.pendingProps.children,r),t.child;case 12:return Fe(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Q(ki,n._currentValue),n._currentValue=o,a!==null)if(ct(a.value,o)){if(a.children===s.children&&!$e.current){t=Nt(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=bt(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),ko(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(A(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),ko(o,r,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Fe(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,rn(t,r),s=Xe(s),n=n(s),t.flags|=1,Fe(e,t,n,r),t.child;case 14:return n=t.type,s=nt(n,t.pendingProps),s=nt(n.type,s),nu(e,t,n,s,r);case 15:return Bh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:nt(n,s),oi(e,t),t.tag=1,Ue(n)?(e=!0,bi(t)):e=!1,rn(t,r),Uh(t,n,s),So(t,n,s,r),Po(null,t,n,!0,e,r);case 19:return Gh(e,t,r);case 22:return Wh(e,t,r)}throw Error(A(156,t.tag))};function uf(e,t){return Dd(e,t)}function Rg(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(e,t,r,n){return new Rg(e,t,r,n)}function Jl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Og(e){if(typeof e=="function")return Jl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pl)return 11;if(e===ml)return 14}return 2}function Kt(e,t){var r=e.alternate;return r===null?(r=Qe(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ui(e,t,r,n,s,a){var o=2;if(n=e,typeof e=="function")Jl(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case zr:return vr(r.children,s,a,t);case fl:o=8,s|=8;break;case Ja:return e=Qe(12,r,t,s|2),e.elementType=Ja,e.lanes=a,e;case Qa:return e=Qe(13,r,t,s),e.elementType=Qa,e.lanes=a,e;case Ya:return e=Qe(19,r,t,s),e.elementType=Ya,e.lanes=a,e;case yd:return Xi(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xd:o=10;break e;case vd:o=9;break e;case pl:o=11;break e;case ml:o=14;break e;case Ft:o=16,n=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=Qe(o,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function vr(e,t,r,n){return e=Qe(7,e,n,t),e.lanes=r,e}function Xi(e,t,r,n){return e=Qe(22,e,n,t),e.elementType=yd,e.lanes=r,e.stateNode={isHidden:!1},e}function La(e,t,r){return e=Qe(6,e,null,t),e.lanes=r,e}function $a(e,t,r){return t=Qe(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ig(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=va(0),this.expirationTimes=va(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=va(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ql(e,t,r,n,s,a,o,l,c){return e=new Ig(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Qe(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rl(a),e}function Dg(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ur,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function df(e){if(!e)return Xt;e=e._reactInternals;e:{if(Nr(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ue(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var r=e.type;if(Ue(r))return uh(e,r,t)}return t}function hf(e,t,r,n,s,a,o,l,c){return e=Ql(r,n,!0,e,s,a,o,l,c),e.context=df(null),r=e.current,n=Re(),s=Gt(r),a=bt(n,s),a.callback=t??null,Vt(r,a,s),e.current.lanes=s,bs(e,s,n),ze(e,n),e}function Zi(e,t,r,n){var s=t.current,a=Re(),o=Gt(s);return r=df(r),t.context===null?t.context=r:t.pendingContext=r,t=bt(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Vt(s,t,o),e!==null&&(lt(e,s,o,a),si(e,s,o)),o}function Oi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Yl(e,t){mu(e,t),(e=e.alternate)&&mu(e,t)}function Lg(){return null}var ff=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xl(e){this._internalRoot=e}ea.prototype.render=Xl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));Zi(e,t,null,null)};ea.prototype.unmount=Xl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jr(function(){Zi(null,e,null,null)}),t[jt]=null}};function ea(e){this._internalRoot=e}ea.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<It.length&&t!==0&&t<It[r].priority;r++);It.splice(r,0,e),r===0&&Vd(e)}};function Zl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ta(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gu(){}function $g(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=Oi(o);a.call(u)}}var o=hf(t,n,e,0,null,!1,!1,"",gu);return e._reactRootContainer=o,e[jt]=o.current,rs(e.nodeType===8?e.parentNode:e),jr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Oi(c);l.call(u)}}var c=Ql(e,0,!1,null,null,!1,!1,"",gu);return e._reactRootContainer=c,e[jt]=c.current,rs(e.nodeType===8?e.parentNode:e),jr(function(){Zi(t,c,r,n)}),c}function ra(e,t,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=Oi(o);l.call(c)}}Zi(t,o,e,s)}else o=$g(r,t,e,s,n);return Oi(o)}Md=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Rn(t.pendingLanes);r!==0&&(vl(t,r|1),ze(t,de()),!(q&6)&&(fn=de()+500,tr()))}break;case 13:jr(function(){var n=kt(e,1);if(n!==null){var s=Re();lt(n,e,1,s)}}),Yl(e,1)}};yl=function(e){if(e.tag===13){var t=kt(e,134217728);if(t!==null){var r=Re();lt(t,e,134217728,r)}Yl(e,134217728)}};Bd=function(e){if(e.tag===13){var t=Gt(e),r=kt(e,t);if(r!==null){var n=Re();lt(r,e,t,n)}Yl(e,t)}};Wd=function(){return H};qd=function(e,t){var r=H;try{return H=e,t()}finally{H=r}};oo=function(e,t,r){switch(t){case"input":if(eo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Hi(n);if(!s)throw Error(A(90));bd(n),eo(n,s)}}}break;case"textarea":jd(e,r);break;case"select":t=r.value,t!=null&&Xr(e,!!r.multiple,t,!1)}};Ad=Hl;Td=jr;var Ug={usingClientEntryPoint:!1,Events:[js,qr,Hi,Cd,Pd,Hl]},Pn={findFiberByHostInstance:fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zg={bundleType:Pn.bundleType,version:Pn.version,rendererPackageName:Pn.rendererPackageName,rendererConfig:Pn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Et.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Od(e),e===null?null:e.stateNode},findFiberByHostInstance:Pn.findFiberByHostInstance||Lg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vs.isDisabled&&Vs.supportsFiber)try{Bi=Vs.inject(zg),pt=Vs}catch{}}He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ug;He.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zl(t))throw Error(A(200));return Dg(e,t,null,r)};He.createRoot=function(e,t){if(!Zl(e))throw Error(A(299));var r=!1,n="",s=ff;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ql(e,1,!1,null,null,r,!1,n,s),e[jt]=t.current,rs(e.nodeType===8?e.parentNode:e),new Xl(t)};He.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=Od(t),e=e===null?null:e.stateNode,e};He.flushSync=function(e){return jr(e)};He.hydrate=function(e,t,r){if(!ta(t))throw Error(A(200));return ra(null,e,t,!0,r)};He.hydrateRoot=function(e,t,r){if(!Zl(e))throw Error(A(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=ff;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=hf(t,null,e,1,r??null,s,!1,a,o),e[jt]=t.current,rs(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new ea(t)};He.render=function(e,t,r){if(!ta(t))throw Error(A(200));return ra(null,e,t,!1,r)};He.unmountComponentAtNode=function(e){if(!ta(e))throw Error(A(40));return e._reactRootContainer?(jr(function(){ra(null,null,e,!1,function(){e._reactRootContainer=null,e[jt]=null})}),!0):!1};He.unstable_batchedUpdates=Hl;He.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ta(r))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return ra(e,t,r,!1,n)};He.version="18.3.1-next-f1338f8080-20240426";function pf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pf)}catch(e){console.error(e)}}pf(),fd.exports=He;var Mg=fd.exports,mf,xu=Mg;mf=xu.createRoot,xu.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ds(){return ds=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ds.apply(this,arguments)}var zt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zt||(zt={}));const vu="popstate";function Bg(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:o,hash:l}=n.location;return Mo("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Ii(s)}return qg(t,r,null,e)}function le(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ec(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Wg(){return Math.random().toString(36).substr(2,8)}function yu(e,t){return{usr:e.state,key:e.key,idx:t}}function Mo(e,t,r,n){return r===void 0&&(r=null),ds({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?wn(t):t,{state:r,key:t&&t.key||n||Wg()})}function Ii(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function wn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function qg(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,l=zt.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(ds({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=zt.Pop;let b=d(),m=b==null?null:b-u;u=b,c&&c({action:l,location:v.location,delta:m})}function f(b,m){l=zt.Push;let p=Mo(v.location,b,m);u=d()+1;let g=yu(p,u),w=v.createHref(p);try{o.pushState(g,"",w)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(w)}a&&c&&c({action:l,location:v.location,delta:1})}function x(b,m){l=zt.Replace;let p=Mo(v.location,b,m);u=d();let g=yu(p,u),w=v.createHref(p);o.replaceState(g,"",w),a&&c&&c({action:l,location:v.location,delta:0})}function y(b){let m=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof b=="string"?b:Ii(b);return p=p.replace(/ $/,"%20"),le(m,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,m)}let v={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(vu,h),c=b,()=>{s.removeEventListener(vu,h),c=null}},createHref(b){return t(s,b)},createURL:y,encodeLocation(b){let m=y(b);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:x,go(b){return o.go(b)}};return v}var wu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(wu||(wu={}));function Vg(e,t,r){return r===void 0&&(r="/"),Hg(e,t,r)}function Hg(e,t,r,n){let s=typeof t=="string"?wn(t):t,a=pn(s.pathname||"/",r);if(a==null)return null;let o=gf(e);Gg(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=s0(a);l=r0(o[c],u)}return l}function gf(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(le(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Jt([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(le(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),gf(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:e0(u,a.index),routesMeta:d})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of xf(a.path))s(a,o,c)}),t}function xf(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=xf(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Gg(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:t0(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Kg=/^:[\w-]+$/,Jg=3,Qg=2,Yg=1,Xg=10,Zg=-2,bu=e=>e==="*";function e0(e,t){let r=e.split("/"),n=r.length;return r.some(bu)&&(n+=Zg),t&&(n+=Qg),r.filter(s=>!bu(s)).reduce((s,a)=>s+(Kg.test(a)?Jg:a===""?Yg:Xg),n)}function t0(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function r0(e,t,r){let{routesMeta:n}=e,s={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",h=Bo({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Jt([a,h.pathname]),pathnameBase:c0(Jt([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=Jt([a,h.pathnameBase]))}return o}function Bo(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=n0(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:x}=d;if(f==="*"){let v=l[h]||"";o=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const y=l[h];return x&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:e}}function n0(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),ec(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function s0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ec(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function pn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const i0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,a0=e=>i0.test(e);function o0(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?wn(e):e,a;if(r)if(a0(r))a=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),ec(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?a=_u(r.substring(1),"/"):a=_u(r,t)}else a=t;return{pathname:a,search:u0(n),hash:d0(s)}}function _u(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ua(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function l0(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function vf(e,t){let r=l0(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function yf(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=wn(e):(s=ds({},e),le(!s.pathname||!s.pathname.includes("?"),Ua("?","pathname","search",s)),le(!s.pathname||!s.pathname.includes("#"),Ua("#","pathname","hash",s)),le(!s.search||!s.search.includes("#"),Ua("#","search","hash",s)));let a=e===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=o0(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Jt=e=>e.join("/").replace(/\/\/+/g,"/"),c0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),u0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,d0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function h0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const wf=["post","put","patch","delete"];new Set(wf);const f0=["get",...wf];new Set(f0);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hs(){return hs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hs.apply(this,arguments)}const na=_.createContext(null),bf=_.createContext(null),rr=_.createContext(null),sa=_.createContext(null),nr=_.createContext({outlet:null,matches:[],isDataRoute:!1}),_f=_.createContext(null);function p0(e,t){let{relative:r}=t===void 0?{}:t;Ns()||le(!1);let{basename:n,navigator:s}=_.useContext(rr),{hash:a,pathname:o,search:l}=ia(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Jt([n,o])),s.createHref({pathname:c,search:l,hash:a})}function Ns(){return _.useContext(sa)!=null}function Ct(){return Ns()||le(!1),_.useContext(sa).location}function jf(e){_.useContext(rr).static||_.useLayoutEffect(e)}function he(){let{isDataRoute:e}=_.useContext(nr);return e?E0():m0()}function m0(){Ns()||le(!1);let e=_.useContext(na),{basename:t,future:r,navigator:n}=_.useContext(rr),{matches:s}=_.useContext(nr),{pathname:a}=Ct(),o=JSON.stringify(vf(s,r.v7_relativeSplatPath)),l=_.useRef(!1);return jf(()=>{l.current=!0}),_.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=yf(u,JSON.parse(o),a,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Jt([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,o,a,e])}function tc(){let{matches:e}=_.useContext(nr),t=e[e.length-1];return t?t.params:{}}function ia(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=_.useContext(rr),{matches:s}=_.useContext(nr),{pathname:a}=Ct(),o=JSON.stringify(vf(s,n.v7_relativeSplatPath));return _.useMemo(()=>yf(e,JSON.parse(o),a,r==="path"),[e,o,a,r])}function g0(e,t){return x0(e,t)}function x0(e,t,r,n){Ns()||le(!1);let{navigator:s}=_.useContext(rr),{matches:a}=_.useContext(nr),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Ct(),d;if(t){var h;let b=typeof t=="string"?wn(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||le(!1),d=b}else d=u;let f=d.pathname||"/",x=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=Vg(e,{pathname:x}),v=_0(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Jt([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Jt([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,r,n);return t&&v?_.createElement(sa.Provider,{value:{location:hs({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:zt.Pop}},v):v}function v0(){let e=S0(),t=h0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),r?_.createElement("pre",{style:s},r):null,null)}const y0=_.createElement(v0,null);class w0 extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?_.createElement(nr.Provider,{value:this.props.routeContext},_.createElement(_f.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function b0(e){let{routeContext:t,match:r,children:n}=e,s=_.useContext(na);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),_.createElement(nr.Provider,{value:t},n)}function _0(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||le(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:x}=r,y=h.route.loader&&f[h.route.id]===void 0&&(!x||x[h.route.id]===void 0);if(h.route.lazy||y){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let x,y=!1,v=null,b=null;r&&(x=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||y0,c&&(u<0&&f===0?(C0("route-fallback"),y=!0,b=null):u===f&&(y=!0,b=h.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,f+1)),p=()=>{let g;return x?g=v:y?g=b:h.route.Component?g=_.createElement(h.route.Component,null):h.route.element?g=h.route.element:g=d,_.createElement(b0,{match:h,routeContext:{outlet:d,matches:m,isDataRoute:r!=null},children:g})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?_.createElement(w0,{location:r.location,revalidation:r.revalidation,component:v,error:x,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var kf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(kf||{}),Nf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Nf||{});function j0(e){let t=_.useContext(na);return t||le(!1),t}function k0(e){let t=_.useContext(bf);return t||le(!1),t}function N0(e){let t=_.useContext(nr);return t||le(!1),t}function Sf(e){let t=N0(),r=t.matches[t.matches.length-1];return r.route.id||le(!1),r.route.id}function S0(){var e;let t=_.useContext(_f),r=k0(),n=Sf();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function E0(){let{router:e}=j0(kf.UseNavigateStable),t=Sf(Nf.UseNavigateStable),r=_.useRef(!1);return jf(()=>{r.current=!0}),_.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,hs({fromRouteId:t},a)))},[e,t])}const ju={};function C0(e,t,r){ju[e]||(ju[e]=!0)}function P0(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function me(e){le(!1)}function A0(e){let{basename:t="/",children:r=null,location:n,navigationType:s=zt.Pop,navigator:a,static:o=!1,future:l}=e;Ns()&&le(!1);let c=t.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:a,static:o,future:hs({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=wn(n));let{pathname:d="/",search:h="",hash:f="",state:x=null,key:y="default"}=n,v=_.useMemo(()=>{let b=pn(d,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:x,key:y},navigationType:s}},[c,d,h,f,x,y,s]);return v==null?null:_.createElement(rr.Provider,{value:u},_.createElement(sa.Provider,{children:r,value:v}))}function ku(e){let{children:t,location:r}=e;return g0(Wo(t),r)}new Promise(()=>{});function Wo(e,t){t===void 0&&(t=[]);let r=[];return _.Children.forEach(e,(n,s)=>{if(!_.isValidElement(n))return;let a=[...t,s];if(n.type===_.Fragment){r.push.apply(r,Wo(n.props.children,a));return}n.type!==me&&le(!1),!n.props.index||!n.props.children||le(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Wo(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Di(){return Di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Di.apply(this,arguments)}function Ef(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function T0(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function F0(e,t){return e.button===0&&(!t||t==="_self")&&!T0(e)}function qo(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function R0(e,t){let r=qo(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(a=>{r.append(s,a)})}),r}const O0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],I0=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],D0="6";try{window.__reactRouterVersion=D0}catch{}const L0=_.createContext({isTransitioning:!1}),$0="startTransition",Nu=Ap[$0];function U0(e){let{basename:t,children:r,future:n,window:s}=e,a=_.useRef();a.current==null&&(a.current=Bg({window:s,v5Compat:!0}));let o=a.current,[l,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=_.useCallback(h=>{u&&Nu?Nu(()=>c(h)):c(h)},[c,u]);return _.useLayoutEffect(()=>o.listen(d),[o,d]),_.useEffect(()=>P0(n),[n]),_.createElement(A0,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const z0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",M0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qt=_.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=Ef(t,O0),{basename:x}=_.useContext(rr),y,v=!1;if(typeof u=="string"&&M0.test(u)&&(y=u,z0))try{let g=new URL(window.location.href),w=u.startsWith("//")?new URL(g.protocol+u):new URL(u),S=pn(w.pathname,x);w.origin===g.origin&&S!=null?u=S+w.search+w.hash:v=!0}catch{}let b=p0(u,{relative:s}),m=q0(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function p(g){n&&n(g),g.defaultPrevented||m(g)}return _.createElement("a",Di({},f,{href:y||b,onClick:v||a?n:p,ref:r,target:c}))}),B0=_.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:a="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,h=Ef(t,I0),f=ia(c,{relative:h.relative}),x=Ct(),y=_.useContext(bf),{navigator:v,basename:b}=_.useContext(rr),m=y!=null&&V0(f)&&u===!0,p=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,g=x.pathname,w=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;s||(g=g.toLowerCase(),w=w?w.toLowerCase():null,p=p.toLowerCase()),w&&b&&(w=pn(w,b)||w);const S=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let k=g===p||!o&&g.startsWith(p)&&g.charAt(S)==="/",j=w!=null&&(w===p||!o&&w.startsWith(p)&&w.charAt(p.length)==="/"),N={isActive:k,isPending:j,isTransitioning:m},P=k?n:void 0,C;typeof a=="function"?C=a(N):C=[a,k?"active":null,j?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(N):l;return _.createElement(Qt,Di({},h,{"aria-current":P,className:C,ref:r,style:O,to:c,viewTransition:u}),typeof d=="function"?d(N):d)});var Vo;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Vo||(Vo={}));var Su;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Su||(Su={}));function W0(e){let t=_.useContext(na);return t||le(!1),t}function q0(e,t){let{target:r,replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l}=t===void 0?{}:t,c=he(),u=Ct(),d=ia(e,{relative:o});return _.useCallback(h=>{if(F0(h,r)){h.preventDefault();let f=n!==void 0?n:Ii(u)===Ii(d);c(e,{replace:f,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,a,o,l])}function Cf(e){let t=_.useRef(qo(e)),r=_.useRef(!1),n=Ct(),s=_.useMemo(()=>R0(n.search,r.current?null:t.current),[n.search]),a=he(),o=_.useCallback((l,c)=>{const u=qo(typeof l=="function"?l(s):l);r.current=!0,a("?"+u,c)},[a,s]);return[s,o]}function V0(e,t){t===void 0&&(t={});let r=_.useContext(L0);r==null&&le(!1);let{basename:n}=W0(Vo.useViewTransitionState),s=ia(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=pn(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=pn(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Bo(s.pathname,o)!=null||Bo(s.pathname,a)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var H0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),$=(e,t)=>{const r=_.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>_.createElement("svg",{ref:d,...H0,width:s,height:s,stroke:n,strokeWidth:o?Number(a)*24/Number(s):a,className:["lucide",`lucide-${G0(e)}`,l].join(" "),...u},[...t.map(([h,f])=>_.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=$("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=$("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=$("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=$("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=$("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=$("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=$("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=$("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=$("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=$("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=$("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=$("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=$("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=$("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=$("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=$("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=$("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=$("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=$("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=$("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=$("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=$("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=$("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=$("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=$("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=$("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=$("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=$("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=$("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=$("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=$("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=$("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=$("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=$("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=$("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=$("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=$("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=$("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=$("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=$("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=$("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=$("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=$("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=$("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=$("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=$("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=$("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=$("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=$("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function la(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function px(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}const mx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class ac extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class gx extends ac{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Cu extends ac{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Pu extends ac{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ko;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ko||(Ko={}));class xx{constructor(t,{headers:r={},customFetch:n,region:s=Ko.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=mx(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return px(this,arguments,void 0,function*(r,n={}){var s;let a,o;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=n;let f={},{region:x}=n;x||(x=this.region);const y=new URL(`${this.url}/${r}`);x&&x!=="any"&&(f["x-region"]=x,y.searchParams.set("forceFunctionRegion",x));let v;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(f["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(f["Content-Type"]="application/json",v=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?v=JSON.stringify(u):v=u;let b=d;h&&(o=new AbortController,a=setTimeout(()=>o.abort(),h),d?(b=o.signal,d.addEventListener("abort",()=>o.abort())):b=o.signal);const m=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:v,signal:b}).catch(S=>{throw new gx(S)}),p=m.headers.get("x-relay-error");if(p&&p==="true")throw new Cu(m);if(!m.ok)throw new Pu(m);let g=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return g==="application/json"?w=yield m.json():g==="application/octet-stream"||g==="application/pdf"?w=yield m.blob():g==="text/event-stream"?w=m:g==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null,response:m}}catch(l){return{data:null,error:l,response:l instanceof Pu||l instanceof Cu?l.context:void 0}}finally{a&&clearTimeout(a)}})}}var vx=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},yx=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let o=null,l=null,c=null,u=a.status,d=a.statusText;if(a.ok){var h,f;if(r.method!=="HEAD"){var x;const m=await a.text();m===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((x=r.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?l=m:l=JSON.parse(m))}const v=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),b=(f=a.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");v&&b&&b.length>1&&(c=parseInt(b[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var y;const v=await a.text();try{o=JSON.parse(v),Array.isArray(o)&&a.status===404&&(l=[],o=null,u=200,d="OK")}catch{a.status===404&&v===""?(u=204,d="No Content"):o={message:v}}if(o&&r.isMaybeSingle&&(!(o==null||(y=o.details)===null||y===void 0)&&y.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&r.shouldThrowOnError)throw new vx(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(a=>{var o;let l="";const c=a==null?void 0:a.cause;if(c){var u,d,h,f;const y=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",v=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(h=a==null?void 0:a.name)!==null&&h!==void 0?h:"FetchError"}: ${a==null?void 0:a.message}`,l+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${y}`,v&&(l+=` (${v})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var x;l=(x=a==null?void 0:a.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},wx=class extends yx{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Au=new RegExp("[,()]");var Dr=class extends wx{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Au.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Au.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},bx=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new Dr({method:s,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:a,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);a.searchParams.set("columns",c.join(","))}}return new Dr({method:s,url:a,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var a;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),s||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);l.searchParams.set("columns",d.join(","))}}return new Dr({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Dr({method:n,url:s,headers:a,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Dr({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},_x=class Uf{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new bx(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Uf(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:a}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=x=>x!==null&&typeof x=="object"&&(!Array.isArray(x)||x.some(d)),h=n&&Object.values(r).some(d);h?(l="POST",u=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([x,y])=>y!==void 0).map(([x,y])=>[x,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([x,y])=>{c.searchParams.append(x,y)})):(l="POST",u=r);const f=new Headers(this.headers);return h?f.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&f.set("Prefer",`count=${a}`),new Dr({method:l,url:c,headers:f,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class jx{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const kx="2.93.1",Nx=`realtime-js/${kx}`,Sx="1.0.0",zf="2.0.0",Tu=zf,Jo=1e4,Ex=1e3,Cx=100;var Ot;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ot||(Ot={}));var ge;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ge||(ge={}));var it;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(it||(it={}));var Qo;(function(e){e.websocket="websocket"})(Qo||(Qo={}));var dr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(dr||(dr={}));class Px{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,a;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(a=t.join_ref)!==null&&a!==void 0?a:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+h.length,x=new ArrayBuffer(this.HEADER_LENGTH+f);let y=new DataView(x),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,c.length),y.setUint8(v++,l.length),y.setUint8(v++,o.length),y.setUint8(v++,u.length),y.setUint8(v++,h.length),y.setUint8(v++,r),Array.from(c,m=>y.setUint8(v++,m.charCodeAt(0))),Array.from(l,m=>y.setUint8(v++,m.charCodeAt(0))),Array.from(o,m=>y.setUint8(v++,m.charCodeAt(0))),Array.from(u,m=>y.setUint8(v++,m.charCodeAt(0))),Array.from(h,m=>y.setUint8(v++,m.charCodeAt(0)));var b=new Uint8Array(x.byteLength+n.byteLength);return b.set(new Uint8Array(x),0),b.set(new Uint8Array(n),x.byteLength),b.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,a,o,l,c]=n;return r({join_ref:s,ref:a,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+a));c=c+a;const h=n.decode(t.slice(c,c+o));c=c+o;const f=t.slice(c,t.byteLength),x=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,y={type:this.BROADCAST_EVENT,event:d,payload:x};return o>0&&(y.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class Mf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var J;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(J||(J={}));const Fu=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,o)=>(a[o]=Ax(o,e,t,s),a),{}):{}},Ax=(e,t,r,n)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,o=r[e];return a&&!n.includes(a)?Bf(a,o):Yo(o)},Bf=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Ox(t,r)}switch(e){case J.bool:return Tx(t);case J.float4:case J.float8:case J.int2:case J.int4:case J.int8:case J.numeric:case J.oid:return Fx(t);case J.json:case J.jsonb:return Rx(t);case J.timestamp:return Ix(t);case J.abstime:case J.date:case J.daterange:case J.int4range:case J.int8range:case J.money:case J.reltime:case J.text:case J.time:case J.timestamptz:case J.timetz:case J.tsrange:case J.tstzrange:return Yo(t);default:return Yo(t)}},Yo=e=>e,Tx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Fx=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Rx=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Ox=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const o=e.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>Bf(t,l))}return e},Ix=e=>typeof e=="string"?e.replace(" ","T"):e,Wf=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class za{constructor(t,r,n={},s=Jo){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ru;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ru||(Ru={}));class Hn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hn.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=Hn.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Hn.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=a[u];if(h){const f=d.map(b=>b.presence_ref),x=h.map(b=>b.presence_ref),y=d.filter(b=>x.indexOf(b.presence_ref)<0),v=h.filter(b=>f.indexOf(b.presence_ref)<0);y.length>0&&(l[u]=y),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(x=>x.presence_ref),f=d.filter(x=>h.indexOf(x.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ou;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ou||(Ou={}));var Gn;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Gn||(Gn={}));var xt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(xt||(xt={}));class Yr{constructor(t,r={config:{}},n){var s,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new za(this,it.join,this.params,this.timeout),this.rejoinTimer=new Mf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ge.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(it.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Hn(this),this.broadcastEndpointURL=Wf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ge.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Gn.PRESENCE]&&this.bindings[Gn.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(xt.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(xt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){t==null||t(xt.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,m=[];for(let p=0;p<b;p++){const g=v[p],{filter:{event:w,schema:S,table:k,filter:j}}=g,N=x&&x[p];if(N&&N.event===w&&Yr.isFilterValueEqual(N.schema,S)&&Yr.isFilterValueEqual(N.table,k)&&Yr.isFilterValueEqual(N.filter,j))m.push(Object.assign(Object.assign({},g),{id:N.id}));else{this.unsubscribe(),this.state=ge.errored,t==null||t(xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(xt.SUBSCRIBED);return}}).receive("error",x=>{this.state=ge.errored,t==null||t(xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ge.joined&&t===Gn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ge.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(it.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new za(this,it.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ge.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new za(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Cx){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=it;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var y,v,b;return((y=x.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(v=x.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(x=>x.callback(f,n)):(a=this.bindings[o])===null||a===void 0||a.filter(x=>{var y,v,b,m,p,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const w=x.id,S=(y=x.filter)===null||y===void 0?void 0:y.event;return w&&((v=r.ids)===null||v===void 0?void 0:v.includes(w))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const w=(p=(m=x==null?void 0:x.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return w==="*"||w===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:v,table:b,commit_timestamp:m,type:p,errors:g}=y;f=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:m,eventType:p,new:{},old:{},errors:g}),this._getPayloadRecords(y))}x.callback(f,n)})}_isClosed(){return this.state===ge.closed}_isJoined(){return this.state===ge.joined}_isJoining(){return this.state===ge.joining}_isLeaving(){return this.state===ge.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Yr.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(it.close,{},t)}_onError(t){this._on(it.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ge.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Fu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Fu(t.columns,t.old_record)),r}}const Ma=()=>{},Hs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Dx=[1e3,2e3,5e3,1e4],Lx=1e4,$x=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ux{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jo,this.transport=null,this.heartbeatIntervalMs=Hs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ma,this.ref=0,this.reconnectTimer=null,this.vsn=Tu,this.logger=Ma,this.conn=null,this.sendBuffer=[],this.serializer=new Px,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Qo.websocket}`,this.httpEndpoint=Wf(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=jx.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ot.connecting:return dr.Connecting;case Ot.open:return dr.Open;case Ot.closing:return dr.Closing;default:return dr.Closed}}isConnected(){return this.connectionState()===dr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Yr(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Ex,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Hs.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:a,ref:o}=r,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Ot.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ot.open||this.conn.readyState===Ot.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(it.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([$x],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:Nx};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(it.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Mf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Hs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,a,o,l,c,u,d,h,f,x;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Jo,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Hs.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Ma,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Tu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:y=>Dx[y-1]||Lx,this.vsn){case Sx:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(y,v)=>v(JSON.stringify(y)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(y,v)=>v(JSON.parse(y));break;case zf:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(x=t==null?void 0:t.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var ps=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function zx(e,t,r){const n=new URL(t,e);if(r)for(const[s,a]of Object.entries(r))a!==void 0&&n.searchParams.set(s,a);return n.toString()}async function Mx(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Bx(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:a,headers:o}){const l=zx(e.baseUrl,n,s),c=await Mx(e.auth),u=await t(l,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...c,...o},body:a?JSON.stringify(a):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const x=h?f:void 0,y=x==null?void 0:x.error;throw new ps((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:x})}return{status:u.status,headers:u.headers,data:f}}}}function Gs(e){return e.join("")}var Wx=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Gs(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gs(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gs(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gs(e.namespace)}`}),!0}catch(t){if(t instanceof ps&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof ps&&r.status===409)return;throw r}}};function Ar(e){return e.join("")}var qx=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ar(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ar(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ar(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ar(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ar(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ar(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof ps&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof ps&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},Vx=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Bx({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Wx(this.client,t),this.tableOps=new qx(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},ca=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function ua(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Ks=class extends ca{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},qf=class extends ca{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const Hx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Gx=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Xo=e=>{if(Array.isArray(e))return e.map(r=>Xo(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=Xo(n)}),t},Kx=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function ms(e){"@babel/helpers - typeof";return ms=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ms(e)}function Jx(e,t){if(ms(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ms(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qx(e){var t=Jx(e,"string");return ms(t)=="symbol"?t:t+""}function Yx(e,t,r){return(t=Qx(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Iu(Object(r),!0).forEach(function(n){Yx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Du=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Xx=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e,a=s.status||500;if(typeof s.json=="function")s.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||a+"";t(new Ks(Du(o),a,l,n))}).catch(()=>{if(n==="vectors"){const o=a+"";t(new Ks(s.statusText||`HTTP ${a} error`,a,o,n))}else{const o=a+"";t(new Ks(s.statusText||`HTTP ${a} error`,a,o,n))}});else{const o=a+"";t(new Ks(s.statusText||`HTTP ${a} error`,a,o,n))}}else t(new qf(Du(e),e,n))},Zx=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?L(L({},s),r):(Gx(n)?(s.headers=L({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),L(L({},s),r))};async function An(e,t,r,n,s,a,o){return new Promise((l,c)=>{e(r,Zx(t,n,s,a)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(o==="vectors"){const d=u.headers.get("content-type");if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>Xx(u,c,n,o))})}function ev(e="storage"){return{get:async(t,r,n,s)=>An(t,"GET",r,n,s,void 0,e),post:async(t,r,n,s,a)=>An(t,"POST",r,s,a,n,e),put:async(t,r,n,s,a)=>An(t,"PUT",r,s,a,n,e),head:async(t,r,n,s)=>An(t,"HEAD",r,L(L({},n),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,r,n,s,a)=>An(t,"DELETE",r,s,a,n,e)}}const tv=ev("storage"),{get:gs,post:te,put:Zo,head:rv,remove:oc}=tv;var bn=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=Hx(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ua(r))return{data:null,error:r};throw r}}},nv=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ua(t))return{data:null,error:t};throw t}}};let Vf;Vf=Symbol.toStringTag;var sv=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Vf]="BlobDownloadBuilder",this.promise=null}asStream(){return new nv(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ua(t))return{data:null,error:t};throw t}}};const iv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Lu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var av=class extends bn{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var s=this;return s.handleOperation(async()=>{let a;const o=L(L({},Lu),n);let l=L(L({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",s.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),c&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(c))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=L(L({},l),n.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),h=await(e=="PUT"?Zo:te)(s.fetch,`${s.url}/object/${d}`,a,L({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:h.Id,fullPath:h.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const a=s._removeEmptyFolders(e),o=s._getFinalPath(a),l=new URL(s.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",t),s.handleOperation(async()=>{let c;const u=L({upsert:Lu.upsert},n),d=L(L({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:a,fullPath:(await Zo(s.fetch,l.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const s=L({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const a=await te(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+a.url),l=o.searchParams.get("token");if(!l)throw new ca("No token returned by API");return{signedUrl:o.toString(),path:e,token:l}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await te(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await te(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(e),a=await te(n.fetch,`${n.url}/object/sign/${s}`,L({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${a.signedURL}${o}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const s=await te(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s.map(o=>L(L({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${a}`):null}))})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",a=this._getFinalPath(e),o=()=>gs(this.fetch,`${this.url}/${r}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new sv(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>Xo(await gs(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await rv(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ua(n)&&n instanceof qf){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await oc(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const s=L(L(L({},iv),t),{},{prefix:e||""});return await te(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=L({},e);return await te(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const ov="2.93.1",Ss={"X-Client-Info":`storage-js/${ov}`};var lv=class extends bn{constructor(e,t={},r,n){const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const a=s.href.replace(/\/$/,""),o=L(L({},Ss),t);super(a,o,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await gs(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await gs(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await te(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await Zo(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await oc(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},cv=class extends bn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=L(L({},Ss),t);super(n,s,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await gs(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await oc(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!Kx(e))throw new ca("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Vx({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,a){const o=s[a];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}},uv=class extends bn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=L(L({},Ss),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await te(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await te(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},dv=class extends bn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=L(L({},Ss),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await te(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await te(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await te(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},hv=class extends bn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=L(L({},Ss),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},fv=class extends hv{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new pv(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},pv=class extends uv{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new mv(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},mv=class extends dv{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,L(L({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},gv=class extends lv{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new av(this.url,this.headers,e,this.fetch)}get vectors(){return new fv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new cv(this.url+"/iceberg",this.headers,this.fetch)}};const Hf="2.93.1",Lr=30*1e3,el=3,Ba=el*Lr,xv="http://localhost:9999",vv="supabase.auth.token",yv={"X-Client-Info":`gotrue-js/${Hf}`},tl="X-Supabase-Api-Version",Gf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},wv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bv=10*60*1e3;class xs extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function I(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class _v extends xs{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function jv(e){return I(e)&&e.name==="AuthApiError"}class hr extends xs{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Pt extends xs{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Me extends Pt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Wa(e){return I(e)&&e.name==="AuthSessionMissingError"}class Tr extends Pt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Js extends Pt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Qs extends Pt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kv(e){return I(e)&&e.name==="AuthImplicitGrantRedirectError"}class $u extends Pt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nv extends Pt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class rl extends Pt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function qa(e){return I(e)&&e.name==="AuthRetryableFetchError"}class Uu extends Pt{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class nl extends Pt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const $i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zu=` 	
\r=`.split(""),Sv=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<zu.length;t+=1)e[zu[t].charCodeAt(0)]=-2;for(let t=0;t<$i.length;t+=1)e[$i[t].charCodeAt(0)]=t;return e})();function Mu(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r($i[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r($i[n]),t.queuedBits-=6}}function Kf(e,t,r){const n=Sv[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Bu(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{Pv(o,n,r)};for(let o=0;o<e.length;o+=1)Kf(e.charCodeAt(o),s,a);return t.join("")}function Ev(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Cv(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Ev(n,t)}}function Pv(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function an(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Kf(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Av(e){const t=[];return Cv(e,r=>t.push(r)),new Uint8Array(t)}function gr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Mu(s,r,n)),Mu(null,r,n),t.join("")}function Tv(e){return Math.round(Date.now()/1e3)+e}function Fv(){return Symbol("auth-callback")}const _e=()=>typeof window<"u"&&typeof document<"u",ir={tested:!1,writable:!1},Jf=()=>{if(!_e())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ir.tested)return ir.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ir.tested=!0,ir.writable=!0}catch{ir.tested=!0,ir.writable=!1}return ir.writable};function Rv(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Qf=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Ov=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",$r=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ar=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},be=async(e,t)=>{await e.removeItem(t)};class da{constructor(){this.promise=new da.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}da.promiseConstructor=Promise;function Ys(e){const t=e.split(".");if(t.length!==3)throw new nl("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!wv.test(t[n]))throw new nl("JWT not in base64url format");return{header:JSON.parse(Bu(t[0])),payload:JSON.parse(Bu(t[1])),signature:an(t[2]),raw:{header:t[0],payload:t[1]}}}async function Iv(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Dv(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){n(o);return}}catch(o){if(!t(a,o)){s(o);return}}})()})}function Lv(e){return("0"+e.toString(16)).substr(-2)}function $v(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,Lv).join("")}async function Uv(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function zv(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Uv(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fr(e,t,r=!1){const n=$v();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await $r(e,`${t}-code-verifier`,s);const a=await zv(n);return[a,n===a?"plain":"s256"]}const Mv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Bv(e){const t=e.headers.get(tl);if(!t||!t.match(Mv))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Wv(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function qv(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Vv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Rr(e){if(!Vv.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Va(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Hv(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function Wu(e){return JSON.parse(JSON.stringify(e))}const cr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Gv=[502,503,504];async function qu(e){var t;if(!Ov(e))throw new rl(cr(e),0);if(Gv.includes(e.status))throw new rl(cr(e),e.status);let r;try{r=await e.json()}catch(a){throw new hr(cr(a),a)}let n;const s=Bv(e);if(s&&s.getTime()>=Gf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Uu(cr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Me}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Uu(cr(r),e.status,r.weak_password.reasons);throw new _v(cr(r),e.status||500,n)}const Kv=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function D(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[tl]||(a[tl]=Gf["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Jv(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Jv(e,t,r,n,s,a){const o=Kv(t,n,s,a);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new rl(cr(c),0)}if(l.ok||await qu(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await qu(c)}}function rt(e){var t;let r=null;Xv(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Tv(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Vu(e){const t=rt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Lt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Qv(e){return{data:e,error:null}}function Yv(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,o=la(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Hu(e){return e}function Xv(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ha=["global","local","others"];class Zv{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Qf(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Ha[0]){if(Ha.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ha.join(", ")}`);try{return await D(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(I(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await D(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Lt})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=la(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await D(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Yv,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(I(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await D(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Lt})}catch(r){if(I(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await D(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Hu});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(I(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Rr(t);try{return await D(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Lt})}catch(r){if(I(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Rr(t);try{return await D(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Lt})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Rr(t);try{return await D(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Lt})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Rr(t.userId);try{const{data:r,error:n}=await D(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(I(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Rr(t.userId),Rr(t.id);try{return{data:await D(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(I(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await D(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Hu});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(I(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await D(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(I(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await D(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(I(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await D(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(I(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await D(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(I(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await D(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(I(r))return{data:null,error:r};throw r}}}function Gu(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Or={debug:!!(globalThis&&Jf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Yf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ey extends Yf{}async function ty(e,t,r){Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Or.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ey(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Or.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function ry(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Xf(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function ny(e){return parseInt(e,16)}function sy(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function iy(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=Xf(e.address),y=d?`${d}://${n}`:n,v=e.statement?`${e.statement}
`:"",b=`${y} wants you to sign in with your Ethereum account:
${x}

${v}`;let m=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(s&&(m+=`
Expiration Time: ${s.toISOString()}`),l&&(m+=`
Not Before: ${l.toISOString()}`),c&&(m+=`
Request ID: ${c}`),u){let p=`
Resources:`;for(const g of u){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);p+=`
- ${g}`}m+=p}return`${b}
${m}`}class fe extends Error{constructor({message:t,code:r,cause:n,name:s}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Ui extends fe{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function ay({error:e,options:t}){var r,n,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new fe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new fe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new fe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new fe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new fe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new fe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new fe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new fe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(Zf(o)){if(a.rp.id!==o)return new fe({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new fe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new fe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new fe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new fe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function oy({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new fe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new fe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Zf(n)){if(r.rpId!==n)return new fe({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new fe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new fe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new fe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class ly{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const cy=new ly;function uy(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=la(e,["challenge","user","excludeCredentials"]),a=an(t).buffer,o=Object.assign(Object.assign({},r),{id:an(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:a,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:an(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function dy(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=la(e,["challenge","allowCredentials"]),s=an(t).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];a.allowCredentials[o]=Object.assign(Object.assign({},l),{id:an(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function hy(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:gr(new Uint8Array(e.response.attestationObject)),clientDataJSON:gr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function fy(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:gr(new Uint8Array(s.authenticatorData)),clientDataJSON:gr(new Uint8Array(s.clientDataJSON)),signature:gr(new Uint8Array(s.signature)),userHandle:s.userHandle?gr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Zf(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Ku(){var e,t;return!!(_e()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function py(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ui("Browser returned unexpected credential type",t)}:{data:null,error:new Ui("Empty credential response",t)}}catch(t){return{data:null,error:ay({error:t,options:e})}}}async function my(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ui("Browser returned unexpected credential type",t)}:{data:null,error:new Ui("Empty credential response",t)}}catch(t){return{data:null,error:oy({error:t,options:e})}}}const gy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},xy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function zi(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const a in s){const o=s[a];if(o!==void 0)if(Array.isArray(o))n[a]=o;else if(r(o))n[a]=o;else if(t(o)){const l=n[a];t(l)?n[a]=zi(l,o):n[a]=zi(o)}else n[a]=o}return n}function vy(e,t){return zi(gy,e,t||{})}function yy(e,t){return zi(xy,e,t||{})}class wy{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},a){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=s??cy.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=vy(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:d,error:h}=await py({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=yy(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:d,error:h}=await my(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return I(o)?{data:null,error:o}:{data:null,error:new hr("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!r)return{data:null,error:new xs("rpId is required for WebAuthn authentication")};try{if(!Ku())return{data:null,error:new hr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:a});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return I(o)?{data:null,error:o}:{data:null,error:new hr("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!r)return{data:null,error:new xs("rpId is required for WebAuthn registration")};try{if(!Ku())return{data:null,error:new hr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:a});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return I(o)?{data:null,error:o}:{data:null,error:new hr("Unexpected error in register",o)}}}}ry();const by={url:xv,storageKey:vv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ju(e,t,r){return await r()}const Ir={};class vs{get jwks(){var t,r;return(r=(t=Ir[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ir[this.storageKey]=Object.assign(Object.assign({},Ir[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ir[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ir[this.storageKey]=Object.assign(Object.assign({},Ir[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},by),t);if(this.storageKey=a.storageKey,this.instanceID=(r=vs.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,vs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&_e()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Zv({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Qf(a.fetch),this.lock=a.lock||Ju,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&_e()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ty:this.lock=Ju,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new wy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Jf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gu(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Gu(this.memoryStorage)),_e()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Hf}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(_e()&&(r=Rv(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),_e()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),kv(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return I(r)?this._returnResult({error:r}):this._returnResult({error:new hr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:rt}),{data:o,error:l}=a;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(I(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:d,password:h,options:f}=t;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await Fr(this.storage,this.storageKey)),a=await D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:x,code_challenge_method:y},xform:rt})}else if("phone"in t){const{phone:d,password:h,options:f}=t;a=await D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:rt})}else throw new Js("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return await be(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(await be(this.storage,`${this.storageKey}-code-verifier`),I(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:o,options:l}=t;r=await D(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Vu})}else if("phone"in t){const{phone:a,password:o,options:l}=t;r=await D(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Vu})}else throw new Js("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const a=new Tr;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(I(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,a,o,l,c,u,d,h,f;let x,y;if("message"in t)x=t.message,y=t.signature;else{const{chain:v,wallet:b,statement:m,options:p}=t;let g;if(_e())if(typeof b=="object")g=b;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")g=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=b}const w=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href),S=await g.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=Xf(S[0]);let j=(n=p==null?void 0:p.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!j){const P=await g.request({method:"eth_chainId"});j=ny(P)}const N={domain:w.host,address:k,statement:m,uri:w.href,version:"1",chainId:j,nonce:(s=p==null?void 0:p.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(a=p==null?void 0:p.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=p==null?void 0:p.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=p==null?void 0:p.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=p==null?void 0:p.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=p==null?void 0:p.signInWithEthereum)===null||d===void 0?void 0:d.resources};x=iy(N),y=await g.request({method:"personal_sign",params:[sy(x),k]})}try{const{data:v,error:b}=await D(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:y},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:rt});if(b)throw b;if(!v||!v.session||!v.user){const m=new Tr;return this._returnResult({data:{user:null,session:null},error:m})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(I(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var r,n,s,a,o,l,c,u,d,h,f,x;let y,v;if("message"in t)y=t.message,v=t.signature;else{const{chain:b,wallet:m,statement:p,options:g}=t;let w;if(_e())if(typeof m=="object")w=m;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))w=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=m}const S=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const k=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),p?{statement:p}:null));let j;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")j=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)j=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)y=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),v=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const k=await w.signMessage(new TextEncoder().encode(y),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=k}}try{const{data:b,error:m}=await D(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:gr(v)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:rt});if(m)throw m;if(!b||!b.session||!b.user){const p=new Tr;return this._returnResult({data:{user:null,session:null},error:p})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:m})}catch(b){if(I(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const r=await ar(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new Nv;const{data:a,error:o}=await D(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:rt});if(await be(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const l=new Tr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(await be(this.storage,`${this.storageKey}-code-verifier`),I(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:o}=t,l=await D(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:rt}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Tr;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(I(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,a,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Fr(this.storage,this.storageKey));const{error:h}=await D(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await D(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Js("You must provide either an email or phone number.")}catch(l){if(await be(this.storage,`${this.storageKey}-code-verifier`),I(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await D(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:rt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(I(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,a,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Fr(this.storage,this.storageKey));const u=await D(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:Qv});return!((a=u.data)===null||a===void 0)&&a.url&&_e()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await be(this.storage,`${this.storageKey}-code-verifier`),I(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Me;const{error:s}=await D(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(I(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:o}=await D(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:o,error:l}=await D(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Js("You must provide either an email or phone number and a type")}catch(r){if(I(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ar(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ba:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await ar(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Va()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=Hv(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await D(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Lt}):await this._useSession(async r=>{var n,s,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Me}:await D(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Lt})})}catch(r){if(I(r))return Wa(r)&&(await this._removeSession(),await be(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Me;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Fr(this.storage,this.storageKey));const{data:u,error:d}=await D(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Lt});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await be(this.storage,`${this.storageKey}-code-verifier`),I(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Me;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:o}=Ys(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(I(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Me;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(I(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!_e())throw new Qs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Qs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new $u("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new $u("No code detected.");const{data:p,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!o||!u)throw new Qs("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const x=f-d;x*1e3<=Lr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:v,error:b}=await this._getUser(a);if(b)throw b;const m={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:t.type},error:null})}catch(n){if(I(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ar(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a&&!Wa(a))return this._returnResult({error:a});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(jv(l)&&(l.status===404||l.status===401||l.status===403)||Wa(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await be(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Fv(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Fr(this.storage,this.storageKey,!0));try{return await D(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await be(this.storage,`${this.storageKey}-code-verifier`),I(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var o,l,c,u,d;const{data:h,error:f}=a;if(f)throw f;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await D(this.fetch,"GET",x,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return _e()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(I(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:a}}=r;if(s)throw s;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,h=await D(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:rt}),{data:f,error:x}=h;return x?this._returnResult({data:{user:null,session:null},error:x}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Tr}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:x}))}catch(s){if(await be(this.storage,`${this.storageKey}-code-verifier`),I(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)throw o;return await D(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Dv(async s=>(s>0&&await Iv(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await D(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:rt})),(s,a)=>{const o=200*Math.pow(2,s);return a&&qa(a)&&Date.now()+o-n<Lr})}catch(n){if(this._debug(r,"error",n),I(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),_e()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await ar(this.storage,this.storageKey);if(s&&this.userStorage){let o=await ar(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await $r(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Va()}else if(s&&!s.user&&!s.user){const o=await ar(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await be(this.storage,this.storageKey+"-user"),await $r(this.storage,this.storageKey,s)):s.user=Va()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ba;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Ba}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),qa(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Me;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new da;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new Me;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),I(a)){const o={data:null,error:a};return qa(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await be(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await $r(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=Wu(s);await $r(this.storage,this.storageKey,a)}else{const s=Wu(r);await $r(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await be(this.storage,this.storageKey),await be(this.storage,this.storageKey+"-code-verifier"),await be(this.storage,this.storageKey+"-user"),this.userStorage&&await be(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&_e()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Lr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Lr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Lr}ms, refresh threshold is ${el} ticks`),s<=el&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Yf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_e()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Fr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?this._returnResult({data:null,error:a}):await D(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await D(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?hy(t.webauthn.credential_response):fy(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await D(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=await D(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:uy(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:dy(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,s,a;if(t)try{const{payload:x}=Ys(t);let y=null;x.aal&&(y=x.aal);let v=y;const{data:{user:b},error:m}=await this.getUser(t);if(m)return this._returnResult({data:null,error:m});((n=(r=b==null?void 0:b.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(v="aal2");const g=x.amr||[];return{data:{currentLevel:y,nextLevel:v,currentAuthenticationMethods:g},error:null}}catch(x){if(I(x))return this._returnResult({data:null,error:x});throw x}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Ys(o.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((a=(s=o.user.factors)===null||s===void 0?void 0:s.filter(x=>x.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(d="aal2");const f=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await D(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Me})})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Me});const o=await D(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&_e()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Me});const o=await D(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&_e()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await D(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Me})})}catch(t){if(I(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await D(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Me})})}catch(r){if(I(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+bv>s)return n;const{data:a,error:o}=await D(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:y}=await this.getSession();if(y||!x.session)return this._returnResult({data:null,error:y});n=x.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:c}}=Ys(n);r!=null&&r.allowExpired||Wv(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:a,header:s,signature:o},error:null}}const d=qv(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Av(`${l}.${c}`)))throw new nl("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(n){if(I(n))return this._returnResult({data:null,error:n});throw n}}}vs.nextInstanceID={};const _y=vs,jy="2.93.1";let In="";typeof Deno<"u"?In="deno":typeof document<"u"?In="web":typeof navigator<"u"&&navigator.product==="ReactNative"?In="react-native":In="node";function ky(){const e=globalThis.process;if(e&&e.platform){const t=e.platform;if(t==="darwin")return"macOS";if(t==="win32")return"Windows";if(t==="linux")return"Linux";if(t==="android")return"Android"}if(typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platform){const t=navigator.userAgentData.platform;if(t==="macOS")return"macOS";if(t==="Windows")return"Windows";if(t==="Linux")return"Linux";if(t==="Android")return"Android";if(t==="iOS")return"iOS"}return null}function Ny(){const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node&&typeof window>"u")try{const r=globalThis.require;if(r)return r("os").release()}catch{return null}}if(typeof Deno<"u"&&Deno.osRelease)try{return Deno.osRelease()}catch{return null}return typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platformVersion?navigator.userAgentData.platformVersion:null}function Sy(){if(typeof Deno<"u")return"deno";if(typeof Bun<"u")return"bun";const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return"node"}return null}function Ey(){if(typeof Deno<"u"&&Deno.version)return Deno.version.deno;if(typeof Bun<"u"&&Bun.version)return Bun.version;const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return t.node}return null}function Cy(){const e={"X-Client-Info":`supabase-js-${In}/${jy}`},t=ky();t&&(e["X-Supabase-Client-Platform"]=t);const r=Ny();r&&(e["X-Supabase-Client-Platform-Version"]=r);const n=Sy();n&&(e["X-Supabase-Client-Runtime"]=n);const s=Ey();return s&&(e["X-Supabase-Client-Runtime-Version"]=s),e}const Py=Cy(),Ay={headers:Py},Ty={schema:"public"},Fy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ry={};function ys(e){"@babel/helpers - typeof";return ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ys(e)}function Oy(e,t){if(ys(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ys(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Iy(e){var t=Oy(e,"string");return ys(t)=="symbol"?t:t+""}function Dy(e,t,r){return(t=Iy(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qu(Object(r),!0).forEach(function(n){Dy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Ly=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),$y=()=>Headers,Uy=(e,t,r)=>{const n=Ly(r),s=$y();return async(a,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,ae(ae({},o),{},{headers:u}))}};function zy(e){return e.endsWith("/")?e:e+"/"}function My(e,t){var r,n;const{db:s,auth:a,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:ae(ae({},c),s),auth:ae(ae({},u),a),realtime:ae(ae({},d),o),storage:{},global:ae(ae(ae({},h),l),{},{headers:ae(ae({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function By(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(zy(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Wy=class extends _y{constructor(e){super(e)}},qy=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const a=By(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const o=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:Ty,realtime:Ry,auth:ae(ae({},Fy),{},{storageKey:o}),global:Ay},c=My(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=Uy(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(ae({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new _x(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new gv(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new xx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:a,flowType:o,lock:l,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Wy({url:this.authUrl.href,headers:ae(ae({},f),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Ux(this.realtimeUrl.href,ae(ae({},e),{},{params:ae(ae({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Vy=(e,t,r)=>new qy(e,t,r);function Hy(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Hy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Gy="https://hoieogginmsfmoarubuu.supabase.co",Ky="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhvaWVvZ2dpbm1zZm1vYXJ1YnV1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3ODM0OTEsImV4cCI6MjA4MTM1OTQ5MX0.5HAcivBIN_fv06Qs4iRjKDNowN204aucVKiwqQBVtkw",T=Vy(Gy,Ky);async function ep(e){const t=e.trim();if(!t)return{products:[],categories:[]};try{const{data:r,error:n}=await T.from("products").select("id, name, slug, price, short_description, view_count, search_hit_count, published").eq("published",!0).or(`name.ilike.%${t}%,slug.ilike.%${t}%`).limit(10);n&&console.error("Error searching products:",n);const{data:s,error:a}=await T.from("categories").select("id, name, slug, parent_id").or(`name.ilike.%${t}%,slug.ilike.%${t}%`).limit(10);return a&&console.error("Error searching categories:",a),{products:r||[],categories:s||[]}}catch(r){return console.error("Unexpected error during search:",r),{products:[],categories:[]}}}async function sl(e){const t=e.trim().toLowerCase();try{const{error:r}=await T.from("popular_searches").upsert({query:t,search_count:1,last_searched_at:new Date().toISOString()},{onConflict:"query"});r&&console.error("Error recording search analytics:",r)}catch(r){console.error("Unexpected error recording search analytics:",r)}}async function il(e,t){try{const{error:r}=await T.from("popular_categories").upsert({category_id:e,category_name:t,search_count:1,last_searched_at:new Date().toISOString()},{onConflict:"category_id"});r&&console.error("Error recording category analytics:",r)}catch(r){console.error("Unexpected error recording category analytics:",r)}}async function tp(e){try{const{data:t,error:r}=await T.from("products").select("search_hit_count").eq("id",e).single();if(r){console.error("Error fetching product search hit count:",r);return}const n=(t==null?void 0:t.search_hit_count)||0,{error:s}=await T.from("products").update({search_hit_count:n+1}).eq("id",e);s&&console.error("Error incrementing product search hit count:",s)}catch(t){console.error("Unexpected error incrementing search hit count:",t)}}async function rp(e){try{const{data:t,error:r}=await T.from("products").select("view_count").eq("id",e).single();if(r){console.error("Error fetching product view count:",r);return}const n=(t==null?void 0:t.view_count)||0,{error:s}=await T.from("products").update({view_count:n+1}).eq("id",e);s&&console.error("Error incrementing product view count:",s)}catch(t){console.error("Unexpected error incrementing view count:",t)}}function Jy(){const[e,t]=_.useState(""),[r,n]=_.useState(!1),[s,a]=_.useState(!1),[o,l]=_.useState([]),[c,u]=_.useState([]),d=_.useRef(null),h=he();_.useEffect(()=>{function p(g){d.current&&!d.current.contains(g.target)&&a(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),_.useEffect(()=>{const p=setTimeout(async()=>{const g=e.trim();if(g.length===0){a(!1),l([]),u([]);return}n(!0);try{const w=await ep(g);l(w.products),u(w.categories),a(!0)}catch(w){console.error("Search failed:",w),l([]),u([])}finally{n(!1)}},300);return()=>clearTimeout(p)},[e]);const f=async()=>{const p=e.trim();if(h(`/shop?search=${encodeURIComponent(p)}`),!p){a(!1);return}if(!(o.length>0||c.length>0)){console.log("Search query has no results:",p);return}if(await sl(p),c.length>0){const w=c[0];await il(w.id,w.name),h(`/shop?category=${encodeURIComponent(w.slug)}&search=${encodeURIComponent(e)}`),a(!1),t("");return}if(o.length>0){const w=o[0];await tp(w.id),h(`/product/${w.slug}?search=${encodeURIComponent(e)}`),a(!1),t("");return}},x=p=>{p.key==="Enter"&&(p.preventDefault(),f())},y=async p=>{rp(p.id).catch(g=>{console.error("Failed to increment view count, but navigation will proceed:",g)}),h(`/product/=${encodeURIComponent(p.slug)}`),a(!1),t("")},v=async p=>{await il(p.id,p.name);const g=e.trim();g&&await sl(g),h(`/shop?category=${encodeURIComponent(p.slug)}`),a(!1),t("")},b=()=>{t(""),l([]),u([]),a(!1)},m=o.length>0||c.length>0;return i.jsxs("div",{ref:d,className:"relative w-full max-w-md",children:[i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(sc,{className:"absolute left-3 h-5 w-5 text-slate-400",strokeWidth:1.5}),i.jsx("input",{type:"text",placeholder:"Search products or categories...",value:e,onChange:p=>t(p.target.value),onKeyDown:x,onFocus:()=>e.trim()&&a(!0),className:"w-full pl-10 pr-10 py-2 bg-white/80 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent placeholder-slate-500"}),i.jsx("div",{className:"absolute right-3",children:r?i.jsx(Ho,{className:"h-5 w-5 text-blue-500 animate-spin",strokeWidth:2}):e&&i.jsx("button",{onClick:b,className:"text-slate-400 hover:text-slate-600 transition-colors","aria-label":"Clear search",children:i.jsx(et,{className:"h-5 w-5",strokeWidth:2})})})]}),s&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-slate-200 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:[r&&i.jsxs("div",{className:"p-4 text-center text-slate-500",children:[i.jsx(Ho,{className:"h-5 w-5 animate-spin mx-auto mb-2",strokeWidth:2}),"Searching..."]}),!r&&!m&&e.trim()&&i.jsxs("div",{className:"p-4 text-center text-slate-500",children:['No products or categories found for "',e,'"']}),!r&&m&&i.jsxs(i.Fragment,{children:[o.length>0&&i.jsxs("div",{className:"border-b border-slate-200",children:[i.jsx("div",{className:"px-4 py-2 bg-slate-50 text-xs font-semibold text-slate-600 uppercase",children:"Products"}),o.map(p=>i.jsx("button",{onClick:()=>y(p),className:"w-full text-left px-4 py-3 hover:bg-slate-100 transition-colors border-b border-slate-100 last:border-b-0",children:i.jsxs("div",{className:"flex gap-3 items-start",children:[i.jsx("div",{className:"h-12 w-12 bg-slate-200 rounded flex-shrink-0 flex items-center justify-center text-xs text-slate-500",children:"Image"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-semibold text-sm text-slate-900 truncate",children:p.name}),p.short_description&&i.jsx("p",{className:"text-xs text-slate-600 truncate",children:p.short_description}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsxs("span",{className:"font-bold text-blue-600",children:["$",p.price.toFixed(2)]}),p.category_name&&i.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:p.category_name})]})]})]})},p.id))]}),c.length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"px-4 py-2 bg-slate-50 text-xs font-semibold text-slate-600 uppercase",children:"Categories"}),c.map(p=>i.jsxs("button",{onClick:()=>v(p),className:"w-full text-left px-4 py-3 hover:bg-slate-100 transition-colors border-b border-slate-100 last:border-b-0",children:[i.jsx("h4",{className:"font-semibold text-sm text-slate-900",children:p.name}),p.parent_id&&i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Subcategory"})]},p.id))]})]})]})]})}const Qy=({onSwipe:e,threshold:t=50})=>{const r=_.useRef({x:0,y:0});return{onTouchStart:a=>{r.current={x:a.touches[0].clientX,y:a.touches[0].clientY}},onTouchEnd:a=>{const o=a.changedTouches[0].clientX-r.current.x,l=a.changedTouches[0].clientY-r.current.y;Math.abs(o)>Math.abs(l)?Math.abs(o)>t&&e(o>0?"right":"left"):Math.abs(l)>t&&e(l>0?"down":"up")}}};function Yy({isOpen:e,onClose:t}){const r=Ct(),n=he(),s=_.useRef(null),[a,o]=_.useState(0),[l,c]=_.useState(!1),u=Qy({onSwipe:b=>{switch(b){case"left":n("/next");break;case"right":n("/previous");break;case"up":n("/home");break;case"down":n("/home");break}}}),d=[{label:"All Products",value:"All"},{label:"Cosmetics",value:"Cosmetics"},{label:"Construction",value:"Construction"},{label:"Furniture",value:"Furniture"},{label:"Clothing and Fashion",value:"Clothing and Fashion"},{label:"Events Tools",value:"Events Tools"},{label:"Electrical Appliances",value:"Electrical Appliances"}],h=[{name:"Home",path:"/"},{name:"About",path:"/about"},{name:"Shop",path:"/shop",hasSubmenu:!0},{name:"Cart",path:"/cart"},{name:"Account",path:"/account"},{name:"Login",path:"/login"}];_.useEffect(()=>{if(e){document.body.style.overflow="hidden";const b=document.querySelector("main");b&&b.setAttribute("aria-hidden","true")}else{document.body.style.overflow="";const b=document.querySelector("main");b&&b.removeAttribute("aria-hidden")}return()=>{document.body.style.overflow=""}},[e]),_.useEffect(()=>{const b=m=>{m.key==="Escape"&&e&&t()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[e,t]),_.useEffect(()=>{const b=p=>{e&&s.current&&!s.current.contains(p.target)&&t()},m=setTimeout(()=>{document.addEventListener("mousedown",b)},100);return()=>{clearTimeout(m),document.removeEventListener("mousedown",b)}},[e,t]);const f=b=>{o(b.touches[0].clientX)},x=b=>{const m=b.changedTouches[0].clientX;a-m>50&&t()},y=b=>{n(b),t()},v=b=>{n(`/shop?category=${b}`),t()};return e?i.jsxs(i.Fragment,{children:[i.jsx("div",{...u,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 transition-opacity duration-300","aria-hidden":"true"}),i.jsxs("div",{ref:s,role:"dialog","aria-label":"Navigation menu","aria-modal":"true",className:`fixed left-0 top-0 h-full w-[80%] max-w-[320px] bg-white/95 backdrop-blur-lg shadow-2xl z-50 transform transition-transform duration-300 ease-out ${e?"translate-x-0":"-translate-x-full"}`,onTouchStart:f,onTouchEnd:x,children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Menu"}),i.jsx("button",{onClick:t,"aria-label":"Close menu",className:"flex items-center justify-center size-10 rounded-full hover:bg-slate-100 transition-colors text-slate-900",children:i.jsx(et,{size:24})})]}),i.jsx("nav",{className:"p-6",children:i.jsx("div",{className:"flex flex-col gap-2",children:h.map(b=>i.jsx("div",{children:b.hasSubmenu?i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>c(!l),className:`w-full flex items-center justify-between px-4 py-3 rounded-lg transition-all font-semibold ${r.pathname===b.path?"bg-slate-900 text-white":"text-slate-700 hover:bg-slate-100"}`,children:[i.jsx("span",{children:b.name}),l?i.jsx(aa,{size:20,className:"transition-transform"}):i.jsx(oa,{size:20,className:"transition-transform"})]}),l&&i.jsx("div",{className:"ml-4 mt-2 flex flex-col gap-1 border-l-2 border-slate-200 pl-4",children:d.map(m=>i.jsx("button",{onClick:()=>v(m.value),className:"text-left px-3 py-2 rounded-lg text-sm text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-colors",children:m.label},m.value))})]}):i.jsx("button",{onClick:()=>y(b.path),className:`w-full text-left px-4 py-3 rounded-lg transition-all font-semibold ${r.pathname===b.path?"bg-slate-900 text-white":"text-slate-700 hover:bg-slate-100"}`,children:b.name})},b.name))})}),i.jsx("div",{className:"absolute bottom-8 left-0 right-0 text-center",children:i.jsx("p",{className:"text-xs text-slate-400",children:"Swipe left or press ESC to close"})})]})]}):null}function Xy(){const[e,t]=_.useState(""),[r,n]=_.useState(!1),[s,a]=_.useState([]),[o,l]=_.useState([]),[c,u]=_.useState(!1),[d,h]=_.useState(-1),f=he(),x=_.useRef(),y=_.useRef(null),v=_.useRef(null),b=_.useCallback(async N=>{if(!N.trim()){a([]),l([]),u(!1);return}n(!0);try{const{products:P,categories:C}=await ep(N);a(P),l(C),u(!0)}catch(P){console.error("Search error:",P)}finally{n(!1)}},[]),m=N=>{const P=N.target.value;t(P),h(-1),x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{b(P)},300)},p=()=>{var N;t(""),a([]),l([]),u(!1),h(-1),(N=v.current)==null||N.focus()},g=async N=>{await rp(N.id),await tp(N.id),f(`/product/${N.id}`),u(!1),t("")},w=async N=>{await il(N.id,N.name),f(`/shop?category=${N.name}`),u(!1),t("")},S=N=>{const P=s.length+o.length;N.key==="Enter"?d>=0&&P>0?d<s.length?g(s[d]):w(o[d-s.length]):e.trim()&&(sl(e),f(`/shop?search=${encodeURIComponent(e)}`),u(!1),t("")):N.key==="ArrowDown"?(N.preventDefault(),h(C=>C<P-1?C+1:C)):N.key==="ArrowUp"?(N.preventDefault(),h(C=>C>0?C-1:-1)):N.key==="Escape"&&(u(!1),h(-1))};_.useEffect(()=>{const N=P=>{y.current&&!y.current.contains(P.target)&&(u(!1),h(-1))};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),_.useEffect(()=>()=>{x.current&&clearTimeout(x.current)},[]);const j=s.length+o.length>0;return i.jsxs("div",{ref:y,className:"relative w-full",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:r?i.jsx(Ho,{size:20,className:"animate-spin"}):i.jsx(sc,{size:20})}),i.jsx("input",{ref:v,type:"text",value:e,onChange:m,onKeyDown:S,placeholder:"Search products, brands and categories",className:"w-full pl-12 pr-12 py-3 rounded-full bg-white/90 backdrop-blur-sm border border-slate-200 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent transition-all","aria-label":"Search","aria-autocomplete":"list","aria-controls":"search-suggestions","aria-expanded":c}),e&&i.jsx("button",{onClick:p,className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors","aria-label":"Clear search",children:i.jsx(et,{size:20})})]}),c&&i.jsx("div",{id:"search-suggestions",role:"listbox",className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-lg shadow-2xl border border-slate-200 max-h-[400px] overflow-y-auto z-50",children:j?i.jsxs(i.Fragment,{children:[s.length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-slate-500 uppercase tracking-wide bg-slate-50",children:"Products"}),s.map((N,P)=>i.jsxs("button",{onClick:()=>g(N),role:"option","aria-selected":d===P,className:`w-full flex items-center gap-3 px-4 py-3 hover:bg-slate-50 transition-colors border-b border-slate-100 last:border-b-0 ${d===P?"bg-slate-100":""}`,children:[N.image_url&&i.jsx("img",{src:N.image_url,alt:N.name,className:"size-12 rounded-lg object-cover shrink-0"}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"font-semibold text-slate-900 text-sm",children:N.name}),N.price&&i.jsxs("p",{className:"text-xs text-slate-500",children:["$",N.price.toFixed(2)]})]})]},N.id))]}),o.length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-slate-500 uppercase tracking-wide bg-slate-50",children:"Categories"}),o.map((N,P)=>i.jsx("button",{onClick:()=>w(N),role:"option","aria-selected":d===s.length+P,className:`w-full text-left px-4 py-3 hover:bg-slate-50 transition-colors border-b border-slate-100 last:border-b-0 ${d===s.length+P?"bg-slate-100":""}`,children:i.jsx("p",{className:"font-semibold text-slate-900 text-sm",children:N.name})},N.id))]})]}):e.trim()&&!r?i.jsxs("div",{className:"px-4 py-8 text-center text-slate-500",children:[i.jsxs("p",{className:"text-sm",children:['No results found for "',e,'"']}),i.jsx("p",{className:"text-xs mt-1",children:"Try a different search term"})]}):null})]})}function Zy({cartItemCount:e}){const[t,r]=_.useState(!1),[n,s]=_.useState(!1),[a,o]=_.useState(null),l=Ct(),c=he();_.useEffect(()=>{T.auth.getSession().then(({data:{session:p}})=>{o((p==null?void 0:p.user)??null)});const{data:{subscription:m}}=T.auth.onAuthStateChange((p,g)=>{o((g==null?void 0:g.user)??null)});return()=>m.unsubscribe()},[]);const u=[{label:"All Products",value:"All"},{label:"Cosmetics",value:"Cosmetics"},{label:"Construction",value:"Construction"},{label:"Furniture",value:"Furniture"},{label:"Clothing and Fashion",value:"Clothing and Fashion"},{label:"Events Tools",value:"Events Tools"},{label:"Electrical Appliances",value:"Electrical Appliances"}],d=[{name:"Home",path:"/"},{name:"About",path:"/about"},{name:"Login",path:"/login"}],h=l.pathname.startsWith("/account"),f=h?"sticky top-0 z-50 w-full bg-[#0A0A0A] border-b border-white/10":"sticky top-0 z-50 w-full bg-white/30 backdrop-blur-md border-b border-[#f0f0f0]",x=h?"text-white":"text-slate-900",y=h?"text-white/60":"text-slate-900/70",v=h?"hover:bg-white/10":"hover:bg-slate-100",b=h?"hover:text-white":"hover:text-black";return i.jsxs("header",{className:f,children:[i.jsx("div",{className:"flex justify-center w-full",children:i.jsxs("div",{className:"flex justify-between w-full max-w-[1280px] items-center px-4 sm:px-6 md:px-8 lg:px-10 py-5 gap-4 sm:gap-6 md:gap-8",children:[i.jsxs(Qt,{to:"/",className:"flex items-center gap-2 cursor-pointer no-underline flex-shrink-0",children:[i.jsx("div",{className:`flex items-center justify-center size-8 rounded-full transition-colors ${h?"bg-white/10":"bg-black"}`,children:i.jsx(Z0,{size:20,strokeWidth:2,className:"text-white"})}),i.jsx("h2",{className:`${x} text-lg sm:text-xl font-extrabold tracking-tight transition-colors whitespace-nowrap`,style:{fontFamily:"Flowmery"},children:"My Super Store"})]}),i.jsxs("nav",{style:{display:window.innerWidth>=768?"flex":"none",gap:"24px",marginLeft:"48px"},className:"items-center relative",children:[d.map(m=>i.jsx(Qt,{to:m.path,className:`transition-all text-sm font-semibold tracking-wide no-underline ${h?"text-white 70 drop-shadow-[0_0_8px_rgba(255,255,255,0.5)] hover:text-white hover:drop-shadow-[0_0_16px_rgba(255,255,255,0.8)]":`${y} ${b} text-slate-900 drop-shadow-[0_0_8px_rgba(15,23,42,0.3)] hover:drop-shadow-[0_0_16px_rgba(15,23,42,0.6)]`}`,children:m.name},m.name)),i.jsxs("div",{className:"relative group",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[i.jsxs("button",{className:`flex items-center gap-1 ${y} ${b} transition-colors text-sm font-semibold tracking-wide`,children:["Shop",i.jsx(aa,{size:16,className:`transition-transform duration-300 ${n?"rotate-180":""}`})]}),n&&i.jsx("div",{className:`absolute top-full left-0 mt-2 w-56 rounded-lg shadow-lg z-50 backdrop-blur-md ${h?"bg-[#0A0A0A]/80 border border-white/10":"bg-white/30 border border-white/20"}`,children:u.map(m=>i.jsx("button",{onClick:()=>{c(`/shop?category=${m.value}`),s(!1)},className:`w-full text-left px-4 py-3 transition-all ${h?"text-white/70 hover:text-white hover:bg-white/10 first:rounded-t-lg last:rounded-b-lg":"text-slate-900/20 hover:text-slate-900 hover:bg-slate-100/20 first:rounded-t-lg last:rounded-b-lg"} text-sm font-medium`,children:m.label},m.value))})]})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-3 sm:gap-4 md:gap-5 ml-auto",children:[i.jsx("button",{onClick:()=>c(a?"/account":"/login"),className:`flex items-center justify-center size-10 rounded-full ${v} transition-colors ${x}`,children:i.jsx(ic,{size:20,strokeWidth:2})}),i.jsxs("button",{onClick:()=>c("/cart"),className:`flex items-center justify-center size-10 rounded-full ${v} transition-colors ${x} relative`,children:[i.jsx(fs,{size:20,strokeWidth:2}),e>0&&i.jsx("span",{className:"absolute top-2 right-2 size-2 bg-[#d4af37] rounded-full"})]})]}),i.jsx("button",{className:"flex md:hidden items-center justify-center ml-2 sm:ml-3",onClick:()=>r(!0),"aria-label":"Open navigation menu",children:i.jsx(lx,{size:24,className:x})})]})}),i.jsx("div",{className:`md:hidden w-full border-b ${h?"border-white/10":"border-[#f0f0f0]"}`,children:i.jsx("div",{className:"flex justify-center w-full",children:i.jsx("div",{className:"w-full max-w-[1280px] px-4 sm:px-6 py-3",children:i.jsx(Xy,{})})})}),i.jsx("div",{className:`hidden md:block w-full border-b ${h?"border-white/10":"border-[#f0f0f0]"}`,children:i.jsx("div",{className:"flex justify-center w-full",children:i.jsx("div",{className:"w-full max-w-[1280px] px-4 sm:px-6 md:px-8 lg:px-10 py-3",children:i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"w-full max-w-2xl",children:i.jsx(Jy,{})})})})})}),i.jsx(Yy,{isOpen:t,onClose:()=>r(!1)})]})}function ew(){return i.jsxs("footer",{className:"site-footer",children:[i.jsxs("div",{className:"footer-grid",children:[i.jsxs("div",{children:[i.jsx("div",{className:"footer-brand",children:"MY SUPERSTORE"}),i.jsx("p",{className:"text-muted",style:{lineHeight:"1.6"},children:"Curating excellence in luxury fashion and accessories since 2025."})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"footer-heading",children:"Shop"}),i.jsxs("ul",{className:"footer-links",children:[i.jsx("li",{children:i.jsx("a",{href:"#",className:"footer-link",children:"New Arrivals"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"footer-link",children:"Best Sellers"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"footer-link",children:"Collections"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"footer-link",children:"Sale"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"footer-heading",children:"Support"}),i.jsxs("ul",{className:"footer-links",children:[i.jsx("li",{children:i.jsx("a",{href:"#",className:"footer-link",children:"Contact Us"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"footer-link",children:"Shipping Info"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"footer-link",children:"Returns"})}),i.jsx("li",{children:i.jsx("a",{href:"#",className:"footer-link",children:"FAQ"})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"footer-heading",children:"Connect"}),i.jsxs("div",{className:"flex gap-6",children:[i.jsx("a",{href:"#",className:"text-muted hover:text-[#FFE55C] transition-colors",children:i.jsx(sx,{size:24,strokeWidth:2.5})}),i.jsx("a",{href:"#",className:"text-muted hover:text-[#FFE55C] transition-colors",children:i.jsx(X0,{size:24,strokeWidth:2.5})}),i.jsx("a",{href:"#",className:"text-muted hover:text-[#FFE55C] transition-colors",children:i.jsx(hx,{size:24,strokeWidth:2.5})})]})]})]}),i.jsxs("div",{className:"footer-bottom",children:[i.jsx("p",{children:" 2025 LUXE. All rights reserved."}),i.jsxs("div",{className:"flex gap-6",children:[i.jsx("a",{href:"#",className:"footer-link",children:"Privacy Policy"}),i.jsx("a",{href:"#",className:"footer-link",children:"Terms of Service"})]})]})]})}function tw(){const e=Ct(),t=he(),r=[{name:"Home",path:"/",icon:rx},{name:"Cart",path:"/cart",icon:fs},{name:"Shop",path:"/shop",icon:sn,isHero:!0},{name:"About",path:"/about",icon:nx},{name:"Account",path:"/account",icon:ic}],n=s=>s==="/"?e.pathname==="/":e.pathname.startsWith(s);return i.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 bg-white/80 backdrop-blur-lg border-t border-slate-200 shadow-2xl",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:i.jsx("div",{className:"flex items-end justify-around px-4 py-2 relative",children:r.map(s=>{const a=s.icon,o=n(s.path);return s.isHero?i.jsxs("button",{onClick:()=>t(s.path),className:"flex flex-col items-center justify-center","aria-label":s.name,children:[i.jsx("div",{className:`flex items-center justify-center size-16 rounded-full shadow-2xl transition-all duration-300 ${o?"bg-linear-to-br from-[#d4af37] via-[#f4d03f] to-[#c5a028] shadow-[0_8px_32px_rgba(212,175,55,0.6)]":"bg-linear-to-br from-slate-800 via-slate-900 to-black shadow-[0_8px_24px_rgba(0,0,0,0.3)] hover:shadow-[0_12px_40px_rgba(212,175,55,0.4)]"}`,style:{transform:o?"scale(1.05)":"scale(1)"},children:i.jsx(a,{size:28,strokeWidth:2.5,className:"text-white"})}),i.jsx("span",{className:`text-[10px] font-bold mt-1 transition-colors ${o?"text-[#d4af37]":"text-slate-600"}`,children:s.name})]},s.name):i.jsxs("button",{onClick:()=>t(s.path),className:"flex flex-col items-center justify-center min-w-[60px] py-2","aria-label":s.name,children:[i.jsx("div",{className:`flex items-center justify-center size-10 rounded-full transition-all duration-200 ${o?"bg-slate-900 text-white":"text-slate-600 hover:bg-slate-100"}`,children:i.jsx(a,{size:20,strokeWidth:2})}),i.jsx("span",{className:`text-[10px] font-semibold mt-1 transition-colors ${o?"text-slate-900":"text-slate-500"}`,children:s.name})]},s.name)})})})}function rw({category:e,products:t}){const r=he(),[n,s]=_.useState(0),a=t.filter(u=>u.category===e.name&&u.image&&u.image.trim()!==""),o=a[n];_.useEffect(()=>{if(a.length<=1)return;const u=setInterval(()=>{s(d=>(d+1)%a.length)},3e3);return()=>clearInterval(u)},[a.length]);const l=u=>{u.stopPropagation(),s(d=>d-1<0?a.length-1:d-1)},c=u=>{u.stopPropagation(),s(d=>(d+1)%a.length)};return i.jsxs("button",{onClick:()=>r(`/shop?category=${e.name}`),className:"group relative rounded-[20px] overflow-hidden cursor-pointer transition-all duration-500 hover:scale-105 hover:-translate-y-2 bg-white border-2 border-[rgba(212,175,55,0.3)] hover:border-[rgba(212,175,55,0.8)] w-full h-full flex flex-col",children:[i.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] rounded-[20px] opacity-0 group-hover:opacity-20 blur transition-opacity duration-500 -z-10"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#FFE55C]/20 via-[#D4AF37]/10 to-[#B8941F]/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),i.jsxs("div",{className:"relative h-44 bg-transparent overflow-hidden flex items-center justify-center border-b-2 border-[rgba(212,175,55,0.2)]",children:[o&&o.image?i.jsx("img",{src:o.image,alt:o.name,loading:"lazy",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},className:"w-full h-full transition-opacity duration-700 p-2"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-slate-200 to-slate-300 flex items-center justify-center",children:i.jsx("span",{className:"text-slate-400 text-sm",children:"No images"})}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),a.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:l,className:"absolute left-3 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white rounded-full p-2 opacity-0 group-hover:opacity-100 transition-all duration-300 z-10 hover:shadow-[0_4px_12px_rgba(212,175,55,0.3)]",children:i.jsx("svg",{className:"w-4 h-4 text-[#0F0F0F]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),i.jsx("button",{onClick:c,className:"absolute right-3 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white rounded-full p-2 opacity-0 group-hover:opacity-100 transition-all duration-300 z-10 hover:shadow-[0_4px_12px_rgba(212,175,55,0.3)]",children:i.jsx("svg",{className:"w-4 h-4 text-[#0F0F0F]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})}),i.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-0.5 md:gap-1.5 z-10",children:a.map((u,d)=>i.jsx("div",{onClick:h=>{h.stopPropagation(),s(d)},className:`rounded-full transition-all duration-300 cursor-pointer ${d===n?"w-[14px] h-[5px] md:w-7 md:h-2 bg-gradient-to-r from-[#FFD700] via-[#FFA500] to-[#FFD700] shadow-[0_0_8px_rgba(255,215,0,0.8),0_0_12px_rgba(255,165,0,0.6)]":"bg-white/60 hover:bg-white/80 w-[3px] h-[3px] md:w-2 md:h-2"}`},d))})]})]}),i.jsx("div",{className:"relative bg-white px-5 py-4 group-hover:bg-gradient-to-r group-hover:from-[#FFE55C] group-hover:via-[#D4AF37] group-hover:to-[#B8941F] transition-all duration-500 flex-grow flex flex-col justify-center",children:i.jsxs("div",{className:"flex justify-between items-center w-full",children:[i.jsx("span",{className:"font-bold text-[#0F0F0F] group-hover:text-[#050505] transition-colors text-base",children:e.name}),a.length>0&&i.jsx("span",{className:"text-xs font-semibold text-[#B8941F] group-hover:text-[#050505] transition-colors bg-[rgba(212,175,55,0.1)] px-2 py-1 rounded-md",children:a.length})]})})]})}function Yu({product:e,delay:t=0,isTrending:r=!1}){const n=he();return i.jsxs("div",{className:"group w-50 relative bg-white rounded-[20px] border-2 border-[rgba(212,175,55,0.3)] overflow-hidden cursor-pointer transition-all duration-500 hover:border-[rgba(212,175,55,0.8)] hover:shadow-[0_20px_50px_rgba(212,175,55,0.25),inset_0_0_30px_rgba(212,175,55,0.1)] flex flex-col h-full",style:{animation:`slideUp 0.6s ease-out ${t}s both`},onClick:()=>n(`/shop/${e.id}`),children:[i.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] rounded-[20px] opacity-0 group-hover:opacity-20 blur transition-opacity duration-500 -z-10"}),r&&i.jsx("div",{className:"absolute top-4 right-4 z-20 animate-gold-glow",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-[#FFE55C]/60 to-[#D4AF37]/40 rounded-full blur-lg opacity-60 group-hover:opacity-100 transition-opacity duration-300 animate-pulse-glow"}),i.jsx("div",{className:"relative bg-gradient-to-r from-[#FFE55C] via-[#F4E04D] to-[#D4AF37] px-3 py-1.5 rounded-full text-[0.65rem] font-extrabold text-[#050505] uppercase tracking-wider shadow-[0_4px_12px_rgba(212,175,55,0.4)] border border-[rgba(255,248,220,0.6)] hover:shadow-[0_6px_16px_rgba(212,175,55,0.6)]",children:" Trending"})]})}),i.jsxs("div",{className:"relative w-full h-20 bg-transparent overflow-hidden border-b-2 border-[rgba(212,175,55,0.2)]",children:[e.image?i.jsx("img",{src:e.image,alt:e.name,loading:"lazy",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"},className:"w-full h-full transition-opacity duration-700"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-slate-200 to-slate-300 flex items-center justify-center",children:i.jsx("span",{className:"text-slate-400 text-sm",children:"No image"})}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),i.jsxs("div",{className:"p-3 flex flex-col gap-2 flex-grow",children:[i.jsx("span",{className:"text-[0.6rem] font-extrabold text-[#D4AF37] uppercase tracking-widest bg-[rgba(212,175,55,0.15)] px-1.5 py-0.5 rounded-md inline-block w-fit",children:e.category.toUpperCase()}),i.jsx("p",{className:"font-bold text-[#0F0F0F] line-clamp-2 text-xs leading-tight transition-all duration-300 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-[#FFE55C] group-hover:via-[#D4AF37] group-hover:to-[#B8941F]",children:e.name}),i.jsxs("p",{className:"text-base font-extrabold bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] bg-clip-text text-transparent mt-auto",children:["$",e.price.toFixed(2)]})]}),i.jsx("div",{className:"px-3 pb-3",children:i.jsx("button",{className:"w-full bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] text-[#050505] font-bold text-sm py-2 rounded-[10px] opacity-0 translate-y-3 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-400 hover:shadow-[0_12px_24px_rgba(212,175,55,0.35)] transform group-hover:scale-100 scale-95 active:scale-95",children:"Add to Cart"})})]})}const Xu=()=>i.jsxs("div",{className:"bg-white rounded-[20px] border-2 border-[rgba(212,175,55,0.2)] overflow-hidden h-full flex flex-col",children:[i.jsx("div",{className:"aspect-[4/5] bg-gradient-to-r from-[#F0F0F0] via-[#E8E8E8] to-[#F0F0F0] animate-shimmer"}),i.jsxs("div",{className:"p-5 space-y-3 flex-grow",children:[i.jsx("div",{className:"h-4 bg-[#E0E0E0] rounded-md w-3/4"}),i.jsx("div",{className:"h-3 bg-[#E8E8E8] rounded-md w-full"}),i.jsx("div",{className:"h-6 bg-gradient-to-r from-[#F0F0F0] to-[#E8E8E8] rounded-md w-1/2 mt-auto"})]})]});function Xs({title:e,products:t,categoryName:r,index:n,loading:s,productsPerSection:a}){const o=he(),l=["from-[rgba(255,229,92,0.05)] via-white to-[rgba(212,175,55,0.03)]","from-white via-[rgba(255,229,92,0.04)] to-white","from-[rgba(212,175,55,0.05)] via-white to-[rgba(255,229,92,0.04)]","from-white to-[rgba(212,175,55,0.04)]"],c=l[n%l.length],u=e.split(" "),d=u[0],h=u.slice(1).join(" ");return i.jsxs("section",{className:`bg-gradient-to-b ${c} relative overflow-hidden`,children:[i.jsx("div",{className:"absolute top-0 left-0 w-[500px] h-[500px] bg-gradient-to-br from-[#FFE55C]/10 to-[#D4AF37]/5 rounded-full filter blur-3xl -z-10"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-[500px] h-[500px] bg-gradient-to-tl from-[#D4AF37]/5 to-[#FFE55C]/10 rounded-full filter blur-3xl -z-10"}),i.jsx("div",{className:"h-[2px] bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent opacity-50"}),i.jsx("div",{className:"bg-black px-6 lg:px-10 py-6 border-t-2 border-[#D4AF37] relative",children:i.jsxs("div",{className:"max-w-[1280px] mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-start gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-5xl text-white drop-shadow-lg",style:{filter:"drop-shadow(0 0 12px rgba(212, 175, 55, 0.8)) drop-shadow(0 0 20px rgba(212, 175, 55, 0.5))"},children:d}),i.jsx("h2",{className:"text-4xl font-extrabold bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] bg-clip-text text-transparent",children:h})]}),i.jsxs("button",{onClick:()=>o(`/shop${r?`?category=${r}`:""}`),className:"text-base font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] hover:opacity-80 transition-all flex items-center gap-2 group",children:["See all",i.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]})]}),i.jsx("div",{className:"h-[3px] w-full bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] rounded-full shadow-lg shadow-[#D4AF37]/30 mt-4"})]})}),i.jsx("div",{className:"h-[2px] bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent opacity-50"}),i.jsx("div",{className:"py-16",children:i.jsxs("div",{className:"max-w-[1280px] mx-auto px-6 lg:px-10 relative z-10",children:[i.jsx("div",{className:"hidden md:block",children:i.jsx("div",{className:"grid grid-cols-8 md:grid-cols-12 lg:grid-cols-6 gap-2 lg:gap-3",children:s?Array.from({length:a}).map((f,x)=>i.jsx(Xu,{},x)):t.length>0?t.map((f,x)=>i.jsx("div",{className:"scale-[0.88] origin-top",children:i.jsx(Yu,{product:f,delay:x*.05,isTrending:n===0})},f.id)):i.jsx("div",{className:"col-span-full text-center py-12",children:i.jsx("p",{className:"text-[#B8941F] text-lg",children:"No products found"})})})}),i.jsx("div",{className:"md:hidden overflow-x-auto scrollbar-hide pb-4 -mx-6 px-6",children:i.jsx("div",{className:"flex gap-4 min-w-min",children:s?Array.from({length:a}).map((f,x)=>i.jsx("div",{className:"w-[70vw] sm:w-[50vw] flex-shrink-0",children:i.jsx(Xu,{})},x)):t.length>0?t.map((f,x)=>i.jsx("div",{className:"w-[70vw] sm:w-[50vw] flex-shrink-0",children:i.jsx(Yu,{product:f,delay:x*.05,isTrending:n===0})},f.id)):i.jsx("div",{className:"w-full text-center py-12",children:i.jsx("p",{className:"text-[#B8941F]",children:"No products found"})})})})]})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[2px] bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent opacity-50"})]})}const Tt=8;function Zu(){const e=he(),[t,r]=_.useState([]),[n,s]=_.useState([]),[a,o]=_.useState([]),[l,c]=_.useState([]),[u,d]=_.useState([]),[h,f]=_.useState([]),[x,y]=_.useState(!0),v=_.useRef(Math.random()),b=async()=>{try{y(!0);const{data:g,error:w}=await T.from("products").select(`
          *,
          product_images ( url, alt_text, position ),
          product_categories (
            categories ( name )
          ),
          product_specs ( spec_key, spec_value )
        `).eq("published",!0).order("created_at",{ascending:!1});if(w)throw w;const S=(g==null?void 0:g.map(k=>{var j,N,P,C,O,W;return{id:k.id,name:k.name,price:k.price,stock:k.stock||0,brand:k.brand,sku:k.sku,short_description:k.short_description,description:k.description,image:(N=(j=k.product_images)==null?void 0:j.sort((Se,V)=>Se.position-V.position)[0])==null?void 0:N.url,product_images:((P=k.product_images)==null?void 0:P.sort((Se,V)=>Se.position-V.position))||[],category:((W=(O=(C=k.product_categories)==null?void 0:C[0])==null?void 0:O.categories)==null?void 0:W.name)||"Uncategorized",product_specs:k.product_specs||[],view_count:k.view_count||0}}))||[];return r(S),S}catch(g){return console.error("Error fetching products:",g),[]}finally{y(!1)}},m=async()=>{try{const{data:g,error:w}=await T.from("categories").select("id, name").order("name");if(w)throw w;s(g||[])}catch(g){console.error("Error fetching categories:",g)}},p=g=>{const w=g.filter(C=>C.image&&C.image.trim()!==""),S=[...w].sort((C,O)=>(O.view_count||0)-(C.view_count||0)).slice(0,Tt);o(S);const k=v.current,j=[...w].sort(()=>Math.sin(k*(Math.random()+1))-.5).slice(0,Tt);c(j);const N=w.filter(C=>C.category==="Electrical Appliances").slice(0,Tt);d(N);const P=w.filter(C=>C.category==="Clothing and Fashion").slice(0,Tt);f(P)};return _.useEffect(()=>{(async()=>{await m();const w=await b();p(w)})()},[]),i.jsxs("main",{className:"bg-white",children:[i.jsx("style",{children:`
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes shimmer {
          0% {
            background-position: -1000px 0;
          }
          100% {
            background-position: 1000px 0;
          }
        }

        @keyframes goldGlow {
          0%, 100% {
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3), 0 0 40px rgba(212, 175, 55, 0.1);
          }
          50% {
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.5), 0 0 60px rgba(212, 175, 55, 0.2);
          }
        }

        @keyframes pulse-glow {
          0%, 100% {
            opacity: 1;
          }
          50% {
            opacity: 0.8;
          }
        }

        .animate-shimmer {
          background-size: 200% 100%;
          animation: shimmer 2s infinite;
        }

        .animate-gold-glow {
          animation: goldGlow 3s ease-in-out infinite;
        }

        .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }

        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
      `}),i.jsxs("section",{className:"relative w-full h-[480px] bg-gradient-to-br from-[#0F0F0F] via-[#1A1A1A] to-[#0F0F0F] overflow-hidden group",children:[i.jsx("div",{className:"absolute inset-0",children:i.jsx("img",{src:"https://via.placeholder.com/1600x600",alt:"Hero Ad",className:"w-full h-full object-cover opacity-30 group-hover:opacity-40 transition-opacity duration-700"})}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#0F0F0F]/90 via-[#1A1A1A]/70 to-[#0F0F0F]/90"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#FFE55C]/10 via-transparent to-[#D4AF37]/5"}),i.jsx("div",{className:"absolute top-0 left-1/4 w-[600px] h-[600px] bg-[#FFE55C] rounded-full mix-blend-screen filter blur-[100px] opacity-10 group-hover:opacity-20 transition-opacity duration-700"}),i.jsx("div",{className:"absolute bottom-0 right-1/4 w-[600px] h-[600px] bg-[#D4AF37] rounded-full mix-blend-screen filter blur-[100px] opacity-10 group-hover:opacity-20 transition-opacity duration-700"}),i.jsx("div",{className:"absolute inset-0 flex items-center px-8 lg:px-16 z-10",children:i.jsxs("div",{className:"max-w-2xl",style:{animation:"slideUp 0.8s ease-out"},children:[i.jsx("div",{className:"inline-block mb-6",children:i.jsx("span",{className:"text-[#FFE55C] text-sm font-extrabold uppercase tracking-widest bg-[rgba(212,175,55,0.1)] px-4 py-2 rounded-full border border-[rgba(212,175,55,0.3)]",children:" Premium Collection"})}),i.jsxs("h1",{className:"text-6xl lg:text-7xl mb-6 leading-tight text-white font-extrabold",style:{fontFamily:"dosis"},children:["Discover ",i.jsx("span",{className:"bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] bg-clip-text text-transparent",children:"Luxury"})]}),i.jsx("p",{className:"text-xl text-[#D0D0D0] mb-10 leading-relaxed opacity-90",children:"Explore our curated collection of premium products. Every item selected for quality, style, and elegance."}),i.jsxs("button",{onClick:()=>e("/shop"),className:"relative group/btn inline-block",children:[i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] rounded-[14px] opacity-50 group-hover/btn:opacity-100 blur transition duration-500 group-hover/btn:duration-200"}),i.jsx("div",{className:"relative bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] text-[#050505] px-10 py-4 rounded-[12px] font-extrabold text-lg hover:shadow-[0_20px_40px_rgba(212,175,55,0.4)] transition-all duration-300 transform hover:scale-105 active:scale-95",children:"Start Shopping Now"})]})]})})]}),i.jsxs("section",{className:"w-full max-w-screen-2xl mx-auto py-24 lg:py-32 ",children:[i.jsx("div",{className:"h-[4px] bg-gradient-to-r from-[rgba(95,82,17,0.71)] via-[#D4AF37] to-[rgba(46,38,0,0.94)] opacity-50 mb-20"}),i.jsxs("div",{className:"relative mb-20 bg-black py-12 px-6 lg:px-10 ",children:[i.jsx("h2",{style:{fontFamily:"revert"},className:"text-5xl md:text-6xl lg:text-7xl font-extrabold bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] bg-clip-text text-transparent",children:"Shop by Category"}),i.jsx("div",{className:"h-[4px]  w-48 bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] rounded-full mt-6 shadow-lg shadow-[#D4AF37]/40 "})]}),i.jsx("div",{className:"py-6 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6",children:x?Array.from({length:8}).map((g,w)=>i.jsx("div",{className:"rounded-[16px] h-40 bg-slate-100 animate-pulse"},w)):n.filter(g=>t.some(w=>w.category===g.name&&w.image&&w.image.trim()!=="")).length>0?n.filter(g=>t.some(w=>w.category===g.name&&w.image&&w.image.trim()!=="")).map(g=>i.jsx(rw,{category:g,products:t},g.id)):i.jsx("p",{className:"col-span-full text-slate-500",children:"No categories with images found"})})]}),i.jsx("section",{className:"w-full bg-gradient-to-b from-[rgba(255,229,92,0.05)] via-white to-[rgba(212,175,55,0.03)] py-12 border-y border-[rgba(212,175,55,0.2)]",children:i.jsx("div",{className:"max-w-[1280px] mx-auto px-6 lg:px-10",children:i.jsxs("div",{className:"relative rounded-[24px] overflow-hidden group cursor-pointer border-2 border-[rgba(212,175,55,0.3)] hover:border-[rgba(212,175,55,0.8)] transition-all duration-500",children:[i.jsx("img",{src:"https://via.placeholder.com/1400x300",alt:"Mid Ad",className:"w-full rounded-[22px] group-hover:scale-110 transition-transform duration-700 brightness-95 group-hover:brightness-105"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#D4AF37]/40 via-transparent to-[#D4AF37]/30 group-hover:from-[#D4AF37]/60 group-hover:via-[#D4AF37]/20 group-hover:to-[#D4AF37]/50 transition-all duration-500 rounded-[22px]"})]})})}),a.length>0&&i.jsx(Xs,{title:" Trending Products",products:a,index:0,loading:x,productsPerSection:Tt}),l.length>0&&i.jsx(Xs,{title:" Recommended For You",products:l,index:1,loading:x,productsPerSection:Tt}),u.length>0&&i.jsx(Xs,{title:" Electronics Picks",products:u,categoryName:"Electrical Appliances",index:2,loading:x,productsPerSection:Tt}),h.length>0&&i.jsx(Xs,{title:" Fashion Essentials",products:h,categoryName:"Clothing and Fashion",index:3,loading:x,productsPerSection:Tt}),i.jsxs("section",{className:"w-full py-20 bg-gradient-to-b from-[#0F0F0F] via-[#1A1A1A] to-[#0F0F0F] relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 left-1/3 w-[500px] h-[500px] bg-[#FFE55C] rounded-full mix-blend-screen filter blur-[100px] opacity-10 group-hover:opacity-20 transition-opacity duration-700"}),i.jsx("div",{className:"absolute bottom-0 right-1/3 w-[500px] h-[500px] bg-[#D4AF37] rounded-full mix-blend-screen filter blur-[100px] opacity-10 group-hover:opacity-20 transition-opacity duration-700"}),i.jsx("div",{className:"max-w-[1280px] mx-auto px-6 lg:px-10 relative z-10",children:i.jsxs("div",{className:"relative rounded-[24px] overflow-hidden group cursor-pointer border-2 border-[rgba(212,175,55,0.3)] hover:border-[rgba(212,175,55,0.8)] transition-all duration-500",children:[i.jsx("img",{src:"https://via.placeholder.com/1600x400",alt:"Bottom Ad",className:"w-full rounded-[22px] group-hover:scale-110 transition-transform duration-700 brightness-75 group-hover:brightness-90"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FFE55C]/50 via-[#D4AF37]/30 to-[#B8941F]/50 group-hover:from-[#FFE55C]/70 group-hover:via-[#D4AF37]/50 group-hover:to-[#B8941F]/70 transition-all duration-500 rounded-[22px]"})]})})]})]})}const nw="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function gn(e){const[t,r]=_.useState(!1),n=()=>{r(!0)},{src:s,alt:a,style:o,className:l,...c}=e;return t?i.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${l??""}`,style:o,children:i.jsx("div",{className:"flex items-center justify-center w-full h-full",children:i.jsx("img",{src:nw,alt:"Error loading image",...c,"data-original-url":s})})}):i.jsx("img",{src:s,alt:a,className:l,style:o,...c,onError:n})}function np({product:e,onProductClick:t,variant:r="default"}){var y;const[n,s]=_.useState(0),[a,o]=_.useState(!0),l=((y=e.product_images)==null?void 0:y.map(v=>v.url))||[e.image||"https://via.placeholder.com/500"];_.useEffect(()=>{if(!a||l.length<=1)return;const v=setInterval(()=>{s(b=>(b+1)%l.length)},5e3);return()=>clearInterval(v)},[a,l.length]);const c=v=>{v.stopPropagation(),o(!1),s(b=>(b-1+l.length)%l.length)},u=v=>{v.stopPropagation(),o(!1),s(b=>(b+1)%l.length)},d=(v,b)=>v.length<=b?v:v.slice(0,b).trim()+"...",h=()=>o(!1),f=()=>o(!0),x=(e.stock??0)>0;return i.jsxs("div",{onClick:()=>t(e.id),className:`product-card ${r==="black"?"card-black p-4":""}`,children:[i.jsx("div",{className:"product-image-container group relative",onMouseEnter:h,onMouseLeave:f,children:i.jsxs("div",{className:"relative w-full h-full overflow-hidden rounded-lg",children:[i.jsx(gn,{src:l[n],alt:e.name,className:"product-image transition-opacity duration-500"}),!x&&i.jsx("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded text-xs font-semibold",children:"Out of Stock"}),e.brand&&i.jsx("div",{className:"absolute top-2 right-2 bg-black/30 text-[#FFD700] px-2 py-1 rounded text-xs font-bold backdrop-blur-sm",children:e.brand}),l.length>1&&i.jsxs("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 bg-black/60 px-2 py-1 rounded-full text-xs text-[#D4AF37] backdrop-blur-sm",children:[n+1," / ",l.length]}),l.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:c,className:"absolute left-1 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 bg-black/60 hover:bg-[#D4AF37] text-white hover:text-black p-1.5 rounded-full backdrop-blur-sm",children:i.jsx(J0,{size:16,strokeWidth:2.5})}),i.jsx("button",{onClick:u,className:"absolute right-1 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 bg-black/60 hover:bg-[#D4AF37] text-white hover:text-black p-1.5 rounded-full backdrop-blur-sm",children:i.jsx(oa,{size:16,strokeWidth:2.5})})]}),l.length>1&&i.jsx("div",{className:"absolute top-2 left-1/2 transform -translate-x-1/2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:l.map((v,b)=>i.jsx("button",{onClick:m=>{m.stopPropagation(),o(!1),s(b)},className:`w-1 h-1 rounded-full transition-all ${b===n?"bg-[#D4AF37] w-2":"bg-white/40 hover:bg-white/60"}`},b))})]})}),i.jsxs("div",{className:"product-info",children:[i.jsx("h3",{className:"product-name",children:d(e.name,40)}),e.short_description&&i.jsx("p",{className:"text-xs text-white mb-2 line-clamp-2",children:e.short_description}),x&&i.jsxs("span",{className:"product-category",children:[i.jsx(St,{size:12}),e.stock," in stock"]}),typeof e.price=="number"&&i.jsxs("div",{className:"product-price",children:["$",e.price.toLocaleString()]})]})]})}function sw({onNavigate:e}){const[t,r]=_.useState([]),[n,s]=_.useState(!0),[a,o]=_.useState("All"),[l,c]=_.useState("featured"),[u,d]=_.useState({min:0,max:1e6}),[h,f]=_.useState(!1),[x,y]=Cf(),[v,b]=_.useState(""),m=["All","Cosmetics","Construction","Furniture","Clothing and Fashion","Events Tools","Electrical Appliances"];_.useEffect(()=>{p()},[]),_.useEffect(()=>{const w=x.get("category"),S=x.get("search");o(w??"All"),b(S??"")},[x]);const p=async()=>{try{s(!0);const{data:w,error:S}=await T.from("products").select(`
          *,
          product_images ( url, alt_text, position ),
          product_categories (
            categories ( name )
          ),
          product_specs ( spec_key, spec_value )
        `).eq("published",!0).order("created_at",{ascending:!1});if(S)throw S;console.log("Fetched products:",w==null?void 0:w.length);const k=(w==null?void 0:w.map(j=>{var N,P,C,O,W,Se;return{id:j.id,name:j.name,price:j.price,stock:j.stock||0,brand:j.brand,sku:j.sku,short_description:j.short_description,description:j.description,image:(P=(N=j.product_images)==null?void 0:N.sort((V,ce)=>V.position-ce.position)[0])==null?void 0:P.url,product_images:((C=j.product_images)==null?void 0:C.sort((V,ce)=>V.position-ce.position))||[],category:((Se=(W=(O=j.product_categories)==null?void 0:O[0])==null?void 0:W.categories)==null?void 0:Se.name)||"Uncategorized",product_specs:j.product_specs||[],view_count:j.view_count}}))||[];r(k)}catch(w){console.error("Error fetching products:",w)}finally{s(!1)}},g=t.filter(w=>a==="All"||w.category===a).filter(w=>w.price>=u.min&&w.price<=u.max).filter(w=>{var S,k;return!v||w.name.toLowerCase().includes(v.toLowerCase())||((S=w.short_description)==null?void 0:S.toLowerCase().includes(v.toLowerCase()))||((k=w.brand)==null?void 0:k.toLowerCase().includes(v.toLowerCase()))}).sort((w,S)=>l==="price-low"?w.price-S.price:l==="price-high"?S.price-w.price:0);return n?i.jsx("div",{className:"section flex items-center justify-center min-h-[50vh]",children:i.jsx(G,{className:"animate-spin text-[var(--gold-primary)]",size:48})}):i.jsxs("div",{className:"page-fade section relative",children:[i.jsxs("div",{className:"relative min-h-[300px] flex items-center justify-center -mx-8 -mt-8 px-8 pt-8 mb-8",style:{overflow:"hidden"},children:[i.jsx("div",{className:"absolute inset-0 z-0"}),i.jsxs("div",{className:"relative z-10 text-center",children:[i.jsx("h1",{className:"page-title",style:{fontFamily:"'Oswald', sans-serif"},children:"Luxury Collection"}),i.jsx("p",{className:"page-desc",children:v?`${g.length} results for ${v}`:`${g.length} exceptional pieces representing the pinnacle of craftsmanship.`})]})]}),i.jsxs("div",{className:"filters-container",children:[i.jsx("div",{className:"filter-group",children:m.map(w=>i.jsx("button",{onClick:()=>{o(w),w==="All"?(x.delete("category"),y(x)):y({category:w,...v&&{search:v}})},className:`filter-chip ${a===w?"active":""}`,children:w},w))}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem"},children:[i.jsxs("button",{onClick:()=>f(!h),className:"link-gold",style:{background:"none",WebkitBackgroundClip:"unset",color:"var(--black)",display:"flex",alignItems:"center"},children:[i.jsx(dx,{size:20,strokeWidth:2.5,style:{marginRight:"0.5rem"}}),"Filters"]}),i.jsxs("div",{className:"sort-wrapper",children:[i.jsxs("select",{value:l,onChange:w=>c(w.target.value),className:"sort-select",children:[i.jsx("option",{value:"featured",children:"Featured"}),i.jsx("option",{value:"price-low",children:"Price: Low to High"}),i.jsx("option",{value:"price-high",children:"Price: High to Low"}),i.jsx("option",{value:"newest",children:"Newest"})]}),i.jsx(aa,{size:16,className:"sort-icon",strokeWidth:3})]})]})]}),h&&i.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"#f9f9f9",borderRadius:"0.5rem",marginBottom:"2rem",border:"1px solid #e5e7eb"},children:[i.jsx("h3",{style:{marginBottom:"1rem",fontWeight:"600",fontSize:"0.95rem"},children:"Price Range"}),i.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.5rem",color:"#666"},children:"Min"}),i.jsx("input",{type:"number",value:u.min,onChange:w=>d({...u,min:Math.max(0,parseInt(w.target.value)||0)}),min:"0",className:"w-full px-2 py-2 border border-gray-300 rounded text-sm",placeholder:"$0"})]}),i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{display:"block",fontSize:"0.85rem",marginBottom:"0.5rem",color:"#666"},children:"Max"}),i.jsx("input",{type:"number",value:u.max,onChange:w=>d({...u,max:Math.max(u.min,parseInt(w.target.value)||1e6)}),min:"0",className:"w-full px-2 py-2 border border-gray-300 rounded text-sm",placeholder:"$10,000"})]})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"0.85rem",color:"#666",display:"block",marginBottom:"0.5rem"},children:"Min Price Slider"}),i.jsx("input",{type:"range",min:"0",max:u.max,value:u.min,onChange:w=>d({...u,min:Math.min(parseInt(w.target.value),u.max)}),style:{width:"100%"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{fontSize:"0.85rem",color:"#666",display:"block",marginBottom:"0.5rem"},children:"Max Price Slider"}),i.jsx("input",{type:"range",min:u.min,max:"10000",value:u.max,onChange:w=>d({...u,max:Math.max(u.min,parseInt(w.target.value))}),style:{width:"100%"}})]})]}),i.jsxs("p",{style:{marginTop:"1rem",fontSize:"0.9rem",fontWeight:"500"},children:["$",u.min.toLocaleString()," - $",u.max.toLocaleString()]})]}),i.jsx("div",{className:"grid grid-cols-4 gap-6",children:g.map(w=>i.jsx("div",{children:i.jsx(np,{product:w,onProductClick:S=>e("product",S)})},w.id))}),i.jsx("div",{style:{textAlign:"center",marginTop:"4rem"},children:i.jsx("button",{className:"load-more-btn",children:"Load More"})})]})}function iw({isOpen:e,onClose:t}){return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),i.jsxs("div",{className:"relative z-10 w-full max-w-md bg-[#0A0A0A] border border-[#D4AF37]/20 rounded-2xl p-8 shadow-2xl animate-in fade-in zoom-in duration-300",children:[i.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:i.jsx(et,{size:24})}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#FFE55C] via-[#D4AF37] to-[#B8941F] rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-[#D4AF37]/20",children:i.jsx(ox,{size:32,className:"text-black",strokeWidth:2.5})}),i.jsx("h3",{className:"text-2xl font-serif font-bold text-white mb-2",children:"Login Required"}),i.jsx("p",{className:"text-[#A3A3A3] mb-8",children:"Please log in to your account to add items to your cart and proceed with checkout."}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(Qt,{to:"/login",className:"block w-full py-3 px-6 bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] text-black font-semibold rounded-xl hover:shadow-[0_8px_20px_rgba(212,175,55,0.3)] transition-all transform hover:-translate-y-0.5",children:"Log In Now"}),i.jsx("button",{onClick:t,className:"block w-full py-3 px-6 bg-transparent border border-[#D4AF37]/30 text-[#D4AF37] font-semibold rounded-xl hover:bg-[#D4AF37]/10 transition-colors",children:"Continue Browsing"})]})]})]})]}):null}const sp=_.createContext({session:null,user:null,loading:!0,signOut:async()=>{}});function aw({children:e}){const[t,r]=_.useState(null),[n,s]=_.useState(null),[a,o]=_.useState(!0);_.useEffect(()=>{T.auth.getSession().then(({data:{session:u}})=>{r(u),s((u==null?void 0:u.user)??null),o(!1)});const{data:{subscription:c}}=T.auth.onAuthStateChange((u,d)=>{r(d),s((d==null?void 0:d.user)??null),o(!1)});return()=>c.unsubscribe()},[]);const l=async()=>{await T.auth.signOut()};return i.jsx(sp.Provider,{value:{session:t,user:n,loading:a,signOut:l},children:e})}const lc=()=>_.useContext(sp),ip=_.createContext({items:[],addToCart:async()=>{},removeFromCart:async()=>{},updateQuantity:async()=>{},total:0,itemCount:0,loading:!1});function ow({children:e}){const{user:t}=lc(),[r,n]=_.useState([]),[s,a]=_.useState(null),[o,l]=_.useState(!1);_.useEffect(()=>{t?c():(n([]),a(null))},[t]),_.useEffect(()=>{if(!s)return;const y=T.channel("cart_subscription").on("postgres_changes",{event:"*",schema:"public",table:"cart_items",filter:`cart_id=eq.${s}`},()=>{c()}).subscribe();return()=>{T.removeChannel(y)}},[s]);const c=async()=>{if(t){l(!0);try{let y;const{data:v}=await T.from("carts").select("id").eq("user_id",t.id).single();if(v)y=v.id;else{const{data:m,error:p}=await T.from("carts").insert({user_id:t.id}).select().single();if(p||!m)throw p;y=m.id}a(y);const{data:b}=await T.from("cart_items").select("*, products ( id, name, price, description, product_images ( url ), seller_id )").eq("cart_id",y);n(b||[])}catch(y){console.error("Error fetching cart:",y)}finally{l(!1)}}},u=async(y,v=1)=>{if(!t||!s){alert("Please login to add to cart");return}try{const b=r.find(m=>m.product_id===y.id);b?await h(b.id,b.quantity+v):(await T.from("cart_items").insert({cart_id:s,product_id:y.id,quantity:v,price_at_time:y.price}),console.log("Item added to cart_items table in Supabase"),await c())}catch(b){console.error("Error adding to cart:",b),alert("Error adding to cart")}},d=async y=>{await T.from("cart_items").delete().eq("id",y),n(v=>v.filter(b=>b.id!==y))},h=async(y,v)=>{v<1||(await T.from("cart_items").update({quantity:v}).eq("id",y),n(b=>b.map(m=>m.id===y?{...m,quantity:v}:m)))},f=r.reduce((y,v)=>{var b;return y+(((b=v.products)==null?void 0:b.price)||0)*v.quantity},0),x=r.reduce((y,v)=>y+v.quantity,0);return i.jsx(ip.Provider,{value:{items:r,addToCart:u,removeFromCart:d,updateQuantity:h,total:f,itemCount:x,loading:o},children:e})}const ha=()=>_.useContext(ip);function lw(){var v,b;const{id:e}=tc(),{addToCart:t}=ha(),[r,n]=_.useState(null),[s,a]=_.useState(!0),[o,l]=_.useState(1),[c,u]=_.useState("One Size"),[d,h]=_.useState(!1),f=["Small","Medium","Large","One Size"];_.useEffect(()=>{e&&x()},[e]);const x=async()=>{var m,p,g,w,S,k;try{a(!0);const{data:j,error:N}=await T.from("products").select(`
          *,
          product_images ( url, alt_text, position ),
          product_categories (
            categories ( name, slug )
          ),
          product_specs ( spec_key, spec_value )
        `).eq("id",e).single();if(N)throw N;n({...j,image:(p=(m=j.product_images)==null?void 0:m.sort((P,C)=>P.position-C.position)[0])==null?void 0:p.url,category:((S=(w=(g=j.product_categories)==null?void 0:g[0])==null?void 0:w.categories)==null?void 0:S.name)||"Uncategorized",product_images:((k=j.product_images)==null?void 0:k.sort((P,C)=>P.position-C.position))||[],product_specs:j.product_specs||[]})}catch(j){console.error("Error fetching product:",j)}finally{a(!1)}},y=async()=>{const{data:{session:m}}=await T.auth.getSession();if(!m){h(!0);return}r&&(await t(r,o),alert("Product added to cart"))};return s?i.jsx("div",{className:"section flex items-center justify-center min-h-[50vh]",children:i.jsx(G,{className:"animate-spin text-[var(--gold-primary)]",size:48})}):r?i.jsxs("div",{className:"section relative",children:[i.jsxs("div",{className:"detail-grid relative z-10",children:[i.jsxs("div",{children:[i.jsx("div",{className:"gallery-main",children:i.jsx(gn,{src:r.image||"https://via.placeholder.com/800",alt:r.name,className:"product-image"})}),i.jsx("div",{className:"gallery-thumbnails",children:((v=r.product_images)==null?void 0:v.map((m,p)=>i.jsx("div",{className:"gallery-thumb",children:i.jsx(gn,{src:m.url,alt:m.alt_text||r.name,className:"product-image"})},p)))||[1,2,3].map(m=>i.jsx("div",{className:"gallery-thumb",children:i.jsx("div",{className:"w-full h-full bg-gray-200"})},m))})]}),i.jsxs("div",{className:"card-black",children:[i.jsx("p",{className:"text-muted mb-2",children:r.category}),i.jsx("h1",{className:"text-white mb-6",style:{fontSize:"2.5rem",fontFamily:"'Oswald', sans-serif"},children:r.name}),i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsxs("div",{className:"flex gap-1",children:[[1,2,3,4,5].map(m=>i.jsx(Vn,{size:20,strokeWidth:2.5,style:{fill:"url(#gold-gradient)",stroke:"#D4AF37",filter:"drop-shadow(0 0 4px rgba(244, 224, 77, 0.5))"}},m)),i.jsx("svg",{width:"0",height:"0",children:i.jsx("defs",{children:i.jsxs("linearGradient",{id:"gold-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:"#FFE55C"}),i.jsx("stop",{offset:"50%",stopColor:"#D4AF37"}),i.jsx("stop",{offset:"100%",stopColor:"#B8941F"})]})})})]}),i.jsx("span",{className:"text-muted",children:"(127 reviews)"})]}),i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsxs("span",{className:"detail-price",children:["$",((b=r.price)==null?void 0:b.toLocaleString())||"0.00"]}),r.stock!==void 0&&r.stock!==null?r.stock>0?i.jsxs("span",{className:"bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-sm",children:[r.stock," in stock"]}):i.jsx("span",{className:"bg-red-500/20 text-red-400 px-3 py-1 rounded-full text-sm",children:"Out of stock"}):i.jsx("span",{className:"bg-gray-500/20 text-gray-400 px-3 py-1 rounded-full text-sm",children:"Stock unavailable"})]}),r.short_description&&i.jsx("p",{className:"text-gray-300 mb-4 font-medium",children:r.short_description}),i.jsx("p",{className:"detail-desc",children:r.description||"No detailed description available for this product."}),r.product_specs&&r.product_specs.length>0&&i.jsxs("div",{className:"mb-6 mt-6 pt-6 border-t border-gray-700",children:[i.jsx("h4",{className:"text-white mb-4 font-semibold",children:"Specifications"}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:r.product_specs.map((m,p)=>i.jsxs("div",{className:"bg-gray-800/50 rounded px-3 py-2",children:[i.jsx("span",{className:"text-gray-400 text-sm block",children:m.spec_key}),i.jsx("span",{className:"text-white",children:m.spec_value||"N/A"})]},p))})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h4",{className:"text-white mb-4",style:{fontFamily:"'Oswald', sans-serif"},children:"Select Size"}),i.jsx("div",{className:"size-grid",children:f.map(m=>i.jsx("button",{onClick:()=>u(m),className:`size-btn ${c===m?"active":""}`,children:m},m))})]}),i.jsxs("div",{className:"mb-12",children:[i.jsx("h4",{className:"text-white mb-4",style:{fontFamily:"'Oswald', sans-serif"},children:"Quantity"}),i.jsxs("div",{className:"quantity-controls",children:[i.jsx("button",{onClick:()=>l(Math.max(1,o-1)),className:"qty-btn",children:i.jsx(Ff,{size:20,strokeWidth:2.5})}),i.jsx("span",{className:"qty-display",children:o}),i.jsx("button",{onClick:()=>l(o+1),className:"qty-btn",disabled:r.stock!==void 0&&o>=r.stock,children:i.jsx(mn,{size:20,strokeWidth:2.5})})]})]}),i.jsxs("div",{className:"detail-actions",children:[i.jsx("button",{onClick:y,className:"btn-primary",style:{flex:1,padding:"1rem"},disabled:r.stock!==void 0&&r.stock<=0,children:r.stock!==void 0&&r.stock<=0?"Out of Stock":"Add to Cart"}),i.jsx("button",{className:"qty-btn",style:{width:"64px",height:"auto",border:"1px solid var(--white)"},children:i.jsx(tx,{size:24,strokeWidth:2.5})})]}),i.jsxs("div",{className:"detail-features",children:[i.jsxs("div",{className:"feature-row",children:[i.jsx($f,{size:24,strokeWidth:2.5,style:{color:"#D4AF37"}}),i.jsx("span",{children:"Free shipping worldwide"})]}),i.jsxs("div",{className:"feature-row",children:[i.jsx(Of,{size:24,strokeWidth:2.5,style:{color:"#D4AF37"}}),i.jsx("span",{children:"Authenticity guaranteed"})]}),i.jsxs("div",{className:"feature-row",children:[i.jsx(ux,{size:24,strokeWidth:2.5,style:{color:"#D4AF37"}}),i.jsx("span",{children:"30-day return policy"})]})]})]})]}),i.jsx(iw,{isOpen:d,onClose:()=>h(!1)})]}):i.jsx("div",{className:"section text-center text-white",children:"Product not found"})}function cw({onNavigate:e}){const{items:t,total:r,removeFromCart:n,updateQuantity:s,loading:a}=ha(),o=r,l=o>500?0:50,c=o*.08,u=o+l+c;return a?i.jsx("div",{className:"section flex items-center justify-center min-h-[50vh]",children:i.jsx(G,{className:"animate-spin text-[var(--gold-primary)]",size:48})}):i.jsxs("div",{className:"page-fade section relative",children:[i.jsx("h1",{className:"page-title mb-12",children:"Shopping Cart"}),t.length===0?i.jsxs("div",{className:"card-black p-24 text-center",children:[i.jsx("h3",{className:"text-white mb-6",children:"Your cart is empty"}),i.jsx("p",{className:"text-muted mb-12",children:"Discover our exceptional collection"}),i.jsx("button",{onClick:()=>e("shop"),className:"btn-primary",style:{padding:"1rem 3rem"},children:"Continue Shopping"})]}):i.jsxs("div",{className:"cart-grid",children:[i.jsx("div",{className:"col-span-2 space-y-6",children:t.map(d=>{var h,f,x,y,v,b,m,p;return i.jsxs("div",{className:"card-black p-6 flex gap-6",children:[i.jsx("div",{className:"cart-thumb",children:i.jsx(gn,{src:((x=(f=(h=d.products)==null?void 0:h.product_images)==null?void 0:f[0])==null?void 0:x.url)||"https://via.placeholder.com/150",alt:(y=d.products)==null?void 0:y.name,className:"product-image"})}),i.jsxs("div",{className:"cart-details",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-white mb-2",children:(v=d.products)==null?void 0:v.name}),i.jsxs("div",{className:"text-white font-bold",children:["$",(m=(b=d.products)==null?void 0:b.price)==null?void 0:m.toLocaleString()]})]}),i.jsx("button",{onClick:()=>n(d.id),className:"text-muted hover:text-white transition-colors bg-transparent border-none cursor-pointer p-0",children:i.jsx(et,{size:24,strokeWidth:2.5})})]}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>s(d.id,Math.max(1,d.quantity-1)),className:"qty-btn",style:{width:"32px",height:"32px"},children:i.jsx(Ff,{size:14,strokeWidth:2.5})}),i.jsx("span",{className:"text-white w-8 text-center",children:d.quantity}),i.jsx("button",{onClick:()=>s(d.id,d.quantity+1),className:"qty-btn",style:{width:"32px",height:"32px"},children:i.jsx(mn,{size:14,strokeWidth:2.5})})]}),i.jsxs("div",{className:"bg-gradient-to-r from-[#FFE55C] via-[#D4AF37] to-[#B8941F] bg-clip-text text-transparent font-bold",children:["$",((((p=d.products)==null?void 0:p.price)||0)*d.quantity).toLocaleString()]})]})]})]},d.id)})}),i.jsx("div",{children:i.jsxs("div",{className:"card-black p-8 sticky top-24",children:[i.jsx("h3",{className:"text-white mb-8 font-serif",style:{fontFamily:"'Oswald', sans-serif"},children:"Order Summary"}),i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["$",o.toLocaleString()]})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Shipping"}),i.jsx("span",{children:l===0?"Free":`$${l}`})]}),i.jsxs("div",{className:"summary-row",children:[i.jsx("span",{children:"Tax"}),i.jsxs("span",{children:["$",c.toFixed(2)]})]}),i.jsxs("div",{className:"summary-total",children:[i.jsx("span",{children:"Total"}),i.jsxs("div",{className:"total-price",children:["$",u.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),i.jsxs(Qt,{to:"/checkout",style:{textDecoration:"none"},children:[i.jsx("button",{className:"btn-primary",style:{width:"100%",marginBottom:"1rem",padding:"1rem"},children:"Proceed to Checkout"}),i.jsx("button",{onClick:()=>e("shop"),className:"btn-outline-gold",style:{width:"100%",padding:"1rem"},children:"Continue Shopping"})]}),o<500&&i.jsx("div",{className:"mt-6 p-4 border border-[rgba(222,157,13,0.3)] text-center",children:i.jsxs("p",{className:"text-muted text-sm",children:["Add ",i.jsxs("span",{style:{color:"var(--gold-solid)"},children:["$",(500-o).toLocaleString()]})," more for free shipping"]})})]})})]})]})}function uw(){const e=he();ha();const{user:t}=lc(),[r,n]=_.useState(!0),[s,a]=_.useState(!1),[o,l]=_.useState(null),[c,u]=_.useState(!1),[d,h]=_.useState([]),[f,x]=_.useState(null),[,y]=_.useState(null);_.useEffect(()=>{(async()=>{if(!t){e("/login");return}n(!0),l(null);try{const{data:S,error:k}=await T.from("carts").select("id").eq("user_id",t.id).limit(1).single();if(k)throw new Error("Failed to load cart");y(S.id);const{data:j,error:N}=await T.from("cart_items").select(`
            id,
            quantity,
            price_at_time,
            products (
              id,
              name,
              price,
              slug,
              product_images (url)
            )
          `).eq("cart_id",S.id);if(N)throw new Error("Failed to load cart items");h(j);const{data:P,error:C}=await T.from("addresses").select("*").eq("user_id",t.id).limit(1).single();!C&&P&&x(P)}catch(S){l(S instanceof Error?S.message:"Failed to load checkout data")}finally{n(!1)}})()},[t,e]);const v=d.reduce((w,S)=>{var j;const k=((j=S.products)==null?void 0:j.price)||S.price_at_time;return w+k*S.quantity},0),b=v>5e4?0:5e3,m=v*.08,p=v+b+m,g=async()=>{if(!t){l("Please log in to continue");return}if(!f){u(!0);return}a(!0),l(null);try{const w=d.map(P=>({product_id:P.products.id,quantity:P.quantity,price:P.products.price||P.price_at_time})),{data:S}=await T.from("user_profiles").select("email").eq("user_id",t.id).single(),k=(S==null?void 0:S.email)||t.email,j=await fetch("https://hoieogginmsfmoarubuu.supabase.co/functions/v1/super-endpoint",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhvaWVvZ2dpbm1zZm1vYXJ1YnV1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3ODM0OTEsImV4cCI6MjA4MTM1OTQ5MX0.5HAcivBIN_fv06Qs4iRjKDNowN204aucVKiwqQBVtkw"},body:JSON.stringify({user_id:t.id,email:k,currency:"NGN",items:w,shipping_address_id:f.id,billing_address_id:f.id})});if(!j.ok){const P=await j.json();throw new Error(P.error||"Payment initialization failed")}const N=await j.json();if(!N.authorization_url||!N.order_id)throw new Error("Invalid response from payment service");e(`/order-confirmation?order_id=${N.order_id}`),window.open(N.authorization_url,"_blank")}catch(w){console.error("Payment error:",w),l(w instanceof Error?w.message:"Failed to initialize payment")}finally{a(!1)}};return r?i.jsx("div",{className:"section flex items-center justify-center min-h-[60vh]",children:i.jsx(G,{className:"animate-spin text-[var(--gold-primary)]",size:48})}):d.length===0?i.jsx("div",{className:"section",children:i.jsxs("div",{className:"card-black p-24 text-center",children:[i.jsx(sn,{size:64,className:"mx-auto mb-6 text-[var(--gold-primary)]"}),i.jsx("h3",{className:"text-white mb-4",children:"Your cart is empty"}),i.jsx("p",{className:"text-muted mb-8",children:"Add some items to proceed with checkout"}),i.jsx("button",{onClick:()=>e("/shop"),className:"btn-primary",children:"Continue Shopping"})]})}):i.jsxs("div",{className:"section relative",children:[i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h1",{className:"page-title mb-12",style:{fontFamily:"'Oswald', sans-serif"},children:"Checkout"}),o&&i.jsxs("div",{className:"mb-8 p-4 bg-red-900/20 border border-red-500/50 rounded-lg flex items-start gap-3",children:[i.jsx(Li,{className:"text-red-500 flex-shrink-0 mt-0.5",size:20}),i.jsx("div",{children:i.jsx("p",{className:"text-red-200",children:o})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{className:"card-black",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(ur,{className:"text-[var(--gold-primary)]",size:24}),i.jsx("h3",{className:"text-2xl font-serif text-[var(--gold-primary)]",style:{fontFamily:"'Oswald', sans-serif"},children:"Shipping Address"})]}),f?i.jsxs("div",{className:"bg-white/5 p-6 rounded-lg",children:[f.label&&i.jsx("p",{className:"text-[var(--gold-primary)] font-semibold mb-2",children:f.label}),i.jsx("p",{className:"text-white",children:f.line1}),f.line2&&i.jsx("p",{className:"text-white",children:f.line2}),i.jsxs("p",{className:"text-white",children:[f.city,", ",f.state," ",f.postal_code]}),i.jsx("p",{className:"text-white",children:f.country})]}):i.jsxs("div",{className:"bg-orange-900/20 border border-orange-500/50 p-6 rounded-lg",children:[i.jsx("p",{className:"text-orange-200 mb-4",children:"No shipping address found. Please add your delivery address to continue."}),i.jsx("button",{onClick:()=>e("/account"),className:"btn-outline-gold",children:"Add Address in Account"})]})]}),i.jsxs("div",{className:"card-black",children:[i.jsx("h3",{className:"text-2xl font-serif mb-6 text-[var(--gold-primary)]",style:{fontFamily:"'Oswald', sans-serif"},children:"Order Items"}),i.jsx("div",{className:"space-y-4",children:d.map(w=>{var S,k,j,N,P,C,O;return i.jsxs("div",{className:"flex gap-4 bg-white/5 p-4 rounded-lg",children:[i.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:i.jsx(gn,{src:((j=(k=(S=w.products)==null?void 0:S.product_images)==null?void 0:k[0])==null?void 0:j.url)||"https://via.placeholder.com/150",alt:(N=w.products)==null?void 0:N.name,className:"w-full h-full object-cover rounded"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-white font-semibold mb-1",children:(P=w.products)==null?void 0:P.name}),i.jsxs("p",{className:"text-muted text-sm",children:["Quantity: ",w.quantity]}),i.jsxs("p",{className:"text-[var(--gold-primary)] font-semibold",children:["",((((C=w.products)==null?void 0:C.price)||w.price_at_time)*w.quantity).toLocaleString()]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-white",children:["",(((O=w.products)==null?void 0:O.price)||w.price_at_time).toLocaleString()]}),i.jsx("p",{className:"text-muted text-sm",children:"each"})]})]},w.id)})})]}),i.jsx("button",{onClick:g,disabled:s||!f,className:"btn-primary w-full text-lg py-4 flex items-center justify-center gap-3",style:{background:s?"rgba(212, 175, 55, 0.3)":void 0,cursor:s||!f?"not-allowed":"pointer"},children:s?i.jsxs(i.Fragment,{children:[i.jsx(G,{className:"animate-spin",size:24}),i.jsx("span",{children:"Processing..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{children:"Pay with Paystack"}),i.jsxs("span",{className:"font-bold",children:["",p.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]}),i.jsx("div",{children:i.jsxs("div",{className:"card-black sticky top-24",children:[i.jsx("h3",{className:"font-serif text-xl mb-6",style:{fontFamily:"'Oswald', sans-serif"},children:"Order Summary"}),i.jsxs("div",{className:"space-y-4 text-gray-400",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["Subtotal (",d.length," items)"]}),i.jsxs("span",{className:"text-white",children:["",v.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Shipping"}),i.jsx("span",{className:"text-white",children:b===0?"Free":`${b.toLocaleString()}`})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Tax (8%)"}),i.jsxs("span",{className:"text-white",children:["",m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),i.jsxs("div",{className:"border-t border-white/10 pt-4 flex justify-between text-white font-bold text-lg",children:[i.jsx("span",{children:"Total"}),i.jsxs("span",{className:"text-[var(--gold-primary)]",children:["",p.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),v<5e4&&i.jsx("div",{className:"mt-6 p-4 border border-[rgba(222,157,13,0.3)] text-center",children:i.jsxs("p",{className:"text-muted text-sm",children:["Add ",i.jsxs("span",{style:{color:"var(--gold-solid)"},children:["",(5e4-v).toLocaleString()]})," more for free shipping"]})})]})})]})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"card-black max-w-md w-full relative",children:[i.jsx("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 text-muted hover:text-white transition-colors",children:i.jsx(et,{size:24})}),i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Li,{className:"mx-auto mb-4 text-orange-500",size:64}),i.jsx("h3",{className:"text-2xl font-serif text-white mb-4",children:"Shipping Address Required"}),i.jsx("p",{className:"text-muted mb-8",children:"You need to add a delivery address before you can proceed with payment. Please go to your account page and add your shipping address."}),i.jsxs("div",{className:"flex gap-4 justify-center",children:[i.jsx("button",{onClick:()=>u(!1),className:"btn-outline-gold",children:"Cancel"}),i.jsx("button",{onClick:()=>e("/account"),className:"btn-primary",children:"Go to Account"})]})]})]})})]})}function dw(){var S;const[e]=Cf(),t=e.get("order_id"),r=e.get("reference"),[n,s]=_.useState(!0),[a,o]=_.useState(null),[l,c]=_.useState(null),[u,d]=_.useState([]),[h,f]=_.useState(null),[x,y]=_.useState(null),[v,b]=_.useState(!1),m=_.useCallback(async()=>{s(!0),o(null);try{let k=null;if(t)k=t;else if(r){const{data:V,error:ce}=await T.from("payments").select("order_id, status, provider_payment_id, amount, currency, created_at").eq("provider_payment_id",r).maybeSingle();if(ce&&console.warn("Payment lookup error:",ce),V&&V.order_id)k=V.order_id,f(V);else{c(null),d([]),f(null),y(null),s(!1);return}}else{o("No order reference provided in the URL."),s(!1);return}const{data:j,error:N}=await T.from("orders").select("*").eq("id",k).maybeSingle();if(N)throw new Error("Order fetch failed");if(!j){o("Order not found"),s(!1);return}c(j);const{data:P,error:C}=await T.from("order_items").select("id, quantity, unit_price, product_id").eq("order_id",k);if(C)throw new Error("Failed to load order items");const O=(P||[]).map(V=>V.product_id).filter(Boolean);let W=[];if(O.length>0){const{data:V,error:ce}=await T.from("products").select("id, name, slug, product_images(url)").in("id",O);ce?console.warn("Failed to load product details",ce):W=V||[]}const Se=(P||[]).map(V=>({...V,product:W.find(ce=>ce.id===V.product_id)}));if(d(Se),!h){const{data:V,error:ce}=await T.from("payments").select("*").eq("order_id",k).maybeSingle();ce?console.warn("Payment not found yet:",ce):V&&f(V)}if(j.shipping_address_id){const{data:V,error:ce}=await T.from("addresses").select("*").eq("id",j.shipping_address_id).maybeSingle();!ce&&V&&y(V)}o(null)}catch(k){console.error("Error fetching order:",k),o(k instanceof Error?k.message:"Failed to load order")}finally{s(!1)}},[t,r,h]);_.useEffect(()=>{m()},[m]),_.useEffect(()=>{if(!(!!l&&l.status!=="paid"||!!r&&!l)){b(!1);return}b(!0);const j=setInterval(()=>{m()},3e3);return()=>clearInterval(j)},[l,r,m]);const p=()=>{s(!0),m()};if(n&&!l)return i.jsx("div",{className:"section flex items-center justify-center min-h-[60vh]",children:i.jsx(G,{className:"animate-spin text-[var(--gold-primary)]",size:48})});if(a||!l&&!n)return i.jsx("div",{className:"section",children:i.jsxs("div",{className:"card-black p-16 text-center max-w-2xl mx-auto",children:[i.jsx(Li,{size:64,className:"mx-auto mb-6 text-red-500"}),i.jsx("h2",{className:"text-2xl font-serif text-white mb-4",children:"Order Not Found"}),i.jsx("p",{className:"text-muted mb-8",children:a||"Invalid order reference"}),i.jsx(Qt,{to:"/cart",className:"btn-primary no-underline",children:"Return to Cart"})]})});const g=(l==null?void 0:l.status)==="paid",w=(l==null?void 0:l.status)==="pending"||!l&&!!r;return i.jsx("div",{className:"section relative",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("div",{className:"flex justify-center mb-6",children:g?i.jsx(Pf,{size:80,className:"text-[var(--gold-primary)]",strokeWidth:1.5}):i.jsx(G,{size:80,className:"animate-spin text-orange-500",strokeWidth:1.5})}),i.jsx("h1",{className:"font-serif text-4xl mb-4 bg-gradient-to-r from-[var(--gold-light)] via-[var(--gold-primary)] to-[var(--gold-dark)] bg-clip-text text-transparent",children:g?"Order Confirmed!":"Waiting for Payment..."}),i.jsx("p",{className:"text-gray-400 text-lg mb-2",children:g?"Thank you for your purchase. Your order has been confirmed.":"Please complete your payment in the Paystack window."}),i.jsxs("p",{className:"text-muted",children:["Order ID: ",i.jsx("span",{className:"text-[var(--gold-primary)] font-mono",children:((S=l==null?void 0:l.id)==null?void 0:S.slice(0,8).toUpperCase())??""})]}),v&&i.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 text-sm text-orange-400",children:[i.jsx(G,{size:16,className:"animate-spin"}),i.jsx("span",{children:"Checking payment status..."})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[i.jsxs("div",{className:"card-black",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(Af,{className:"text-[var(--gold-primary)]",size:24}),i.jsx("h3",{className:"text-xl font-serif text-[var(--gold-primary)]",children:"Payment Details"})]}),h?i.jsxs("div",{className:"space-y-3 text-gray-400",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Provider"}),i.jsx("span",{className:"text-white capitalize",children:h.provider})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Amount"}),i.jsxs("span",{className:"text-white",children:[h.currency," ",h.amount.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Status"}),i.jsx("span",{className:`font-semibold ${h.status==="success"?"text-green-400":"text-orange-400"}`,children:h.status.toUpperCase()})]}),h.provider_payment_id&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Transaction ID"}),i.jsxs("span",{className:"text-white font-mono text-sm",children:[h.provider_payment_id.slice(0,12),"..."]})]})]}):i.jsx("p",{className:"text-muted",children:"Payment information not available yet"})]}),x&&i.jsxs("div",{className:"card-black",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(ur,{className:"text-[var(--gold-primary)]",size:24}),i.jsx("h3",{className:"text-xl font-serif text-[var(--gold-primary)]",children:"Shipping Address"})]}),i.jsxs("div",{className:"text-gray-400",children:[x.label&&i.jsx("p",{className:"text-[var(--gold-primary)] font-semibold mb-2",children:x.label}),i.jsx("p",{className:"text-white",children:x.line1}),x.line2&&i.jsx("p",{className:"text-white",children:x.line2}),i.jsxs("p",{className:"text-white",children:[x.city,", ",x.state," ",x.postal_code]}),i.jsx("p",{className:"text-white",children:x.country})]})]})]}),i.jsxs("div",{className:"card-black mb-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(St,{className:"text-[var(--gold-primary)]",size:24}),i.jsx("h3",{className:"text-xl font-serif text-[var(--gold-primary)]",children:"Order Items"})]}),i.jsx("div",{className:"space-y-4",children:u.map(k=>{var j,N,P,C,O;return i.jsxs("div",{className:"flex gap-4 bg-white/5 p-4 rounded-lg",children:[i.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:i.jsx(gn,{src:((P=(N=(j=k.product)==null?void 0:j.product_images)==null?void 0:N[0])==null?void 0:P.url)||"https://via.placeholder.com/150",alt:(C=k.product)==null?void 0:C.name,className:"w-full h-full object-cover rounded"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-white font-semibold mb-1",children:(O=k.product)==null?void 0:O.name}),i.jsxs("p",{className:"text-muted text-sm",children:["Quantity: ",k.quantity]}),i.jsxs("p",{className:"text-[var(--gold-primary)] font-semibold",children:["",(k.unit_price*k.quantity).toLocaleString()]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-white",children:["",k.unit_price.toLocaleString()]}),i.jsx("p",{className:"text-muted text-sm",children:"each"})]})]},k.id)})}),i.jsx("div",{className:"mt-6 pt-6 border-t border-white/10",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-xl font-serif text-white",children:"Total Amount"}),i.jsxs("span",{className:"text-2xl font-bold text-[var(--gold-primary)]",children:[l==null?void 0:l.currency," ",l==null?void 0:l.total_amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]}),i.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[w&&i.jsxs("button",{onClick:p,disabled:n,className:"btn-outline-gold flex items-center gap-2",children:[i.jsx(cx,{size:20,className:n?"animate-spin":""}),"Refresh Payment Status"]}),g&&i.jsxs(i.Fragment,{children:[i.jsx(Qt,{to:"/account",className:"btn-outline-gold no-underline",children:"View Orders"}),i.jsx(Qt,{to:"/shop",className:"btn-primary no-underline",children:"Continue Shopping"})]})]}),i.jsxs("div",{className:"text-center mt-8 text-muted text-sm",children:["Order placed: ",l&&new Date(l.placed_at).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})})}function hw(){const e=he(),[t,r]=_.useState("login"),[n,s]=_.useState(!1),[a,o]=_.useState(""),[l,c]=_.useState(""),[u,d]=_.useState(""),[h,f]=_.useState(null),x=async()=>{try{s(!0),f(null);const{error:v}=await T.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/account`}});if(v)throw v}catch(v){f(v.message),s(!1)}},y=async v=>{v.preventDefault(),s(!0),f(null);try{if(t==="login"){const{error:b}=await T.auth.signInWithPassword({email:a,password:l});if(b)throw b;e("/account")}else{const{error:b}=await T.auth.signUp({email:a,password:l,options:{data:{full_name:u}}});if(b)throw b;alert("Registration successful! Please check your email to confirm your account."),r("login")}}catch(b){f(b.message)}finally{s(!1)}};return i.jsx("div",{className:"page-fade section flex items-center justify-center min-h-[70vh]",children:i.jsxs("div",{className:"card-black max-w-md w-full p-8 border border-[#FFC92E]/20 shadow-[0_0_40px_rgba(255,201,46,0.1)]",children:[i.jsxs("div",{className:"flex border-b border-white/10 mb-8",children:[i.jsxs("button",{className:`flex-1 pb-4 text-center font-serif text-lg transition-colors relative ${t==="login"?"text-[var(--gold-primary)]":"text-gray-500 hover:text-gray-300"}`,onClick:()=>r("login"),children:["Login",t==="login"&&i.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D]"})]}),i.jsxs("button",{className:`flex-1 pb-4 text-center font-serif text-lg transition-colors relative ${t==="register"?"text-[var(--gold-primary)]":"text-gray-500 hover:text-gray-300"}`,onClick:()=>r("register"),children:["Register",t==="register"&&i.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D]"})]})]}),h&&i.jsxs("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-500/30 rounded-lg flex items-center gap-3 text-red-200 text-sm",children:[i.jsx(Li,{size:18}),h]}),t==="login"?i.jsxs("form",{className:"space-y-6",onSubmit:y,children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-400 mb-2 text-sm uppercase tracking-wider font-medium",children:"Email Address"}),i.jsx("input",{type:"email",className:"w-full  bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors",value:a,onChange:v=>o(v.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-400 mb-2 text-sm uppercase tracking-wider font-medium",children:"Password"}),i.jsx("input",{type:"password",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors",value:l,onChange:v=>c(v.target.value),required:!0})]}),i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsxs("label",{className:"flex items-center gap-2 text-gray-400 cursor-pointer hover:text-white transition-colors",children:[i.jsx("input",{type:"checkbox",className:"accent-[#FFC92E]"}),i.jsx("span",{children:"Remember me"})]}),i.jsx("a",{href:"#",className:"text-[#FFC92E] hover:text-[#FFE55C] transition-colors",children:"Forgot Password?"})]}),i.jsxs("button",{type:"submit",disabled:n,className:"btn-gold",children:[n&&i.jsx(G,{className:"animate-spin inline mr-2",size:16}),"Sign In"]}),i.jsx("div",{children:i.jsxs("p",{className:"text-center text-gray-500 text-sm",children:["Don't have an account?"," ",i.jsx("span",{className:"text-[#FFC92E] hover:text-[#FFE55C] cursor-pointer font-medium",onClick:()=>r("register"),children:"Register"})]})})]}):i.jsxs("form",{className:"space-y-6",onSubmit:y,children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-400 mb-2 text-sm uppercase tracking-wider font-medium",children:"Full Name"}),i.jsx("input",{type:"text",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors",value:u,onChange:v=>d(v.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-400 mb-2 text-sm uppercase tracking-wider font-medium",children:"Email Address"}),i.jsx("input",{type:"email",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors",value:a,onChange:v=>o(v.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-400 mb-2 text-sm uppercase tracking-wider font-medium",children:"Password"}),i.jsx("input",{type:"password",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors",value:l,onChange:v=>c(v.target.value),required:!0})]}),i.jsxs("button",{type:"submit",disabled:n,className:"btn-gold2",children:[n&&i.jsx(G,{className:"animate-spin inline mr-2",size:16}),"Create Account"]}),i.jsxs("p",{className:"text-center text-gray-500 text-sm",children:["Already have an account?"," ",i.jsx("span",{className:"text-[#FFC92E] hover:text-[#FFE55C] cursor-pointer font-medium",onClick:()=>r("login"),children:"Login"})]})]}),i.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2",children:[i.jsx("div",{className:"h-px w-12 bg-gradient-to-r from-transparent to-[#FFC92E]/30"}),i.jsx("span",{className:"text-xs uppercase tracking-widest text-[#FFC92E]/50 font-medium",children:"Or"}),i.jsx("div",{className:"h-px w-12 bg-gradient-to-l from-transparent to-[#FFC92E]/30"})]}),i.jsx("div",{className:"mt-8 pt-6 border-t border-white/10",children:i.jsxs("button",{onClick:x,type:"button",className:"group w-full relative overflow-hidden bg-[#000] border border-[#333] hover:border-[#FFC92E]/50 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-center gap-3 transition-all duration-300 hover:shadow-[0_0_15px_rgba(255,201,46,0.15)]",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FFC92E]/0 via-[#FFC92E]/10 to-[#FFC92E]/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),i.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[i.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),i.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),i.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),i.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),i.jsx("span",{className:"text-gray-300 group-hover:text-white transition-colors",children:"Sign in with Google"})]})})]})})}async function ed(e){if(!e)return null;try{if(e.startsWith("http://")||e.startsWith("https://"))return e;const{data:t}=T.storage.from("avatars").getPublicUrl(e);return(t==null?void 0:t.publicUrl)||null}catch(t){return console.error("Error getting avatar URL:",t),null}}const fw="AIzaSyAVamyyQXuecYqP-WyQsVuNdi5mEwUnSGc";function pw(){return new Promise((e,t)=>{if(!navigator.geolocation){t(new Error("Geolocation not supported"));return}const r=setTimeout(()=>{t(new Error("Device location request timed out"))},1e4);navigator.geolocation.getCurrentPosition(n=>{clearTimeout(r),e({lat:n.coords.latitude,lng:n.coords.longitude,accuracy:n.coords.accuracy})},n=>{clearTimeout(r),t(n)},{enableHighAccuracy:!0,timeout:8e3,maximumAge:0})})}async function mw(){const e=[{name:"ipapi.co",url:"https://ipapi.co/json/",parse:t=>({lat:t.latitude,lng:t.longitude})},{name:"geolocation-db",url:"https://geolocation-db.com/json/",parse:t=>({lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)})}];for(const t of e)try{const r=await fetch(t.url,{headers:{Accept:"application/json"}});if(!r.ok)continue;const n=await r.json();if(n.latitude&&n.longitude)return t.parse(n)}catch{continue}throw new Error("IP geolocation failed")}async function gw(){console.log("[Geolocation] Starting location acquisition...");try{console.log("[Geolocation] Attempting device geolocation...");const e=await pw();return console.log(`[Geolocation] Device location: ${e.lat}, ${e.lng} (accuracy: ${e.accuracy.toFixed(0)}m)`),e}catch(e){console.warn("[Geolocation] Device location unavailable:",e.message),console.log("[Geolocation] Falling back to IP geolocation...");try{const t=await mw();return console.log(`[Geolocation] IP location: ${t.lat}, ${t.lng}`),t}catch{throw console.error("[Geolocation] All methods failed"),new Error("Unable to determine location. Please enable device location or check internet connection.")}}}async function xw(e,t){try{console.log("[ReverseGeocode] Converting coordinates to address...");const r=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${e},${t}&language=en&key=${fw}`);if(!r.ok)throw new Error(`Geocoding API error: ${r.status}`);const n=await r.json();if(n.status==="ZERO_RESULTS")return console.warn("[ReverseGeocode] No address found for coordinates"),{line1:`${e.toFixed(5)}, ${t.toFixed(5)}`,neighborhood:"",city:"Unknown",state:"Unknown",country:"Unknown",postal_code:""};if(!n.results||n.results.length===0)throw new Error("No geocoding results");const s=n.results.sort((l,c)=>{const u=d=>{var y;let h=0;const f=d.types||[],x=(y=d.geometry)==null?void 0:y.location_type;return x==="ROOFTOP"?h+=20:x==="RANGE_INTERPOLATED"?h+=10:x==="GEOMETRIC_CENTER"&&(h+=5),f.includes("subpremise")?h+=5:f.includes("premise")?h+=4:f.includes("street_address")?h+=3:f.includes("route")?h+=2:f.includes("intersection")&&(h+=1),h};return u(c)-u(l)})[0],a=l=>{const c=s.address_components.find(u=>l.some(d=>u.types.includes(d)));return(c==null?void 0:c.long_name)||(c==null?void 0:c.short_name)||""},o={line1:s.formatted_address.split(",")[0].trim(),neighborhood:a(["neighborhood","sublocality_level_1","sublocality"]),city:a(["locality","administrative_area_level_2","administrative_area_level_3"]),state:a(["administrative_area_level_1"]),country:a(["country"]),postal_code:a(["postal_code"])};return console.log("[ReverseGeocode] Address extracted:",o),o}catch(r){throw console.error("[ReverseGeocode] Error:",r),r}}async function vw(){try{console.log("[AddressTracking] Getting delivery address...");const e=await gw(),t=await xw(e.lat,e.lng),r={lat:e.lat,lng:e.lng,...t};return console.log("[AddressTracking] Delivery address obtained successfully"),r}catch(e){throw console.error("[AddressTracking] Failed:",e),e}}function yw(){var Er,F,U,z,Z,ue;const{user:e,signOut:t,loading:r}=lc(),n=he(),[s,a]=_.useState("orders"),[o,l]=_.useState([]),[c,u]=_.useState([]),[d,h]=_.useState(null),[f,x]=_.useState([]),[y,v]=_.useState(null),[b,m]=_.useState(!1),[p,g]=_.useState(!1),[w,S]=_.useState({display_name:"",email:""}),[k,j]=_.useState({line1:"",line2:"",neighborhood:"",city:"",state:"",country:"",postal_code:"",label:"Home"}),[N,P]=_.useState(!1);_.useEffect(()=>{!r&&!e&&n("/login"),e&&C()},[e,r,n]);const C=async()=>{var E;m(!0);try{const{data:B}=await T.from("user_profiles").select("*").eq("user_id",e.id).single();if(h(B),S({display_name:(B==null?void 0:B.display_name)||"",email:(e==null?void 0:e.email)||""}),B!=null&&B.avatar_url){const ut=await ed(B.avatar_url);v(ut)}else if((E=e==null?void 0:e.user_metadata)!=null&&E.avatar_url){const ut=await ed(e.user_metadata.avatar_url);v(ut)}const{data:K}=await T.from("addresses").select("*").eq("user_id",e.id);x(K||[]);const{data:ee}=await T.from("orders").select("*").eq("user_id",e.id).order("placed_at",{ascending:!1});if(ee&&ee.length>0){const ut=ee.map(Cs=>Cs.id),{data:Cr}=await T.from("order_items").select("*, products(name, product_images(url))").in("order_id",ut),up=ee.map(Cs=>({...Cs,order_items:(Cr==null?void 0:Cr.filter(dp=>dp.order_id===Cs.id))||[]}));l(up)}else l([]);const{data:Te}=await T.from("carts").select("id").eq("user_id",e.id).single();if(Te!=null&&Te.id){const{data:ut}=await T.from("cart_items").select("*, products ( name, price, product_images ( url ) )").eq("cart_id",Te.id);u(ut||[])}else u([])}catch(B){console.error("Error fetching data:",B),u([])}finally{m(!1)}},O=async()=>{await t(),n("/login")},W=()=>{S({display_name:(d==null?void 0:d.display_name)||"",email:(e==null?void 0:e.email)||""}),g(!0)},Se=async()=>{try{m(!0);const{error:E}=await T.from("user_profiles").update({display_name:w.display_name}).eq("user_id",e.id);if(E)throw E;console.log("[Profile] Profile updated successfully"),h({...d,display_name:w.display_name}),g(!1)}catch(E){console.error("[Profile] Error saving profile:",E)}finally{m(!1)}},V=async()=>{try{P(!0);const E=await vw();j({line1:E.line1,neighborhood:E.neighborhood,city:E.city,state:E.state,country:E.country,postal_code:E.postal_code,label:"Current Location"})}catch(E){const B=E.message;let K="Failed to get location.";B.includes("not supported")?K="Geolocation is not supported in your browser.":B.includes("permission denied")?K="Please enable location access in your browser settings and try again.":B.includes("timed out")?K="Location request timed out. Please ensure location services are enabled.":B.includes("internet")&&(K="Please check your internet connection and try again."),alert(K),console.error("[AddressTracking] Location error:",E)}finally{P(!1)}},ce=async()=>{try{m(!0);const E=[k.line1,k.neighborhood].filter(Boolean).join(", ");console.log("[Address] Saving address:",{...k,line1:E});const{data:B}=await T.from("addresses").select("id").eq("user_id",e.id).single(),K={user_id:e.id,label:k.label,line1:E,line2:k.line2,city:k.city,state:k.state,country:k.country,postal_code:k.postal_code};if(B){const{error:ee}=await T.from("addresses").update(K).eq("id",B.id);if(ee)throw ee}else{const{error:ee}=await T.from("addresses").insert(K);if(ee)throw ee}console.log("[Address] Address saved successfully"),await C(),g(!1)}catch(E){console.error("[Address] Error saving address:",E)}finally{m(!1)}},Sr=[{id:"orders",label:"Orders",icon:Eu,description:"Track your purchases"},{id:"cart",label:"Cart",icon:sn,description:"Items in your cart"},{id:"addresses",label:"Addresses",icon:sr,description:"Delivery locations"},{id:"payment",label:"Payment",icon:Af,description:"Cards & billing"},{id:"profile",label:"Profile",icon:Vn,description:"Personal info"}];return r||b&&!d&&!o.length?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black",children:i.jsxs("div",{className:"text-center",children:[i.jsx(G,{className:"animate-spin text-[#FFC92E] mx-auto mb-4",size:48}),i.jsx("p",{className:"text-gray-500",children:"Loading your dashboard..."})]})}):i.jsxs("div",{className:"min-h-screen bg-black text-white",children:[i.jsx("div",{className:"section py-12",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8 relative overflow-hidden rounded-2xl bg-gradient-to-r from-[#0B0B0B] via-[#111] to-[#0B0B0B] p-8 border border-[#FFC92E]/30 shadow-[0_0_30px_rgba(255,201,46,0.1)]",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FEFDFE] via-[#FFC92E] to-[#DE9D0D] opacity-5"}),i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#FFC92E] rounded-full blur-[80px] opacity-10"}),i.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-2 bg-[#FFC92E]/10 rounded-full border border-[#FFC92E]/20",children:i.jsx(Eu,{className:"text-[#FFC92E]",size:28,strokeWidth:1.5})}),i.jsx("h1",{className:"text-4xl font-serif font-bold bg-gradient-to-r from-[#FEFDFE] via-[#FFC92E] to-[#DE9D0D] bg-clip-text text-transparent drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)]",children:"Welcome Back"})]}),i.jsx("p",{className:"text-gray-400 text-lg",children:(d==null?void 0:d.display_name)||((Er=e==null?void 0:e.user_metadata)==null?void 0:Er.full_name)||"Valued Customer"})]}),i.jsxs("div",{className:"flex items-center gap-8 bg-white/5 px-6 py-3 rounded-xl border border-white/5",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-1 font-bold",children:"Total Orders"}),i.jsx("p",{className:"text-2xl font-bold bg-gradient-to-b from-[#FFC92E] to-[#DE9D0D] bg-clip-text text-transparent",children:o.length})]}),i.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-1 font-bold",children:"Member Tier"}),i.jsxs("p",{className:"text-lg font-semibold text-white flex items-center gap-1 justify-end",children:[i.jsx(Vn,{size:14,className:"fill-[#FFC92E] text-[#FFC92E]"}),"Gold"]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[i.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] p-6 border border-[#FFC92E]/20 shadow-xl group",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#FFC92E]/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FEFDFE] via-[#FFC92E] to-[#DE9D0D] rounded-full blur opacity-40 group-hover:opacity-60 transition-opacity duration-500"}),i.jsx("div",{className:"relative w-24 h-24 rounded-full p-[2px] bg-gradient-to-r from-[#FEFDFE] via-[#FFC92E] to-[#DE9D0D]",children:i.jsx("div",{className:"w-full h-full rounded-full bg-[#0B0B0B] flex items-center justify-center overflow-hidden",children:y?i.jsx("img",{src:y,alt:"Profile",className:"w-full h-full object-cover"}):i.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D] bg-clip-text text-transparent",children:(((F=d==null?void 0:d.display_name)==null?void 0:F[0])||((U=e==null?void 0:e.email)==null?void 0:U[0])||"U").toUpperCase()})})}),i.jsx("div",{className:"absolute bottom-0 right-0 bg-[#0B0B0B] rounded-full p-1 border border-[#FFC92E]",children:i.jsx("div",{className:"w-3 h-3 bg-[#00FF00] rounded-full animate-pulse"})})]}),i.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:(d==null?void 0:d.display_name)||((z=e==null?void 0:e.user_metadata)==null?void 0:z.full_name)||"Valued Customer"}),i.jsx("p",{className:"text-xs text-gray-500 mb-6 font-mono",children:e==null?void 0:e.email}),i.jsx("button",{onClick:W,className:"w-full py-2 rounded-lg bg-[#FFC92E]/10 border border-[#FFC92E]/30 text-[#FFC92E] text-xs font-bold uppercase tracking-widest hover:bg-[#FFC92E] hover:text-black transition-all duration-300",children:"Edit Profile"})]})]}),i.jsxs("div",{className:"rounded-2xl overflow-hidden border border-white/5 bg-[#0F0F0F] shadow-lg",children:[Sr.map(E=>i.jsxs("button",{onClick:()=>a(E.id),className:`w-full flex items-center gap-4 p-5 transition-all duration-300 text-left border-b border-white/5 last:border-b-0 group relative overflow-hidden
                                            ${s===E.id?"bg-white/5":"hover:bg-white/5"}`,children:[s===E.id&&i.jsx("div",{className:"absolute inset-y-0 left-0 w-1 bg-gradient-to-b from-[#FFC92E] to-[#DE9D0D]"}),i.jsx("div",{className:`relative z-10 p-2 rounded-lg transition-all duration-300 ${s===E.id?"bg-gradient-to-br from-[#FFC92E] to-[#DE9D0D] text-black shadow-[0_0_15px_rgba(255,201,46,0.3)]":"bg-white/5 text-gray-400 group-hover:text-[#FFC92E] group-hover:bg-[#FFC92E]/10"}`,children:i.jsx(E.icon,{size:18,strokeWidth:s===E.id?2.5:2})}),i.jsxs("div",{className:"flex-1 relative z-10",children:[i.jsx("div",{className:`text-sm font-bold tracking-wide transition-colors ${s===E.id?"text-white":"text-gray-400 group-hover:text-white"}`,children:E.label}),i.jsx("div",{className:`text-[10px] uppercase tracking-wider ${s===E.id?"text-[#FFC92E]":"text-gray-600"}`,children:E.description})]}),i.jsx(oa,{size:16,className:`relative z-10 transition-all duration-300 ${s===E.id?"text-[#FFC92E] translate-x-0":"text-gray-600 -translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0"}`})]},E.id)),i.jsxs("button",{onClick:O,className:"w-full flex items-center gap-4 p-5 text-gray-500 hover:text-red-400 transition-all text-left group relative overflow-hidden hover:bg-red-500/5",children:[i.jsx("div",{className:"p-2 rounded-lg bg-white/5 group-hover:bg-red-500/10 transition-all",children:i.jsx(Tf,{size:18,strokeWidth:2})}),i.jsx("span",{className:"font-medium text-sm tracking-wide",children:"Sign Out"})]})]})]}),i.jsxs("div",{className:"lg:col-span-3",children:[i.jsx("div",{className:"mb-6 flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h2",{className:"text-2xl font-serif font-bold text-white",children:(Z=Sr.find(E=>E.id===s))==null?void 0:Z.label}),i.jsx("div",{className:"h-px w-12 bg-[#FFC92E]/30"})]})}),s==="orders"&&i.jsx("div",{className:"space-y-6",children:o.length===0?i.jsx("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] p-16 text-center border border-dashed border-[#FFC92E]/20",children:i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-20 h-20 bg-[#FFC92E]/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-[#FFC92E]/20",children:i.jsx(sn,{size:32,className:"text-[#FFC92E]",strokeWidth:1.5})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"No orders placed yet"}),i.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Start your collection of premium products today."}),i.jsxs("button",{onClick:()=>n("/shop"),className:"inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D] text-black font-bold rounded-lg hover:shadow-[0_0_20px_rgba(255,201,46,0.3)] transition-all transform hover:-translate-y-0.5",children:[i.jsx(sr,{size:18}),"Explore Shop"]})]})}):o.map(E=>{var B;return i.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] border border-white/5 shadow-lg hover:border-[#FFC92E]/30 transition-all duration-300 group",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FFC92E]/0 via-[#FFC92E]/5 to-[#FFC92E]/0 opacity-0 group-hover:opacity-100 transition-opacity"}),i.jsx("div",{className:"relative z-10 p-6 border-b border-white/5 bg-white/[0.02]",children:i.jsxs("div",{className:"flex flex-wrap gap-6 justify-between items-center",children:[i.jsxs("div",{className:"flex gap-8",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-1 font-bold",children:"Order ID"}),i.jsxs("p",{className:"font-mono text-white text-sm",children:["#",E.id.slice(0,8).toUpperCase()]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-1 font-bold",children:"Date"}),i.jsx("p",{className:"text-gray-300 text-sm",children:new Date(E.placed_at).toLocaleDateString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-1 font-bold",children:"Total"}),i.jsxs("p",{className:"text-lg font-bold text-[#FFC92E]",children:["$",E.total_amount.toLocaleString()]})]})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsx("span",{className:"px-3 py-1 rounded border border-[#FFC92E]/30 text-[10px] font-bold uppercase tracking-widest text-[#FFC92E] bg-[#FFC92E]/10",children:E.status})})]})}),i.jsx("div",{className:"relative z-10 p-6 space-y-4",children:(B=E.order_items)==null?void 0:B.map(K=>{var ee,Te,ut,Cr;return i.jsxs("div",{className:"flex gap-4 items-center p-3 rounded-lg hover:bg-white/5 transition-colors border border-transparent hover:border-white/5",children:[i.jsx("div",{className:"w-16 h-16 bg-white/5 rounded overflow-hidden flex-shrink-0 border border-white/10",children:((ut=(Te=(ee=K.products)==null?void 0:ee.product_images)==null?void 0:Te[0])==null?void 0:ut.url)&&i.jsx("img",{src:K.products.product_images[0].url,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",alt:""})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-white font-medium mb-1",children:(Cr=K.products)==null?void 0:Cr.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",K.quantity,"  $",K.unit_price]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("p",{className:"font-bold text-white",children:["$",(K.quantity*K.unit_price).toLocaleString()]})})]},K.id)})})]},E.id)})}),s==="cart"&&i.jsx("div",{className:"space-y-6",children:c.length===0?i.jsx("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] p-16 text-center border border-dashed border-[#FFC92E]/20",children:i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-20 h-20 bg-[#FFC92E]/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-[#FFC92E]/20",children:i.jsx(St,{size:32,className:"text-[#FFC92E]",strokeWidth:1.5})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"Your cart is empty"}),i.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Add items to your cart to get started."}),i.jsxs("button",{onClick:()=>n("/shop"),className:"inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D] text-black font-bold rounded-lg hover:shadow-[0_0_20px_rgba(255,201,46,0.3)] transition-all transform hover:-translate-y-0.5",children:[i.jsx(sr,{size:18}),"Start Shopping"]})]})}):i.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] border border-white/5 shadow-lg group",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FFC92E]/0 via-[#FFC92E]/5 to-[#FFC92E]/0 opacity-0 group-hover:opacity-100 transition-opacity"}),i.jsx("div",{className:"relative z-10 p-6 border-b border-white/5 bg-white/[0.02]",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-bold text-white",children:"Cart Preview"}),i.jsxs("span",{className:"px-3 py-1 rounded bg-[#FFC92E]/10 border border-[#FFC92E]/30 text-[#FFC92E] text-sm font-bold",children:[c.length," item",c.length!==1?"s":""]})]})}),i.jsx("div",{className:"relative z-10 p-6 space-y-4",children:c.map(E=>{var B,K,ee,Te;return i.jsxs("div",{className:"flex gap-4 items-center p-3 rounded-lg hover:bg-white/5 transition-colors border border-transparent hover:border-white/5",children:[i.jsx("div",{className:"w-16 h-16 bg-white/5 rounded overflow-hidden flex-shrink-0 border border-white/10",children:((ee=(K=(B=E.products)==null?void 0:B.product_images)==null?void 0:K[0])==null?void 0:ee.url)&&i.jsx("img",{src:E.products.product_images[0].url,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",alt:""})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-white font-medium mb-1",children:(Te=E.products)==null?void 0:Te.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",E.quantity,"  $",parseFloat(E.price_at_time).toFixed(2)]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("p",{className:"font-bold text-white",children:["$",(E.quantity*parseFloat(E.price_at_time)).toLocaleString(void 0,{maximumFractionDigits:2})]})})]},E.id)})}),i.jsxs("div",{className:"relative z-10 p-6 border-t border-white/5 bg-white/[0.01]",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("p",{className:"text-gray-400",children:"Subtotal"}),i.jsxs("p",{className:"text-white font-bold",children:["$",c.reduce((E,B)=>E+B.quantity*parseFloat(B.price_at_time),0).toLocaleString(void 0,{maximumFractionDigits:2})]})]}),i.jsxs("button",{onClick:()=>n("/cart"),className:"w-full py-3 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D] text-black font-bold rounded-lg hover:shadow-[0_0_20px_rgba(255,201,46,0.3)] transition-all flex items-center justify-center gap-2",children:[i.jsx(sn,{size:18}),"View Full Cart"]})]})]})}),s==="addresses"&&i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] p-8 border border-[#FFC92E]/20 shadow-lg",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#FFC92E] rounded-full blur-[100px] opacity-5"}),i.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[i.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2 mb-8",children:[i.jsx(ur,{size:24,className:"text-[#FFC92E]"}),"Delivery Addresses"]}),f.length>0&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-10",children:f.map(E=>i.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:border-[#FFC92E]/30 transition-all group relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx("div",{className:"w-2 h-2 rounded-full bg-[#FFC92E] shadow-[0_0_10px_#FFC92E]"})}),i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("p",{className:"font-bold text-white text-base",children:E.label}),i.jsx("span",{className:"p-1 rounded-full bg-[#FFC92E]/10 text-[#FFC92E]",children:i.jsx(ur,{size:12})})]}),i.jsxs("div",{className:"space-y-1 text-sm text-gray-400",children:[i.jsx("p",{className:"text-gray-300 font-medium",children:E.line1}),E.line2&&i.jsx("p",{children:E.line2}),i.jsxs("p",{children:[E.city,", ",E.state," ",E.postal_code]}),i.jsx("p",{children:E.country})]})]},E.id))}),i.jsxs("div",{className:"bg-white/[0.02] rounded-xl p-6 border border-white/5",children:[i.jsxs("h4",{className:"text-lg font-bold text-white mb-6 flex items-center gap-2",children:[i.jsx(sr,{size:16,className:"text-[#FFC92E]"}),"Add / Update Address"]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Address Label"}),i.jsx("input",{type:"text",value:k.label,onChange:E=>j({...k,label:E.target.value}),placeholder:"e.g., Home, Work",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Address Line 1"}),i.jsx("input",{type:"text",value:k.line1,onChange:E=>j({...k,line1:E.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Neighborhood/Region (Added to Line 1)"}),i.jsx("input",{type:"text",value:k.neighborhood,onChange:E=>j({...k,neighborhood:E.target.value}),placeholder:"e.g., Shonibare Estate",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Address Line 2 (Optional)"}),i.jsx("input",{type:"text",value:k.line2,onChange:E=>j({...k,line2:E.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"City"}),i.jsx("input",{type:"text",value:k.city,onChange:E=>j({...k,city:E.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"State/Province"}),i.jsx("input",{type:"text",value:k.state,onChange:E=>j({...k,state:E.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Country"}),i.jsx("input",{type:"text",value:k.country,onChange:E=>j({...k,country:E.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Postal Code"}),i.jsx("input",{type:"text",value:k.postal_code,onChange:E=>j({...k,postal_code:E.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]})]}),i.jsx("button",{onClick:V,disabled:N,className:"w-full py-3 bg-white/5 border border-white/10 hover:border-[#FFC92E]/50 text-white font-bold rounded-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50",title:"Uses device GPS for accuracy, falls back to IP geolocation",children:N?i.jsxs(i.Fragment,{children:[i.jsx(G,{size:18,className:"animate-spin"}),"Getting Location..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ur,{size:18}),"Use Current Location"]})}),i.jsx("button",{onClick:ce,disabled:b,className:"w-full py-4 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D] text-black font-bold rounded-lg hover:shadow-[0_0_20px_rgba(255,201,46,0.2)] transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:b?i.jsxs(i.Fragment,{children:[i.jsx(G,{size:18,className:"animate-spin"}),"Saving Address..."]}):i.jsxs(i.Fragment,{children:[i.jsx(sr,{size:18}),"Save Address"]})})]})]})]})]})}),s==="profile"&&i.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] p-8 border border-[#FFC92E]/20 shadow-lg",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#FFC92E] rounded-full blur-[100px] opacity-5"}),i.jsxs("form",{className:"relative z-10 space-y-6 max-w-2xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Full Name"}),i.jsx("input",{type:"text",defaultValue:(d==null?void 0:d.display_name)||((ue=e==null?void 0:e.user_metadata)==null?void 0:ue.full_name),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Phone"}),i.jsx("input",{type:"tel",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Email"}),i.jsx("input",{disabled:!0,value:e==null?void 0:e.email,className:"w-full bg-black/20 border border-white/5 rounded-lg p-3 text-gray-500 cursor-not-allowed"})]}),i.jsxs("button",{type:"button",className:"px-8 py-3 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D] text-black font-bold rounded-lg hover:shadow-[0_0_20px_rgba(255,201,46,0.2)] transition-all flex items-center gap-2",children:[i.jsx(sr,{size:18}),"Save Changes"]})]})]})]})]})]})}),p&&i.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-[#0F0F0F] border border-[#FFC92E]/30 shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 p-6 border-b border-white/5 bg-gradient-to-r from-[#0B0B0B] via-[#111] to-[#0B0B0B] flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Edit Profile & Addresses"}),i.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:i.jsx(et,{size:24,className:"text-white"})})]}),i.jsxs("div",{className:"p-6 space-y-8",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.jsx(Vn,{size:20,className:"text-[#FFC92E]"}),"Personal Information"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Full Name"}),i.jsx("input",{type:"text",value:w.display_name,onChange:E=>S({...w,display_name:E.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Email"}),i.jsx("input",{type:"email",disabled:!0,value:w.email,className:"w-full bg-black/20 border border-white/5 rounded-lg p-3 text-gray-500 cursor-not-allowed"})]})]})]}),i.jsxs("div",{className:"space-y-4 border-t border-white/5 pt-8",children:[i.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.jsx(ur,{size:20,className:"text-[#FFC92E]"}),"Delivery Addresses"]}),f.length>0&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Your saved addresses:"}),f.map(E=>i.jsxs("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[i.jsx("p",{className:"font-semibold text-white text-sm mb-1",children:E.label}),i.jsx("p",{className:"text-xs text-gray-400",children:E.line1}),E.neighborhood&&i.jsx("p",{className:"text-xs text-gray-400",children:E.neighborhood}),E.line2&&i.jsx("p",{className:"text-xs text-gray-400",children:E.line2}),i.jsxs("p",{className:"text-xs text-gray-400",children:[E.city,", ",E.state," ",E.postal_code]})]},E.id))]}),i.jsxs("div",{className:"space-y-4 mt-6 p-4 rounded-lg bg-white/[0.02] border border-white/5",children:[i.jsx("h4",{className:"text-sm font-bold text-white",children:"Add New Address"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Address Label"}),i.jsx("input",{type:"text",value:k.label,onChange:E=>j({...k,label:E.target.value}),placeholder:"e.g., Home, Work, Apartment",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Address Line 1"}),i.jsx("input",{type:"text",value:k.line1,onChange:E=>j({...k,line1:E.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Neighborhood/Region"}),i.jsx("input",{type:"text",value:k.neighborhood,onChange:E=>j({...k,neighborhood:E.target.value}),placeholder:"e.g., Shonibare Estate, Maryland",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Address Line 2 (Optional)"}),i.jsx("input",{type:"text",value:k.line2,onChange:E=>j({...k,line2:E.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"City"}),i.jsx("input",{type:"text",value:k.city,onChange:E=>j({...k,city:E.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"State/Province"}),i.jsx("input",{type:"text",value:k.state,onChange:E=>j({...k,state:E.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Country"}),i.jsx("input",{type:"text",value:k.country,onChange:E=>j({...k,country:E.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-500 mb-2 text-[10px] uppercase tracking-widest font-bold",children:"Postal Code"}),i.jsx("input",{type:"text",value:k.postal_code,onChange:E=>j({...k,postal_code:E.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white outline-none focus:border-[#FFC92E]/50 transition-colors"})]})]}),i.jsx("button",{onClick:V,disabled:N,className:"w-full py-3 bg-white/5 border border-white/10 hover:border-[#FFC92E]/50 text-white font-bold rounded-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50",title:"Uses device GPS for accuracy, falls back to IP geolocation",children:N?i.jsxs(i.Fragment,{children:[i.jsx(G,{size:18,className:"animate-spin"}),"Getting Location..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ur,{size:18}),"Use Current Location"]})})]})]})]}),i.jsxs("div",{className:"sticky bottom-0 p-6 border-t border-white/5 bg-gradient-to-r from-[#0B0B0B] via-[#111] to-[#0B0B0B] flex gap-4",children:[i.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-3 bg-white/5 border border-white/10 text-white font-bold rounded-lg hover:bg-white/10 transition-all",children:"Cancel"}),i.jsx("button",{onClick:()=>{Se(),ce()},disabled:b,className:"flex-1 py-3 bg-gradient-to-r from-[#FFC92E] to-[#DE9D0D] text-black font-bold rounded-lg hover:shadow-[0_0_20px_rgba(255,201,46,0.3)] transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:b?i.jsxs(i.Fragment,{children:[i.jsx(G,{size:18,className:"animate-spin"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(sr,{size:18}),"Save Changes"]})})]})]})})]})}function ww({products:e,onProductClick:t}){const r=_.useRef(null),[n,s]=_.useState(0),[a,o]=_.useState(!1),l=300,c=24,u=3e3;_.useEffect(()=>{if(a)return;const f=setInterval(()=>{const x=(n+1)%e.length;d(x)},u);return()=>clearInterval(f)},[n,a,e.length]);const d=f=>{r.current&&(r.current.scrollTo({left:f*(l+c),behavior:"smooth"}),s(f))},h=()=>{if(!r.current)return;const f=r.current.scrollLeft,x=Math.round(f/(l+c));s(x)};return i.jsxs("div",{className:"relative w-full py-12 overflow-hidden",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[i.jsx("div",{ref:r,onScroll:h,className:`\r
          flex gap-6 px-12 overflow-x-auto\r
          scroll-smooth\r
          snap-x snap-mandatory\r
          overflow-y-hidden\r
        `,style:{minHeight:"500px",msOverflowStyle:"none",scrollbarWidth:"none"},children:e.map((f,x)=>{const y=x===n;return i.jsx("div",{className:`
                snap-center shrink-0 transition-all duration-500
                ${y?"scale-100 opacity-100":"scale-90 opacity-50"}
              `,style:{width:l,minHeight:"420px",display:"flex",alignItems:"center"},children:i.jsx("div",{className:"glass-border shadow-2xl w-full",style:{height:"450px"},children:i.jsx(np,{product:f,onProductClick:t})})},f.id)})}),i.jsx("div",{className:"flex justify-center gap-2 mt-6",children:e.map((f,x)=>i.jsx("button",{onClick:()=>d(x),className:`rounded-full transition-all duration-300 ${x===n?"w-3 h-3 bg-[#D4AF37]":"w-2 h-2 bg-white/30 hover:bg-white/50"}`},x))})]})}const bw=({texts:e,speed:t=18,pause:r=1300})=>{const[n,s]=_.useState(0),[a,o]=_.useState(""),[l,c]=_.useState(!1);return _.useEffect(()=>{let u=!0,d;const h=e[n%e.length],f=()=>{u&&(o(x=>l?h.substring(0,x.length-1):h.substring(0,x.length+1)),!l&&a===h?d=window.setTimeout(()=>c(!0),r):l&&a===""?(c(!1),s(x=>x+1)):d=window.setTimeout(f,l?t/2:t))};return d=window.setTimeout(f,t),()=>{u=!1,clearTimeout(d)}},[a,l,n,e,t,r]),i.jsxs("span",{className:"typing-text",children:[a,i.jsx("span",{className:"typing-caret","aria-hidden":!0,children:""})]})},Ga=({children:e,className:t=""})=>{const r=_.useRef(null);return _.useEffect(()=>{const n=r.current;if(!n||!("IntersectionObserver"in window)){n==null||n.classList.add("in-view");return}const s=new IntersectionObserver(a=>{a.forEach(o=>{o.isIntersecting&&(o.target.classList.add("in-view"),s.unobserve(o.target))})},{threshold:.15});return s.observe(n),()=>s.disconnect()},[]),i.jsx("div",{ref:r,className:`reveal ${t}`,children:e})};function _w({onNavigate:e}){var o,l;const t=he(),[r,n]=_.useState([]),[s,a]=_.useState(!0);return _.useEffect(()=>{(async()=>{try{const{data:u,error:d}=await T.from("products").select(`
            *,
            product_images (url, alt_text, position),
            product_categories (
              categories (name)
            )
          `).eq("published",!0).order("created_at",{ascending:!1}).limit(8);if(d)throw d;u&&n(u.map(h=>{var f,x,y,v,b,m;return{id:h.id,name:h.name,brand:h.brand,short_description:h.short_description,image:((x=(f=h.product_images)==null?void 0:f.sort((p,g)=>(p.position||0)-(g.position||0))[0])==null?void 0:x.url)||null,product_images:((y=h.product_images)==null?void 0:y.sort((p,g)=>(p.position||0)-(g.position||0)))||[],category:((m=(b=(v=h.product_categories)==null?void 0:v[0])==null?void 0:b.categories)==null?void 0:m.name)||"Uncategorized"}}))}catch(u){console.error("Error loading featured products:",u)}finally{a(!1)}})()},[]),i.jsxs("div",{children:[i.jsx("main",{className:"flex items-center justify-center w-full py-12 lg:py-20 px-6 lg:px-10",children:i.jsx("div",{className:"w-full max-w-[1280px]",children:i.jsxs("div",{className:"flex flex-col-reverse lg:flex-row items-center gap-16 lg:gap-32",children:[i.jsxs("div",{className:"flex flex-col gap-8 flex-1 lg:max-w-[50%]",children:[i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"h-px w-8 bg-[#d4af37]"}),i.jsx("span",{className:"text-[#d4af37] text-xs font-bold uppercase tracking-widest",children:"Est. 2024"})]}),i.jsx("h1",{className:"text-slate-900 text-5xl sm:text-6xl lg:text-7xl font-extrabold leading-[1.1]",style:{fontFamily:"'Oswald', sans-serif",textShadow:"0 0 6px rgba(236,211,141,0.03), 0 0 14px rgba(231,227,214,0.36)"},children:i.jsx(bw,{texts:["Collect the Exceptional.","Embrace Luxury.","Redefine Excellence."]})}),i.jsx("p",{className:"text-lg sm:text-xl text-slate-600 max-w-[540px]",children:"Discover a curated selection of artifacts designed for the few, not the many. Elevate your everyday with unparalleled craftsmanship."})]}),i.jsxs("div",{className:"flex flex-wrap gap-4 pt-4",children:[i.jsx("button",{onClick:()=>t("/shop"),className:"group relative h-14 px-8 min-w-[180px] rounded-lg bg-gradient-to-r from-[#BF953F] via-[#FCF6BA] to-[#B38728] text-white font-bold uppercase shadow-lg transition active:scale-95",children:"Shop Collection"}),i.jsx("button",{onClick:()=>t("/shop"),className:"h-14 px-8 min-w-[180px] rounded-lg border border-slate-200 font-bold uppercase hover:bg-slate-50",children:"Explore More"}),i.jsx("button",{onClick:()=>t("/vendor/dashboard"),className:"h-14 px-8 min-w-[180px] rounded-lg bg-slate-900 text-white font-bold uppercase border border-slate-700 hover:bg-slate-800",children:"Vendor Portal"})]}),i.jsxs("div",{className:"flex items-center gap-8 pt-8 border-t border-slate-100",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-2xl font-bold",children:[r.length,"+"]}),i.jsx("p",{className:"text-sm text-slate-500",children:"Exclusive Items"})]}),i.jsx("div",{className:"w-px h-10 bg-slate-200"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:"Global"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Shipping Available"})]})]})]}),i.jsx("div",{className:"relative w-full lg:flex-1 aspect-square max-h-[700px]",children:i.jsxs("div",{className:"absolute inset-0 rounded-2xl overflow-hidden bg-slate-100 shadow-2xl",children:[(o=r[0])!=null&&o.image?i.jsx("img",{src:r[0].image,alt:r[0].name,className:"w-full h-full object-cover transition-transform duration-700 hover:scale-105"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:"Premium Collection"}),i.jsxs("div",{className:"absolute bottom-6 left-6 right-6 bg-white/95 backdrop-blur p-5 rounded-xl flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs uppercase tracking-wider text-slate-500 font-bold",children:"Featured Collection"}),i.jsx("p",{className:"font-bold text-lg",children:((l=r[0])==null?void 0:l.name)||"Luxury Items"})]}),i.jsx("button",{onClick:()=>{var c;return e("product",(c=r[0])==null?void 0:c.id)},className:"size-10 rounded-full bg-black text-white flex items-center justify-center",children:i.jsx(oa,{size:20})})]})]})})]})})}),i.jsxs("section",{className:"section",children:[i.jsxs("div",{className:"flex justify-between items-end mb-12",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-serif text-[#D4AF37] mb-4",children:"Featured Collection"}),i.jsx("p",{className:"text-muted max-w-xl",children:"Curated selection of our most exclusive pieces."})]}),i.jsx("button",{onClick:()=>e("shop"),className:"link-gold",children:"View All "})]}),!s&&i.jsx(ww,{products:r,onProductClick:c=>e("product",c)})]}),i.jsx("section",{className:"features-section",children:i.jsxs("div",{className:"container grid grid-cols-3 gap-12",children:[i.jsxs(Ga,{className:"feature-item",children:[i.jsx(Vn,{size:32}),i.jsx("h4",{children:"Premium Quality"}),i.jsx("p",{children:"Only the finest materials"})]}),i.jsxs(Ga,{className:"feature-item",children:[i.jsx(Of,{size:32}),i.jsx("h4",{children:"Authenticity Guaranteed"}),i.jsx("p",{children:"Verified & certified"})]}),i.jsxs(Ga,{className:"feature-item",children:[i.jsx($f,{size:32}),i.jsx("h4",{children:"White Glove Delivery"}),i.jsx("p",{children:"Luxury shipping worldwide"})]})]})})]})}const ap=_.createContext({currentSeason:"none",showGreeting:!1,dismissGreeting:()=>{}});function jw({children:e}){const[t,r]=_.useState("none"),[n,s]=_.useState(!1);_.useEffect(()=>{const l=new Date().getMonth();let c="none";if(l===11?c="winter":l===1&&(c="valentine"),r(c),c!=="none"){const u=localStorage.getItem("lastGreetingDate"),d=new Date().toDateString();u!==d&&s(!0)}},[]);const a=()=>{s(!1);const o=new Date().toDateString();localStorage.setItem("lastGreetingDate",o)};return i.jsx(ap.Provider,{value:{currentSeason:t,showGreeting:n,dismissGreeting:a},children:e})}const op=()=>_.useContext(ap);function kw(){const[e,t]=_.useState([]);_.useEffect(()=>{let n=new Date().toISOString();const s=T.channel("public:global_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"global_notifications"},o=>{console.log("Realtime notification received:",o);const l=o.new;l.created_at>n&&(n=l.created_at),t(c=>c.some(u=>u.id===l.id)?c:[l,...c].slice(0,3)),setTimeout(()=>{t(c=>c.filter(u=>u.id!==l.id))},8e3)}).subscribe(),a=setInterval(async()=>{const{data:o}=await T.from("global_notifications").select("*").gt("created_at",n).order("created_at",{ascending:!0});o&&o.length>0&&(console.log("Polled new notifications:",o),n=o[o.length-1].created_at,o.forEach(l=>{t(c=>c.some(u=>u.id===l.id)?c:[l,...c].slice(0,3)),setTimeout(()=>{t(c=>c.filter(u=>u.id!==l.id))},8e3)}))},3e3);return()=>{clearInterval(a),T.removeChannel(s)}},[]);const r=n=>{t(s=>s.filter(a=>a.id!==n))};return console.log("GlobalNotifications rendering with:",e.length,"notifications"),e.length===0?null:i.jsx("div",{className:"fixed bottom-5 left-5 z-50 flex flex-col gap-3 max-w-sm w-full pointer-events-none",style:{zIndex:9999},children:e.map((n,s)=>i.jsx("div",{className:"pointer-events-auto bg-[#0A0A0A]/90 backdrop-blur-md border border-(--gold-primary)/30 p-4 rounded-lg shadow-2xl transform transition-all duration-500 ease-out animate-in slide-in-from-left-full",style:{animationDelay:`${s*100}ms`},children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 bg-(--gold-primary)/10 rounded-full shrink-0",children:i.jsx(sn,{size:18,className:"text-(--gold-primary)"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-white/90 text-sm leading-relaxed font-light",children:n.message}),i.jsx("span",{className:"text-[10px] text-white/40 mt-1 block",children:"Just now"})]}),i.jsx("button",{onClick:()=>r(n.id),className:"text-white/40 hover:text-white transition-colors shrink-0",children:i.jsx(et,{size:14})})]})},n.id))})}function Nw(){const{currentSeason:e}=op();if(e==="none")return null;const r=(n=>Array.from({length:n},(s,a)=>({id:a,left:Math.random()*100,animationDelay:Math.random()*5})))(20);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"seasonal-overlay",children:[e==="winter"&&i.jsx(i.Fragment,{children:r.map(n=>i.jsx("div",{className:"snowflake",style:{left:`${n.left}%`,animationDelay:`${n.animationDelay}s`},children:""},n.id))}),e==="valentine"&&i.jsx(i.Fragment,{children:r.map(n=>i.jsx("div",{className:"heart",style:{left:`${n.left}%`,animationDelay:`${n.animationDelay}s`},children:""},n.id))})]}),i.jsx("div",{className:"seasonal-banner",children:i.jsx("div",{className:`corner-ribbon ${e==="valentine"?"valentine":""}`,children:e==="winter"?"Season's Greetings":"Happy Valentine's"})})]})}function Sw(){const{currentSeason:e,showGreeting:t,dismissGreeting:r}=op();if(!t||e==="none")return null;const s={winter:{icon:"",title:"Happy Holidays!",message:"Wishing you a wonderful holiday season filled with joy and warmth."},valentine:{icon:"",title:"Happy Valentine's!",message:"Spread love and kindness this Valentine's Day."}}[e],a=o=>{o.target===o.currentTarget&&r()};return i.jsx("div",{className:"greeting-modal-backdrop",onClick:a,children:i.jsx("div",{className:"greeting-modal",children:i.jsxs("div",{className:"greeting-modal-content",children:[i.jsx("div",{className:"greeting-modal-icon",children:s.icon}),i.jsx("h2",{className:"greeting-modal-title",children:s.title}),i.jsx("p",{className:"greeting-modal-message",children:s.message}),i.jsx("button",{className:"greeting-modal-close",onClick:r,children:"Continue Shopping"})]})})})}function Es(){const[e,t]=_.useState(null),[r,n]=_.useState(!0),[s,a]=_.useState(null),[o,l]=_.useState(!1),c=async()=>{try{n(!0),a(null);const{data:{user:u},error:d}=await T.auth.getUser();if(d)throw d;if(!u){t(null),l(!1);return}const{data:h,error:f}=await T.from("vendors").select("*").eq("user_id",u.id).single();if(f)if(f.code==="PGRST116")t(null),l(!1);else throw f;else t(h),l(!0)}catch(u){console.error("Error fetching vendor:",u),a(u instanceof Error?u.message:"Failed to fetch vendor data"),l(!1)}finally{n(!1)}};return _.useEffect(()=>{c()},[]),{vendor:e,loading:r,error:s,isVendor:o,refetch:c}}function Ew({children:e}){const t=he(),{vendor:r}=Es(),n=async()=>{await T.auth.signOut(),t("/")},s=[{to:"/vendor/dashboard",icon:ix,label:"Dashboard"},{to:"/vendor/products",icon:St,label:"Products"},{to:"/vendor/orders",icon:fs,label:"Orders"},{to:"/vendor/profile",icon:ic,label:"Profile"}];return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white border-b border-gray-200",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{onClick:()=>t("/"),className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 transition",children:[i.jsx(rc,{size:20}),i.jsx("span",{className:"hidden sm:inline",children:"Back to Store"})]}),i.jsx("div",{className:"h-6 w-px bg-gray-300"}),i.jsx("h1",{className:"text-xl font-bold text-gray-900",children:(r==null?void 0:r.business_name)||"Vendor Portal"})]}),i.jsxs("button",{onClick:n,className:"inline-flex items-center gap-2 px-4 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition",children:[i.jsx(Tf,{size:18}),i.jsx("span",{className:"hidden sm:inline",children:"Sign Out"})]})]})})}),i.jsx("div",{className:"bg-white border-b border-gray-200",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4",children:i.jsx("nav",{className:"flex gap-1 overflow-x-auto",children:s.map(a=>i.jsxs(B0,{to:a.to,className:({isActive:o})=>`inline-flex items-center gap-2 px-4 py-3 border-b-2 font-medium transition whitespace-nowrap ${o?"border-[#D4AF37] text-[#D4AF37]":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:[i.jsx(a.icon,{size:18}),a.label]},a.to))})})}),i.jsx("main",{className:"max-w-7xl mx-auto",children:e}),i.jsx("footer",{className:"bg-white border-t border-gray-200 mt-12",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:i.jsxs("p",{className:"text-center text-sm text-gray-600",children:[" ",new Date().getFullYear()," ",(r==null?void 0:r.business_name)||"My Superstore",". All rights reserved."]})})})]})}function Cw(){const e=he(),{vendor:t,loading:r,isVendor:n}=Es(),[s,a]=_.useState({totalProducts:0,publishedProducts:0,pendingOrders:0,totalRevenue:0,totalViews:0}),[o,l]=_.useState(!0);_.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(t)try{l(!0);const{data:u,error:d}=await T.from("products").select("id, published, view_count").eq("seller_id",t.id);if(d)throw d;const h=(u==null?void 0:u.length)||0,f=(u==null?void 0:u.filter(p=>p.published).length)||0,x=(u==null?void 0:u.reduce((p,g)=>p+(g.view_count||0),0))||0,y=(u==null?void 0:u.map(p=>p.id))||[];let v=0,b=[];if(y.length>0){const{count:p,error:g}=await T.from("order_items").select("order_id",{count:"exact",head:!0}).in("product_id",y).eq("orders.status","pending");g&&console.error("Error fetching orders:",g),v=p||0;const{data:w,error:S}=await T.from("order_items").select("quantity, unit_price").in("product_id",y);S&&console.error("Error fetching revenue:",S),b=w||[]}const m=(b==null?void 0:b.reduce((p,g)=>p+g.quantity*g.unit_price,0))||0;a({totalProducts:h,publishedProducts:f,pendingOrders:v,totalRevenue:m,totalViews:x})}catch(u){console.error("Error fetching stats:",u)}finally{l(!1)}};return r?i.jsx("div",{className:"flex justify-center items-center min-h-screen",children:i.jsx(G,{className:"animate-spin text-[#D4AF37]",size:48})}):!n||!t?i.jsx("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 border-2 border-[#D4AF37]",children:[i.jsx("div",{className:"w-16 h-16 bg-[#D4AF37]/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("svg",{className:"w-8 h-8 text-[#D4AF37]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No Vendor Profile Found"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Set up your vendor profile to start selling products and managing your inventory."}),i.jsxs("button",{onClick:()=>e("/vendor/profile"),className:"btn-primary inline-flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Set Up Vendor Profile"]})]})}):o?i.jsx("div",{className:"flex justify-center items-center min-h-screen",children:i.jsx(G,{className:"animate-spin text-[#D4AF37]",size:48})}):i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",t.business_name,"!"]}),i.jsx("p",{className:"text-gray-600",children:"Here's what's happening with your store today."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:i.jsx(St,{className:"text-blue-600",size:24})}),i.jsx(Lf,{className:"text-green-500",size:20})]}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalProducts}),i.jsx("p",{className:"text-sm text-gray-600",children:"Total Products"}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.publishedProducts," published"]})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:i.jsx(Y0,{className:"text-green-600",size:24})})}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",s.totalRevenue.toFixed(2)]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All-time sales"})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:i.jsx(fs,{className:"text-yellow-600",size:24})})}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.pendingOrders}),i.jsx("p",{className:"text-sm text-gray-600",children:"Pending Orders"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Awaiting processing"})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:i.jsx(nc,{className:"text-purple-600",size:24})})}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalViews}),i.jsx("p",{className:"text-sm text-gray-600",children:"Total Views"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Product page views"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("button",{onClick:()=>e("/vendor/products/new"),className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:border-[#D4AF37] hover:bg-[#D4AF37]/5 transition",children:[i.jsx("div",{className:"p-2 bg-[#D4AF37]/10 rounded-lg",children:i.jsx(mn,{className:"text-[#D4AF37]",size:20})}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-medium text-gray-900",children:"Add Product"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Create a new listing"})]})]}),i.jsxs("button",{onClick:()=>e("/vendor/products"),className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:border-[#D4AF37] hover:bg-[#D4AF37]/5 transition",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:i.jsx(St,{className:"text-blue-600",size:20})}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-medium text-gray-900",children:"View Products"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Manage your inventory"})]})]}),i.jsxs("button",{onClick:()=>e("/vendor/orders"),className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:border-[#D4AF37] hover:bg-[#D4AF37]/5 transition",children:[i.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:i.jsx(fs,{className:"text-yellow-600",size:20})}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-medium text-gray-900",children:"View Orders"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Check pending orders"})]})]})]})]}),!t.is_verified&&i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:i.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-yellow-900 mb-1",children:"Account Verification Pending"}),i.jsx("p",{className:"text-sm text-yellow-800 mb-3",children:"Your vendor account is pending verification. Complete your profile to speed up the process."}),i.jsx("button",{onClick:()=>e("/vendor/profile"),className:"text-sm font-medium text-yellow-900 hover:underline",children:"Complete Profile "})]})]})})]})}function Pw(e={}){const{search:t="",publishedOnly:r=!1,limit:n=20,offset:s=0}=e,[a,o]=_.useState([]),[l,c]=_.useState(!0),[u,d]=_.useState(null),[h,f]=_.useState(0),x=async()=>{try{c(!0),d(null);const{data:{user:y},error:v}=await T.auth.getUser();if(v)throw v;if(!y)throw new Error("User not authenticated");const{data:b,error:m}=await T.from("vendors").select("id").eq("user_id",y.id).single();if(m)throw m;if(!b)throw new Error("Vendor profile not found");let p=T.from("products").select(`
          *,
          product_images(id, url, alt_text, position),
          product_specs(id, spec_key, spec_value),
          product_categories(categories(id, name, slug))
        `,{count:"exact"}).eq("seller_id",b.id).order("created_at",{ascending:!1});t&&(p=p.or(`name.ilike.%${t}%,sku.ilike.%${t}%,description.ilike.%${t}%`)),r&&(p=p.eq("published",!0)),p=p.range(s,s+n-1);const{data:g,error:w,count:S}=await p;if(w)throw w;o(g||[]),f(S||0)}catch(y){console.error("Error fetching vendor products:",y),d(y instanceof Error?y.message:"Failed to fetch products")}finally{c(!1)}};return _.useEffect(()=>{x()},[t,r,n,s]),{products:a,loading:l,error:u,total:h,refetch:x}}function Aw({product:e,onEdit:t,onDelete:r,onView:n}){var o;const s=(o=e.product_images)==null?void 0:o[0],a=s==null?void 0:s.url;return i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow h-full flex flex-col w-full max-w-[280px]",children:[i.jsxs("div",{className:"aspect-4/3 bg-gray-100 relative",children:[a?i.jsx("img",{src:s.url,alt:s.alt_text||e.name,className:"w-full h-full object-contain"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),i.jsx("div",{className:"absolute top-1 right-1",children:e.published?i.jsx("span",{className:"px-1 py-0.5 bg-green-500 text-white text-[9px] font-medium rounded",children:"Published"}):i.jsx("span",{className:"px-1 py-0.5 bg-gray-500 text-white text-[9px] font-medium rounded",children:"Draft"})}),e.stock===0&&i.jsx("div",{className:"absolute top-1 left-1",children:i.jsx("span",{className:"px-1 py-0.5 bg-red-500 text-white text-[9px] font-medium rounded",children:"Out of Stock"})})]}),i.jsxs("div",{className:"p-2 flex-1 flex flex-col",children:[i.jsx("h3",{className:"font-semibold text-xs text-gray-900 mb-0.5 line-clamp-2 leading-tight",children:e.name}),e.sku&&i.jsxs("p",{className:"text-[9px] text-gray-500 mb-1",children:["SKU: ",e.sku]}),i.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1.5",children:[i.jsxs("span",{className:"text-base font-bold text-[#D4AF37]",children:["$",e.price.toFixed(2)]}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:["Stock: ",e.stock]})]}),e.short_description&&i.jsx("p",{className:"text-[10px] text-gray-600 mb-1.5 line-clamp-2 leading-tight",children:e.short_description}),i.jsxs("div",{className:"flex gap-2 text-[9px] text-gray-500 mb-2 pb-1.5 border-b",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:e.view_count})," views"]}),e.brand&&i.jsx("div",{className:"truncate",children:i.jsx("span",{className:"font-medium text-gray-700",children:e.brand})})]}),i.jsxs("div",{className:"flex gap-1 mt-auto",children:[i.jsxs("button",{onClick:()=>n(e.id),className:"flex-1 inline-flex items-center justify-center gap-0.5 px-1.5 py-1 text-[10px] font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded transition",children:[i.jsx(nc,{size:12}),"View"]}),i.jsxs("button",{onClick:()=>t(e.id),className:"flex-1 inline-flex items-center justify-center gap-0.5 px-1.5 py-1 text-[10px] font-medium text-white bg-[#D4AF37] hover:bg-[#B8941F] rounded transition",children:[i.jsx(If,{size:12}),"Edit"]}),i.jsx("button",{onClick:()=>r(e.id),className:"px-1.5 py-1 text-red-600 hover:bg-red-50 rounded transition","aria-label":"Delete product",children:i.jsx(Df,{size:12})})]})]})]})}function lp({isOpen:e,title:t,message:r,confirmText:n="Confirm",cancelText:s="Cancel",onConfirm:a,onCancel:o,variant:l="danger"}){return e?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:o}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-200",children:[i.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition",children:i.jsx(et,{size:20})}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center ${l==="danger"?"bg-red-100":"bg-yellow-100"}`,children:i.jsx(K0,{className:l==="danger"?"text-red-600":"text-yellow-600",size:24})}),i.jsxs("div",{className:"flex-1 pt-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t}),i.jsx("p",{className:"text-sm text-gray-600",children:r})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:o,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:s}),i.jsx("button",{onClick:a,className:`flex-1 px-4 py-2 text-sm font-medium text-white rounded-lg transition ${l==="danger"?"bg-red-600 hover:bg-red-700":"bg-yellow-600 hover:bg-yellow-700"}`,children:n})]})]})]}):null}function Tw(){const e=he(),[t,r]=_.useState(""),[n,s]=_.useState(!1),[a,o]=_.useState(0),[l,c]=_.useState(!1),[u,d]=_.useState(null),[h,f]=_.useState(!1),x=12,y=a*x,{products:v,loading:b,error:m,total:p,refetch:g}=Pw({search:t,publishedOnly:n,limit:x,offset:y}),w=Math.ceil(p/x),S=async()=>{if(u){f(!0);try{const{error:j}=await T.from("products").delete().eq("id",u);if(j)throw j;c(!1),d(null),g()}catch(j){console.error("Error deleting product:",j),alert("Failed to delete product")}finally{f(!1)}}},k=j=>{d(j),c(!0)};return i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Products"}),i.jsxs("p",{className:"text-gray-600 mt-1",children:[p," products total"]})]}),i.jsxs("button",{onClick:()=>e("/vendor/products/new"),className:"btn-primary inline-flex items-center gap-2",children:[i.jsx(mn,{size:20}),"Add Product"]})]}),i.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(sc,{className:"absolute left-3 top-2.5 text-gray-400",size:20}),i.jsx("input",{type:"text",value:t,onChange:j=>{r(j.target.value),o(0)},placeholder:"Search products by name, SKU, or description...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent"})]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:n,onChange:j=>{s(j.target.checked),o(0)},className:"w-4 h-4 text-[#D4AF37] border-gray-300 rounded focus:ring-[#D4AF37]"}),i.jsx("span",{className:"text-sm text-gray-700",children:"Published only"})]})]})}),m&&i.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg mb-6",children:m}),b&&i.jsx("div",{className:"flex justify-center items-center py-20",children:i.jsx(G,{className:"animate-spin text-[#D4AF37]",size:48})}),!b&&v.length===0&&i.jsxs("div",{className:"text-center py-20",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:i.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t?"No products found":"No products yet"}),i.jsx("p",{className:"text-gray-600 mb-6",children:t?"Try adjusting your search or filters":"Get started by adding your first product"}),!t&&i.jsxs("button",{onClick:()=>e("/vendor/products/new"),className:"btn-primary inline-flex items-center gap-2",children:[i.jsx(mn,{size:20}),"Add Your First Product"]})]}),!b&&v.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 justify-items-center mb-8",children:v.map(j=>i.jsx(Aw,{product:j,onEdit:N=>e(`/vendor/products/${N}/edit`),onDelete:k,onView:N=>e(`/vendor/products/${N}`)},j.id))}),w>1&&i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("button",{onClick:()=>o(Math.max(0,a-1)),disabled:a===0,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Previous"}),i.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",a+1," of ",w]}),i.jsx("button",{onClick:()=>o(Math.min(w-1,a+1)),disabled:a>=w-1,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Next"})]})]}),i.jsx(lp,{isOpen:l,title:"Delete Product",message:"Are you sure you want to delete this product? This action cannot be undone.",confirmText:h?"Deleting...":"Delete",onConfirm:S,onCancel:()=>{c(!1),d(null)},variant:"danger"})]})}const Fw="69bcf51fbec18d562474ec6674ff8539",Rw="https://api.imgbb.com/1/upload";async function cp(e){if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(e.type))throw new Error("Invalid file type. Only JPEG, PNG, WEBP, and GIF are allowed.");const r=5*1024*1024;if(e.size>r)throw new Error("File size exceeds 5MB limit");const n=new FormData;n.append("image",e),n.append("key",Fw);try{const s=await fetch(Rw,{method:"POST",body:n});if(!s.ok)throw new Error(`Upload failed: ${s.statusText}`);const a=await s.json();if(!a.success)throw new Error("ImgBB upload failed");return{url:a.data.url,displayUrl:a.data.display_url,deleteUrl:a.data.delete_url}}catch(s){throw console.error("ImgBB upload error:",s),new Error(s instanceof Error?s.message:"Failed to upload image to ImgBB")}}async function Ow(e){try{const r=(await fetch(e,{method:"HEAD"})).headers.get("content-type");return(r==null?void 0:r.startsWith("image/"))??!1}catch{return!1}}function Iw({images:e,onChange:t,maxImages:r=10}){const[n,s]=_.useState("file"),[a,o]=_.useState(""),[l,c]=_.useState(!1),[u,d]=_.useState(null),[h,f]=_.useState(null),x=_.useRef(null),y=async k=>{if(!k||k.length===0)return;const j=k[0];c(!0),d(null);try{const P={url:(await cp(j)).displayUrl,alt_text:j.name.replace(/\.[^/.]+$/,""),position:e.length};t([...e,P])}catch(N){d(N instanceof Error?N.message:"Upload failed")}finally{c(!1)}},v=async()=>{if(a.trim()){c(!0),d(null);try{if(!await Ow(a))throw new Error("Invalid image URL");const j={url:a,alt_text:"",position:e.length};t([...e,j]),o("")}catch(k){d(k instanceof Error?k.message:"Invalid URL")}finally{c(!1)}}},b=k=>{const N=e.filter((P,C)=>C!==k).map((P,C)=>({...P,position:C}));t(N)},m=(k,j)=>{const N=[...e];N[k]={...N[k],alt_text:j},t(N)},p=k=>{f(k)},g=(k,j)=>{if(k.preventDefault(),h===null||h===j)return;const N=[...e],P=N[h];N.splice(h,1),N.splice(j,0,P);const C=N.map((O,W)=>({...O,position:W}));t(C),f(j)},w=()=>{f(null)},S=e.length<r;return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("button",{type:"button",onClick:()=>s("file"),className:`px-4 py-2 rounded-lg font-medium transition ${n==="file"?"bg-[#D4AF37] text-black":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Upload File"}),i.jsx("button",{type:"button",onClick:()=>s("url"),className:`px-4 py-2 rounded-lg font-medium transition ${n==="url"?"bg-[#D4AF37] text-black":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Paste URL"})]}),S&&i.jsxs(i.Fragment,{children:[n==="file"&&i.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[i.jsx("input",{ref:x,type:"file",accept:"image/*",onChange:k=>y(k.target.files),className:"hidden"}),i.jsx(Go,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("p",{className:"text-gray-600 mb-2",children:"Drag & drop or click to upload"}),i.jsx("button",{type:"button",onClick:()=>{var k;return(k=x.current)==null?void 0:k.click()},disabled:l,className:"btn-primary inline-flex items-center gap-2",children:l?i.jsxs(i.Fragment,{children:[i.jsx(G,{className:"animate-spin",size:16}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Go,{size:16}),"Choose File"]})}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"PNG, JPG, WEBP up to 5MB"})]}),n==="url"&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("div",{className:"flex-1",children:i.jsx("input",{type:"url",value:a,onChange:k=>o(k.target.value),placeholder:"https://example.com/image.jpg",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",onKeyDown:k=>k.key==="Enter"&&v()})}),i.jsx("button",{type:"button",onClick:v,disabled:l||!a.trim(),className:"btn-primary inline-flex items-center gap-2",children:l?i.jsx(G,{className:"animate-spin",size:16}):i.jsxs(i.Fragment,{children:[i.jsx(ax,{size:16}),"Add URL"]})})]})]}),u&&i.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg",children:u}),e.length>0&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Images (",e.length,"/",r,")"]}),e.map((k,j)=>i.jsxs("div",{draggable:!0,onDragStart:()=>p(j),onDragOver:N=>g(N,j),onDragEnd:w,className:"flex items-start gap-3 p-3 border border-gray-200 rounded-lg bg-white hover:border-gray-300 transition cursor-move",children:[i.jsx(ex,{className:"text-gray-400 mt-1 flex-shrink-0",size:20}),i.jsx("img",{src:k.url,alt:k.alt_text||"Product image",className:"w-20 h-20 object-cover rounded border border-gray-200 flex-shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("input",{type:"text",value:k.alt_text||"",onChange:N=>m(j,N.target.value),placeholder:"Alt text (optional)",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent"}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1 truncate",children:["Position: ",j+1]})]}),i.jsx("button",{type:"button",onClick:()=>b(j),className:"p-2 text-red-600 hover:bg-red-50 rounded transition flex-shrink-0",children:i.jsx(et,{size:18})})]},j))]}),!S&&i.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Maximum ",r," images reached"]})]})}function Dw({specs:e,onChange:t}){const r=()=>{const o={spec_key:"",spec_value:""};t([...e,o])},n=o=>{t(e.filter((l,c)=>c!==o))},s=(o,l)=>{const c=[...e];c[o]={...c[o],spec_key:l},t(c)},a=(o,l)=>{const c=[...e];c[o]={...c[o],spec_value:l},t(c)};return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product Specifications"}),i.jsxs("button",{type:"button",onClick:r,className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-[#D4AF37] hover:bg-[#D4AF37]/10 rounded-lg transition",children:[i.jsx(mn,{size:16}),"Add Spec"]})]}),e.length===0&&i.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[i.jsx("p",{className:"text-gray-500 text-sm",children:"No specifications added yet"}),i.jsx("button",{type:"button",onClick:r,className:"mt-2 text-[#D4AF37] hover:underline text-sm font-medium",children:"Add your first specification"})]}),e.length>0&&i.jsx("div",{className:"space-y-2",children:e.map((o,l)=>i.jsxs("div",{className:"flex gap-2 items-start",children:[i.jsx("input",{type:"text",value:o.spec_key,onChange:c=>s(l,c.target.value),placeholder:"Key (e.g., Weight)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent"}),i.jsx("input",{type:"text",value:o.spec_value||"",onChange:c=>a(l,c.target.value),placeholder:"Value (e.g., 2.5kg)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent"}),i.jsx("button",{type:"button",onClick:()=>n(l),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition","aria-label":"Remove specification",children:i.jsx(et,{size:20})})]},l))}),e.length>0&&i.jsxs("p",{className:"text-xs text-gray-500",children:[e.length," specification",e.length!==1?"s":""," added"]})]})}function Lw({selectedIds:e,onChange:t}){const[r,n]=_.useState([]),[s,a]=_.useState(!0),[o,l]=_.useState(!1);_.useEffect(()=>{c()},[]);const c=async()=>{try{const{data:f,error:x}=await T.from("categories").select("*").order("name");if(x)throw x;n(f||[])}catch(f){console.error("Error fetching categories:",f)}finally{a(!1)}},u=f=>{e.includes(f)?t(e.filter(x=>x!==f)):t([...e,f])},d=f=>{t(e.filter(x=>x!==f))},h=r.filter(f=>e.includes(f.id));return i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Categories"}),h.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:h.map(f=>i.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-[#D4AF37]/10 text-[#D4AF37] rounded-full text-sm font-medium",children:[f.name,i.jsx("button",{type:"button",onClick:()=>d(f.id),className:"hover:bg-[#D4AF37]/20 rounded-full p-0.5",children:i.jsx(et,{size:14})})]},f.id))}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{type:"button",onClick:()=>l(!o),className:"w-full px-4 py-2 text-left border border-gray-300 rounded-lg bg-white hover:border-gray-400 focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent transition flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700",children:e.length>0?`${e.length} selected`:"Select categories"}),i.jsx(aa,{className:`text-gray-400 transition-transform ${o?"rotate-180":""}`,size:20})]}),o&&i.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[s&&i.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"Loading categories..."}),!s&&r.length===0&&i.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No categories available"}),!s&&r.map(f=>{const x=e.includes(f.id);return i.jsxs("label",{className:"flex items-center px-4 py-2 hover:bg-gray-50 cursor-pointer transition",children:[i.jsx("input",{type:"checkbox",checked:x,onChange:()=>u(f.id),className:"w-4 h-4 text-[#D4AF37] border-gray-300 rounded focus:ring-[#D4AF37]"}),i.jsx("span",{className:"ml-3 text-sm text-gray-700",children:f.name})]},f.id)})]})]}),e.length===0&&i.jsx("p",{className:"text-xs text-gray-500",children:"Select at least one category for your product"})]})}function td(){const{id:e}=tc(),t=he(),{vendor:r,loading:n}=Es(),s=!!e,[a,o]=_.useState({name:"",sku:"",price:0,stock:0,short_description:"",description:"",brand:"",published:!1,images:[],specs:[],category_ids:[]}),[l,c]=_.useState(s),[u,d]=_.useState(!1),[h,f]=_.useState(null),[x,y]=_.useState(!1),[v,b]=_.useState(0),[m,p]=_.useState(0);_.useEffect(()=>{s&&e&&g(e)},[e,s]);const g=async j=>{try{c(!0);const{data:N,error:P}=await T.from("products").select(`
          *,
          product_images(*),
          product_specs(*),
          product_categories(category_id)
        `).eq("id",j).single();if(P)throw P;N&&o({name:N.name,sku:N.sku||"",price:N.price,stock:N.stock,short_description:N.short_description||"",description:N.description||"",brand:N.brand||"",published:N.published,images:(N.product_images||[]).sort((C,O)=>C.position-O.position),specs:N.product_specs||[],category_ids:(N.product_categories||[]).map(C=>C.category_id)})}catch(N){console.error("Error fetching product:",N),f("Failed to load product")}finally{c(!1)}},w=async j=>{if(j.preventDefault(),!r){f("Vendor profile not found");return}d(!0),f(null);try{if(!a.name.trim())throw new Error("Product name is required");if(a.price<=0)throw new Error("Price must be greater than 0");if(a.category_ids.length===0)throw new Error("Select at least one category");s&&e?await k(e):await S(),t("/vendor/products")}catch(N){console.error("Error saving product:",N),f(N instanceof Error?N.message:"Failed to save product")}finally{d(!1)}},S=async()=>{if(!r)return;const j=a.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),{data:N,error:P}=await T.from("products").insert({name:a.name,slug:j,sku:a.sku||null,short_description:a.short_description||null,description:a.description||null,price:a.price,stock:a.stock,brand:a.brand||null,published:a.published,seller_id:r.id}).select().single();if(P)throw P;if(a.images.length>0){const C=a.images.map(W=>({product_id:N.id,url:W.url,alt_text:W.alt_text,position:W.position})),{error:O}=await T.from("product_images").insert(C);if(O)throw O}if(a.specs.length>0){const C=a.specs.filter(O=>O.spec_key.trim()).map(O=>({product_id:N.id,spec_key:O.spec_key,spec_value:O.spec_value}));if(C.length>0){const{error:O}=await T.from("product_specs").insert(C);if(O)throw O}}if(a.category_ids.length>0){const C=a.category_ids.map(W=>({product_id:N.id,category_id:W})),{error:O}=await T.from("product_categories").insert(C);if(O)throw O}},k=async j=>{const{error:N}=await T.from("products").update({name:a.name,sku:a.sku||null,short_description:a.short_description||null,description:a.description||null,price:a.price,stock:a.stock,brand:a.brand||null,published:a.published,updated_at:new Date().toISOString()}).eq("id",j);if(N)throw N;if(await T.from("product_images").delete().eq("product_id",j),a.images.length>0){const C=a.images.map(W=>({product_id:j,url:W.url,alt_text:W.alt_text,position:W.position})),{error:O}=await T.from("product_images").insert(C);if(O)throw O}await T.from("product_specs").delete().eq("product_id",j);const P=a.specs.filter(C=>C.spec_key.trim());if(P.length>0){const C=P.map(W=>({product_id:j,spec_key:W.spec_key,spec_value:W.spec_value})),{error:O}=await T.from("product_specs").insert(C);if(O)throw O}if(await T.from("product_categories").delete().eq("product_id",j),a.category_ids.length>0){const C=a.category_ids.map(W=>({product_id:j,category_id:W})),{error:O}=await T.from("product_categories").insert(C);if(O)throw O}};return n||l?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx(G,{className:"animate-spin text-[#D4AF37]",size:48})}):r?i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>t("/vendor/products"),className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[i.jsx(rc,{size:20}),"Back to Products"]}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s?"Edit Product":"New Product"})]}),h&&i.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg mb-6",children:h}),i.jsxs("form",{onSubmit:w,className:"space-y-8",children:[i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Basic Information"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),i.jsx("input",{type:"text",value:a.name,onChange:j=>o({...a,name:j.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Enter product name"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),i.jsx("input",{type:"text",value:a.sku,onChange:j=>o({...a,sku:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"e.g., PROD-001"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),i.jsx("input",{type:"text",value:a.brand,onChange:j=>o({...a,brand:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Enter brand name"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price *"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"isPriceRange",checked:x,onChange:j=>y(j.target.checked),className:"w-4 h-4 cursor-pointer"}),i.jsx("label",{htmlFor:"isPriceRange",className:"text-sm text-gray-600 cursor-pointer",children:"Use price range"})]}),x?i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{children:"Min Price"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:"$"}),i.jsx("input",{type:"number",value:v,onChange:j=>b(parseFloat(j.target.value)||0),min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Min: 0.00"})]}),i.jsx("p",{children:"Max Price"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:"$"}),i.jsx("input",{type:"number",value:m,onChange:j=>p(parseFloat(j.target.value)||0),min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Max: 0.00"})]})]}):i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:"$"}),i.jsx("input",{type:"number",value:a.price,onChange:j=>o({...a,price:parseFloat(j.target.value)||0}),min:"0",step:"0.01",required:!0,className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"0.00"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock *"}),i.jsx("input",{type:"number",value:a.stock,onChange:j=>o({...a,stock:parseInt(j.target.value)||0}),min:"0",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"0"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Description"}),i.jsx("input",{type:"text",value:a.short_description,onChange:j=>o({...a,short_description:j.target.value}),maxLength:200,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Brief product description (max 200 characters)"}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.short_description.length,"/200 characters"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{value:a.description,onChange:j=>o({...a,description:j.target.value}),rows:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Detailed product description"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Images"}),i.jsx(Iw,{images:a.images,onChange:j=>o({...a,images:j}),maxImages:10})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Categories *"}),i.jsx(Lw,{selectedIds:a.category_ids,onChange:j=>o({...a,category_ids:j})})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Specifications"}),i.jsx(Dw,{specs:a.specs,onChange:j=>o({...a,specs:j})})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Publishing"}),i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:a.published,onChange:j=>o({...a,published:j.target.checked}),className:"w-5 h-5 text-[#D4AF37] border-gray-300 rounded focus:ring-[#D4AF37]"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Publish this product"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Published products are visible to customers"})]})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{type:"button",onClick:()=>t("/vendor/products"),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:u,className:"flex-1 btn-primary inline-flex items-center justify-center gap-2",children:u?i.jsxs(i.Fragment,{children:[i.jsx(G,{className:"animate-spin",size:20}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Rf,{size:20}),s?"Update Product":"Create Product"]})})]})]})]}):i.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Vendor Access Required"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"You need a vendor account to manage products."}),i.jsx("button",{onClick:()=>t("/vendor/profile"),className:"btn-primary",children:"Set Up Vendor Profile"})]})}function $w(){var v,b;const{id:e}=tc(),t=he(),[r,n]=_.useState(null),[s,a]=_.useState(!0),[o,l]=_.useState(!1),[c,u]=_.useState(!1);_.useEffect(()=>{e&&d(e)},[e]);const d=async m=>{try{const{data:p,error:g}=await T.from("products").select(`
          *,
          product_images(*),
          product_specs(*),
          product_categories(categories(*))
        `).eq("id",m).single();if(g)throw g;n(p)}catch(p){console.error("Error fetching product:",p)}finally{a(!1)}},h=async()=>{if(e){u(!0);try{const{error:m}=await T.from("products").delete().eq("id",e);if(m)throw m;t("/vendor/products")}catch(m){console.error("Error deleting product:",m),alert("Failed to delete product")}finally{u(!1)}}};if(s)return i.jsx("div",{className:"flex justify-center items-center min-h-screen",children:i.jsx(G,{className:"animate-spin text-[#D4AF37]",size:48})});if(!r)return i.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Product Not Found"}),i.jsx("button",{onClick:()=>t("/vendor/products"),className:"btn-primary",children:"Back to Products"})]});const f=((v=r.product_images)==null?void 0:v.sort((m,p)=>m.position-p.position))||[],x=r.product_specs||[],y=((b=r.product_categories)==null?void 0:b.map(m=>m.categories).filter(Boolean))||[];return i.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>t("/vendor/products"),className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[i.jsx(rc,{size:20}),"Back to Products"]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.name}),r.published?i.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm font-medium rounded-full",children:"Published"}):i.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm font-medium rounded-full",children:"Draft"})]}),r.sku&&i.jsxs("p",{className:"text-gray-500",children:["SKU: ",r.sku]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>t(`/vendor/products/${r.id}/edit`),className:"btn-primary inline-flex items-center gap-2",children:[i.jsx(If,{size:18}),"Edit"]}),i.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 text-red-600 border border-red-600 hover:bg-red-50 rounded-lg transition",children:i.jsx(Df,{size:18})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[i.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-[#D4AF37]/10 rounded-lg",children:i.jsx(St,{className:"text-[#D4AF37]",size:24})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.stock}),i.jsx("p",{className:"text-sm text-gray-600",children:"In Stock"})]})]})}),i.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:i.jsx(nc,{className:"text-blue-600",size:24})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.view_count}),i.jsx("p",{className:"text-sm text-gray-600",children:"Views"})]})]})}),i.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:i.jsx(Lf,{className:"text-green-600",size:24})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",r.price.toFixed(2)]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Price"})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Images"}),f.length>0?i.jsx("div",{className:"space-y-4",children:f.map((m,p)=>i.jsxs("div",{children:[i.jsx("img",{src:m.url,alt:m.alt_text||`Product image ${p+1}`,className:"w-full rounded-lg border border-gray-200"}),m.alt_text&&i.jsx("p",{className:"text-sm text-gray-600 mt-2",children:m.alt_text})]},m.id||p))}):i.jsx("p",{className:"text-gray-500 text-sm",children:"No images uploaded"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Details"}),i.jsxs("dl",{className:"space-y-3",children:[r.brand&&i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Brand"}),i.jsx("dd",{className:"text-sm text-gray-900",children:r.brand})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Price"}),i.jsxs("dd",{className:"text-2xl font-bold text-[#D4AF37]",children:["$",r.price.toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Stock"}),i.jsx("dd",{className:`text-sm font-medium ${r.stock>0?"text-green-600":"text-red-600"}`,children:r.stock>0?`${r.stock} units available`:"Out of stock"})]})]})]}),y.length>0&&i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Categories"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(m=>i.jsx("span",{className:"px-3 py-1 bg-[#D4AF37]/10 text-[#D4AF37] rounded-full text-sm font-medium",children:m.name},m.id))})]}),x.length>0&&i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Specifications"}),i.jsx("dl",{className:"space-y-2",children:x.map(m=>i.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 last:border-0",children:[i.jsx("dt",{className:"text-sm font-medium text-gray-700",children:m.spec_key}),i.jsx("dd",{className:"text-sm text-gray-900",children:m.spec_value})]},m.id))})]})]})]}),(r.short_description||r.description)&&i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mt-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Description"}),r.short_description&&i.jsx("p",{className:"text-gray-700 mb-4 font-medium",children:r.short_description}),r.description&&i.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:r.description})]}),i.jsx(lp,{isOpen:o,title:"Delete Product",message:"Are you sure you want to delete this product? This action cannot be undone.",confirmText:c?"Deleting...":"Delete",onConfirm:h,onCancel:()=>l(!1),variant:"danger"})]})}function Uw(){const{vendor:e,loading:t}=Es(),[r,n]=_.useState([]),[s,a]=_.useState(!0),[o,l]=_.useState("all");_.useEffect(()=>{e&&c()},[e,o]);const c=async()=>{if(e)try{a(!0);const{data:h,error:f}=await T.from("products").select("id").eq("seller_id",e.id);if(f)throw f;const x=(h==null?void 0:h.map(g=>g.id))||[];if(x.length===0){n([]);return}let y=T.from("order_items").select(`
          *,
          products(id, name, price),
          orders!inner(
            id,
            status,
            total_amount,
            currency,
            placed_at,
            updated_at,
            shipping_address:addresses(*)
          )
        `).in("product_id",x).order("created_at",{ascending:!1});const{data:v,error:b}=await y;if(b)throw b;const m=new Map;v==null||v.forEach(g=>{const w=g.orders.id;m.has(w)||m.set(w,{...g.orders,order_items:[]});const S=m.get(w);S.order_items=S.order_items||[],S.order_items.push({...g,products:g.products})});let p=Array.from(m.values());o!=="all"&&(p=p.filter(g=>g.status===o)),n(p)}catch(h){console.error("Error fetching orders:",h)}finally{a(!1)}};if(t||s)return i.jsx("div",{className:"flex justify-center items-center min-h-screen",children:i.jsx(G,{className:"animate-spin text-[#D4AF37]",size:48})});const u=h=>{switch(h){case"pending":return i.jsx(Q0,{className:"text-yellow-600",size:20});case"completed":return i.jsx(Pf,{className:"text-green-600",size:20});case"shipped":return i.jsx(St,{className:"text-blue-600",size:20});case"cancelled":return i.jsx(fx,{className:"text-red-600",size:20});default:return null}},d=h=>{switch(h){case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"shipped":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Orders"}),i.jsx("p",{className:"text-gray-600",children:"Manage orders containing your products"})]}),i.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-6",children:i.jsx("div",{className:"flex gap-2 overflow-x-auto",children:["all","pending","shipped","completed","cancelled"].map(h=>i.jsx("button",{onClick:()=>l(h),className:`px-4 py-2 rounded-lg font-medium transition whitespace-nowrap ${o===h?"bg-[#D4AF37] text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:h.charAt(0).toUpperCase()+h.slice(1)},h))})}),r.length===0?i.jsxs("div",{className:"text-center py-20 bg-white rounded-lg border border-gray-200",children:[i.jsx(St,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Orders Found"}),i.jsx("p",{className:"text-gray-600",children:o==="all"?"No orders containing your products yet":`No ${o} orders`})]}):i.jsx("div",{className:"space-y-4",children:r.map(h=>{var f;return i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4 pb-4 border-b border-gray-200",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Order #",h.id.slice(0,8)]}),i.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${d(h.status)}`,children:[u(h.status),h.status.charAt(0).toUpperCase()+h.status.slice(1)]})]}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Placed on ",new Date(h.placed_at).toLocaleDateString()," at"," ",new Date(h.placed_at).toLocaleTimeString()]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-2xl font-bold text-[#D4AF37]",children:["$",h.total_amount.toFixed(2)]}),i.jsx("p",{className:"text-sm text-gray-600",children:h.currency})]})]}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:"Your Products in this Order:"}),(f=h.order_items)==null?void 0:f.map(x=>{var y;return i.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-gray-900",children:((y=x.products)==null?void 0:y.name)||"Unknown Product"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",x.quantity,"  $",x.unit_price.toFixed(2)]})]}),i.jsxs("p",{className:"font-semibold text-gray-900",children:["$",(x.quantity*x.unit_price).toFixed(2)]})]},x.id)})]}),h.shipping_address&&i.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Shipping Address"}),i.jsxs("p",{className:"text-sm text-gray-600",children:[h.shipping_address.line1,h.shipping_address.line2&&`, ${h.shipping_address.line2}`,i.jsx("br",{}),h.shipping_address.city,", ",h.shipping_address.state," ",h.shipping_address.postal_code,i.jsx("br",{}),h.shipping_address.country]})]})]},h.id)})})]})}function zw(){const{vendor:e,loading:t,refetch:r}=Es(),[n,s]=_.useState({business_name:"",email:"",phone:"",country:"",city:"",address:"",bank_name:"",bank_account_number:"",bank_account_name:"",payout_currency:"USD",logo_url:""}),[a,o]=_.useState(!1),[l,c]=_.useState(!1),[u,d]=_.useState(null),[h,f]=_.useState(!1);_.useEffect(()=>{e&&s({business_name:e.business_name,email:e.email,phone:e.phone||"",country:e.country||"",city:e.city||"",address:e.address||"",bank_name:e.bank_name||"",bank_account_number:e.bank_account_number||"",bank_account_name:e.bank_account_name||"",payout_currency:e.payout_currency||"USD",logo_url:e.logo_url||""})},[e]);const x=async v=>{o(!0),d(null);try{const b=await cp(v);s({...n,logo_url:b.displayUrl})}catch(b){d(b instanceof Error?b.message:"Logo upload failed")}finally{o(!1)}},y=async v=>{var b,m;v.preventDefault(),c(!0),d(null),f(!1);try{if(!((b=n.business_name)!=null&&b.trim()))throw new Error("Business name is required");if(!((m=n.email)!=null&&m.trim()))throw new Error("Email is required");if(e){const{error:p}=await T.from("vendors").update({business_name:n.business_name,email:n.email,phone:n.phone,country:n.country,city:n.city,address:n.address,bank_name:n.bank_name,bank_account_number:n.bank_account_number,bank_account_name:n.bank_account_name,payout_currency:n.payout_currency,logo_url:n.logo_url,updated_at:new Date().toISOString()}).eq("id",e.id);if(p)throw p}else{const{data:{user:p},error:g}=await T.auth.getUser();if(g)throw g;if(!p)throw new Error("User not authenticated");const{data:w}=await T.from("user_profiles").select("id").eq("user_id",p.id).maybeSingle();if(!w){const{error:k}=await T.from("user_profiles").insert({user_id:p.id,email:p.email,display_name:n.business_name||"Vendor"});if(k&&(console.error("Error creating user profile:",k),k.code!=="23505"))throw new Error(`Failed to create base user profile: ${k.message}`)}const{error:S}=await T.from("vendors").insert({user_id:p.id,business_name:n.business_name,email:n.email,phone:n.phone,country:n.country,city:n.city,address:n.address,bank_name:n.bank_name,bank_account_number:n.bank_account_number,bank_account_name:n.bank_account_name,payout_currency:n.payout_currency,logo_url:n.logo_url});if(S)throw S}f(!0),await r(),setTimeout(()=>f(!1),3e3)}catch(p){console.error("Error saving vendor profile:",p),d(p instanceof Error?p.message:"Failed to save profile")}finally{c(!1)}};return t?i.jsx("div",{className:"flex justify-center items-center min-h-screen",children:i.jsx(G,{className:"animate-spin text-[#D4AF37]",size:48})}):i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Vendor Profile"}),i.jsx("p",{className:"text-gray-600",children:e?"Update your vendor information":"Create your vendor profile"})]}),u&&i.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg mb-6",children:u}),h&&i.jsx("div",{className:"bg-green-50 text-green-600 px-4 py-3 rounded-lg mb-6",children:"Profile saved successfully!"}),e&&!e.is_verified&&i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:i.jsxs("p",{className:"text-sm text-yellow-800",children:[i.jsx("strong",{children:"Verification Pending:"})," Your vendor account is under review. You can still manage products, but they may not be visible to customers until verified."]})}),i.jsxs("form",{onSubmit:y,className:"space-y-8",children:[i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Business Information"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Logo"}),i.jsxs("div",{className:"flex items-center gap-4",children:[n.logo_url&&i.jsx("img",{src:n.logo_url,alt:"Business logo",className:"w-24 h-24 object-cover rounded-lg border border-gray-200"}),i.jsxs("label",{className:"cursor-pointer",children:[i.jsx("input",{type:"file",accept:"image/*",onChange:v=>{var b;(b=v.target.files)!=null&&b[0]&&x(v.target.files[0])},className:"hidden"}),i.jsx("div",{className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition",children:a?i.jsxs(i.Fragment,{children:[i.jsx(G,{className:"animate-spin",size:16}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Go,{size:16}),"Upload Logo"]})})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name *"}),i.jsx("input",{type:"text",value:n.business_name,onChange:v=>s({...n,business_name:v.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Your business name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),i.jsx("input",{type:"email",value:n.email,onChange:v=>s({...n,email:v.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"business@example.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),i.jsx("input",{type:"tel",value:n.phone||"",onChange:v=>s({...n,phone:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"+1 234 567 8900"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),i.jsx("input",{type:"text",value:n.country||"",onChange:v=>s({...n,country:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"United States"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),i.jsx("input",{type:"text",value:n.city||"",onChange:v=>s({...n,city:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"New York"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),i.jsx("textarea",{value:n.address||"",onChange:v=>s({...n,address:v.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Full business address"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Bank Details"}),i.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Required for receiving payments from sales"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),i.jsx("input",{type:"text",value:n.bank_name||"",onChange:v=>s({...n,bank_name:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"e.g., Chase Bank"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),i.jsx("input",{type:"text",value:n.bank_account_number||"",onChange:v=>s({...n,bank_account_number:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Account number"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Holder Name"}),i.jsx("input",{type:"text",value:n.bank_account_name||"",onChange:v=>s({...n,bank_account_name:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",placeholder:"Name on bank account"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payout Currency"}),i.jsxs("select",{value:n.payout_currency,onChange:v=>s({...n,payout_currency:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",children:[i.jsx("option",{value:"USD",children:"USD - US Dollar"}),i.jsx("option",{value:"EUR",children:"EUR - Euro"}),i.jsx("option",{value:"GBP",children:"GBP - British Pound"}),i.jsx("option",{value:"NGN",children:"NGN - Nigerian Naira"})]})]})]})]}),i.jsx("div",{className:"flex gap-4",children:i.jsx("button",{type:"submit",disabled:l,className:"flex-1 btn-primary inline-flex items-center justify-center gap-2",children:l?i.jsxs(i.Fragment,{children:[i.jsx(G,{className:"animate-spin",size:20}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Rf,{size:20}),"Save Profile"]})})})]})]})}const Mw=()=>{const{itemCount:e}=ha();return i.jsx(Zy,{cartItemCount:e})};function Bw(){const e=he(),t=(r,n)=>{switch(r){case"home":e("/");break;case"shop":e("/shop",{state:n});break;case"product":n&&e(`/product/${n}`);break;case"vendor/dashboard":e("/vendor/dashboard");break;default:e(`/${r}`)}};return i.jsx(aw,{children:i.jsx(ow,{children:i.jsxs(jw,{children:[i.jsx(Nw,{}),i.jsx(Sw,{}),i.jsx(kw,{}),i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsx(Mw,{}),i.jsx("main",{className:"grow px-0 sm:px-0 lg:px-0 pb-0 md:pb-0 mb-20 md:mb-0",children:i.jsxs(ku,{children:[i.jsx(me,{path:"/",element:i.jsx(Zu,{})}),i.jsx(me,{path:"/shop",element:i.jsx(sw,{onNavigate:t})}),i.jsx(me,{path:"/product/:id",element:i.jsx(lw,{})}),i.jsx(me,{path:"/cart",element:i.jsx(cw,{onNavigate:t})}),i.jsx(me,{path:"/checkout",element:i.jsx(uw,{})}),i.jsx(me,{path:"/order-confirmation",element:i.jsx(dw,{})}),i.jsx(me,{path:"/login",element:i.jsx(hw,{})}),i.jsx(me,{path:"/account",element:i.jsx(yw,{})}),i.jsx(me,{path:"/about",element:i.jsx(_w,{onNavigate:t})}),i.jsx(me,{path:"/vendor/*",element:i.jsx(Ew,{children:i.jsxs(ku,{children:[i.jsx(me,{path:"dashboard",element:i.jsx(Cw,{})}),i.jsx(me,{path:"products",element:i.jsx(Tw,{})}),i.jsx(me,{path:"products/new",element:i.jsx(td,{})}),i.jsx(me,{path:"products/:id",element:i.jsx($w,{})}),i.jsx(me,{path:"products/:id/edit",element:i.jsx(td,{})}),i.jsx(me,{path:"orders",element:i.jsx(Uw,{})}),i.jsx(me,{path:"profile",element:i.jsx(zw,{})})]})})}),i.jsx(me,{path:"*",element:i.jsx(Zu,{})})]})}),i.jsx(ew,{}),i.jsx(tw,{})]})]})})})}mf(document.getElementById("root")).render(i.jsx(_.StrictMode,{children:i.jsx(U0,{children:i.jsx(Bw,{})})}));
